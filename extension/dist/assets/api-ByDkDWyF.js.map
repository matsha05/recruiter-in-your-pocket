{"version":3,"file":"api-ByDkDWyF.js","sources":["../../src/background/api.ts"],"sourcesContent":["/**\n * Real API client for RIYP extension.\n * \n * Calls the actual RIYP backend endpoints.\n */\n\nimport type { JobMeta, SavedJob, AuthUser } from './messages';\n\n// Base URL for API calls\n// Production: https://recruiterinyourpocket.com\n// Development: Set VITE_DEV_MODE=true in .env to use localhost\nconst API_BASE = import.meta.env.VITE_DEV_MODE === 'true'\n    ? 'http://localhost:3000'\n    : 'https://recruiterinyourpocket.com';\n\n/**\n * Capture a job description and get quick match score.\n */\nexport async function captureJob(jd: string, meta: JobMeta): Promise<SavedJob> {\n    const response = await fetch(`${API_BASE}/api/extension/capture-jd`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({ jd, meta }),\n    });\n\n    const data = await response.json();\n\n    if (!data.success) {\n        throw new Error(data.error || 'Failed to capture job');\n    }\n\n    return data.data;\n}\n\n/**\n * Get all saved jobs for the current user.\n */\nexport async function getSavedJobs(): Promise<SavedJob[]> {\n    const response = await fetch(`${API_BASE}/api/extension/saved-jobs`, {\n        method: 'GET',\n        credentials: 'include',\n    });\n\n    const data = await response.json();\n\n    if (!data.success) {\n        throw new Error(data.error || 'Failed to fetch jobs');\n    }\n\n    return data.data;\n}\n\n/**\n * Delete a saved job.\n */\nexport async function deleteJob(jobId: string): Promise<void> {\n    const response = await fetch(`${API_BASE}/api/extension/delete-job?id=${encodeURIComponent(jobId)}`, {\n        method: 'DELETE',\n        credentials: 'include',\n    });\n\n    const data = await response.json();\n\n    if (!data.success) {\n        throw new Error(data.error || 'Failed to delete job');\n    }\n}\n\n/**\n * Check authentication status.\n */\nexport async function checkAuth(): Promise<{ authenticated: boolean; user: AuthUser | null }> {\n    try {\n        const response = await fetch(`${API_BASE}/api/extension/auth-status`, {\n            method: 'GET',\n            credentials: 'include',\n        });\n\n        const data = await response.json();\n\n        return {\n            authenticated: data.authenticated ?? false,\n            user: data.user ?? null,\n        };\n    } catch {\n        return { authenticated: false, user: null };\n    }\n}\n\n/**\n * Get the full analysis URL for a job.\n */\nexport function getFullAnalysisUrl(jobId: string): string {\n    return `${API_BASE}/jobs/${jobId}`;\n}\n\n/**\n * Get the jobs page URL.\n */\nexport function getJobsUrl(): string {\n    return `${API_BASE}/jobs`;\n}\n\n/**\n * Get the login URL.\n */\nexport function getLoginUrl(): string {\n    return `${API_BASE}/login?from=extension`;\n}\n\n/**\n * Get the Google OAuth URL.\n */\nexport function getGoogleAuthUrl(): string {\n    return `${API_BASE}/auth/google?from=extension`;\n}\n"],"names":[],"mappings":"AAWA,MAAM,QAAA,GAEA,mCAAA;AAKN,eAAsB,UAAA,CAAW,IAAY,IAAA,EAAkC;AAC3E,EAAA,MAAM,QAAA,GAAW,MAAM,KAAA,CAAM,CAAA,EAAG,QAAQ,CAAA,yBAAA,CAAA,EAA6B;AAAA,IACjE,MAAA,EAAQ,MAAA;AAAA,IACR,OAAA,EAAS,EAAE,cAAA,EAAgB,kBAAA,EAAmB;AAAA,IAC9C,WAAA,EAAa,SAAA;AAAA,IACb,MAAM,IAAA,CAAK,SAAA,CAAU,EAAE,EAAA,EAAI,MAAM;AAAA,GACpC,CAAA;AAED,EAAA,MAAM,IAAA,GAAO,MAAM,QAAA,CAAS,IAAA,EAAK;AAEjC,EAAA,IAAI,CAAC,KAAK,OAAA,EAAS;AACf,IAAA,MAAM,IAAI,KAAA,CAAM,IAAA,CAAK,KAAA,IAAS,uBAAuB,CAAA;AAAA,EACzD;AAEA,EAAA,OAAO,IAAA,CAAK,IAAA;AAChB;AAKA,eAAsB,YAAA,GAAoC;AACtD,EAAA,MAAM,QAAA,GAAW,MAAM,KAAA,CAAM,CAAA,EAAG,QAAQ,CAAA,yBAAA,CAAA,EAA6B;AAAA,IACjE,MAAA,EAAQ,KAAA;AAAA,IACR,WAAA,EAAa;AAAA,GAChB,CAAA;AAED,EAAA,MAAM,IAAA,GAAO,MAAM,QAAA,CAAS,IAAA,EAAK;AAEjC,EAAA,IAAI,CAAC,KAAK,OAAA,EAAS;AACf,IAAA,MAAM,IAAI,KAAA,CAAM,IAAA,CAAK,KAAA,IAAS,sBAAsB,CAAA;AAAA,EACxD;AAEA,EAAA,OAAO,IAAA,CAAK,IAAA;AAChB;AAKA,eAAsB,UAAU,KAAA,EAA8B;AAC1D,EAAA,MAAM,QAAA,GAAW,MAAM,KAAA,CAAM,CAAA,EAAG,QAAQ,CAAA,6BAAA,EAAgC,kBAAA,CAAmB,KAAK,CAAC,CAAA,CAAA,EAAI;AAAA,IACjG,MAAA,EAAQ,QAAA;AAAA,IACR,WAAA,EAAa;AAAA,GAChB,CAAA;AAED,EAAA,MAAM,IAAA,GAAO,MAAM,QAAA,CAAS,IAAA,EAAK;AAEjC,EAAA,IAAI,CAAC,KAAK,OAAA,EAAS;AACf,IAAA,MAAM,IAAI,KAAA,CAAM,IAAA,CAAK,KAAA,IAAS,sBAAsB,CAAA;AAAA,EACxD;AACJ;AAKA,eAAsB,SAAA,GAAwE;AAC1F,EAAA,IAAI;AACA,IAAA,MAAM,QAAA,GAAW,MAAM,KAAA,CAAM,CAAA,EAAG,QAAQ,CAAA,0BAAA,CAAA,EAA8B;AAAA,MAClE,MAAA,EAAQ,KAAA;AAAA,MACR,WAAA,EAAa;AAAA,KAChB,CAAA;AAED,IAAA,MAAM,IAAA,GAAO,MAAM,QAAA,CAAS,IAAA,EAAK;AAEjC,IAAA,OAAO;AAAA,MACH,aAAA,EAAe,KAAK,aAAA,IAAiB,KAAA;AAAA,MACrC,IAAA,EAAM,KAAK,IAAA,IAAQ;AAAA,KACvB;AAAA,EACJ,CAAA,CAAA,MAAQ;AACJ,IAAA,OAAO,EAAE,aAAA,EAAe,KAAA,EAAO,IAAA,EAAM,IAAA,EAAK;AAAA,EAC9C;AACJ;AAYO,SAAS,UAAA,GAAqB;AACjC,EAAA,OAAO,GAAG,QAAQ,CAAA,KAAA,CAAA;AACtB;AAKO,SAAS,WAAA,GAAsB;AAClC,EAAA,OAAO,GAAG,QAAQ,CAAA,qBAAA,CAAA;AACtB;AAKO,SAAS,gBAAA,GAA2B;AACvC,EAAA,OAAO,GAAG,QAAQ,CAAA,2BAAA,CAAA;AACtB;;;;"}