<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Recruiter in Your Pocket</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    @import url("https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;600;700&family=Manrope:wght@400;500;600&display=swap");

    :root {
      --bg-page: #f3f5f9;
      --bg-panel: #ffffff;
      --bg-card: #ffffff;
      --border-subtle: #d7dae3;
      --border-strong: #c6cbd6;
      --accent: #2563eb;
      --accent-boost: #1d4ed8;
      --accent-strong: #1e3a8a;
      --text-main: #0e1117;
      --text-soft: #3f4552;
      --text-muted: #667085;
      --surface-tint: #f1f3f8;
      --success: #15803d;
      --error: #b91c1c;
      --shadow-soft: 0 18px 50px rgba(15, 23, 42, 0.08);
      --shadow-strong: 0 28px 80px rgba(12, 17, 32, 0.16);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: "Manrope", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      min-height: 100vh;
      background: linear-gradient(180deg, #f6f8fb 0%, #eef1f7 60%, #e8ecf5 100%);
      color: var(--text-main);
      display: flex;
      justify-content: center;
      padding: 32px 16px 42px;
      font-size: 15px;
      line-height: 1.7;
    }

    .page {
      width: 100%;
      max-width: 1200px;
      border-radius: 22px;
      border: 1px solid rgba(12, 17, 32, 0.06);
      background: var(--bg-panel);
      box-shadow: var(--shadow-soft), 0 0 0 1px rgba(15, 23, 42, 0.03);
      padding: 26px 26px 34px;
      position: relative;
    }

    .page-inner {
      position: relative;
      z-index: 1;
    }

    @media (max-width: 768px) {
      .page {
        padding: 16px 14px 22px;
        border-radius: 22px;
      }
      .tool-layout {
        gap: 18px;
      }
      .card {
        padding: 18px;
      }
      .hero {
        margin-bottom: 20px;
      }
      .hero-title {
        font-size: 26px;
      }
      .hero-subtitle {
        font-size: 14px;
        line-height: 1.55;
      }
    }

    /* Top bar */

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      gap: 12px;
      padding: 6px 0 14px;
    }

    .brand {
      display: inline-flex;
      align-items: baseline;
      gap: 10px;
    }

    .brand-wordmark {
      font-family: "Space Grotesk", "Manrope", system-ui, -apple-system, sans-serif;
      font-size: 18px;
      letter-spacing: -0.02em;
      font-weight: 700;
      color: var(--text-main);
      text-transform: uppercase;
      line-height: 1.1;
    }

    .version-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 14px;
      border-radius: 12px;
      border: 1px solid rgba(12, 17, 32, 0.08);
      background: rgba(255, 255, 255, 0.8);
      font-size: 12px;
      color: var(--text-muted);
      letter-spacing: 0.08em;
      text-transform: uppercase;
      box-shadow: 0 10px 30px rgba(15, 23, 42, 0.06);
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--success);
      box-shadow: 0 0 0 5px rgba(21, 128, 61, 0.12);
    }

    @media (max-width: 600px) {
      .top-bar {
        flex-direction: column;
        align-items: flex-start;
      }
    }

    /* Hero */

    .hero {
      position: relative;
      margin: 0 auto 24px;
      padding: 18px 18px 12px;
      max-width: 1100px;
      border-radius: 22px;
      overflow: hidden;
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.012), rgba(15, 23, 42, 0.04));
      box-shadow: 0 16px 36px rgba(15, 23, 42, 0.1);
    }

    .hero::before {
      content: "";
      position: absolute;
      inset: -8% -12%;
      background: radial-gradient(circle at 20% 20%, rgba(14, 58, 93, 0.05), transparent 36%),
                  radial-gradient(circle at 80% 10%, rgba(15, 23, 42, 0.05), transparent 32%);
      pointer-events: none;
    }

    .hero > * {
      position: relative;
      z-index: 1;
    }

    .hero-title {
      font-family: "Space Grotesk", "Manrope", system-ui, -apple-system, sans-serif;
      font-size: 40px;
      letter-spacing: -0.04em;
      color: var(--text-main);
      font-weight: 700;
      line-height: 1.05;
      margin-bottom: 16px;
      max-width: 820px;
    }

    .hero-subtitle {
      font-size: 17px;
      color: var(--text-soft);
      max-width: 640px;
      line-height: 1.65;
      margin-bottom: 16px;
    }

    .hero-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 10px 14px;
      margin-top: 12px;
      font-size: 12px;
      color: var(--text-muted);
    }

    .hero-pill {
      display: inline-flex;
      align-items: center;
      gap: 9px;
      padding: 7px 14px;
      border-radius: 14px;
      border: 1px solid var(--border-subtle);
      background: rgba(255, 255, 255, 0.9);
      color: var(--text-soft);
      letter-spacing: 0.04em;
      box-shadow: 0 10px 26px rgba(15, 23, 42, 0.06);
    }

    .hero-pill span:first-child {
      width: 20px;
      height: 20px;
      border-radius: 7px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      background: var(--surface-tint);
      border: 1px solid var(--border-subtle);
      color: var(--text-soft);
      font-weight: 700;
    }

    .hero-cred {
      font-size: 13px;
      color: var(--text-muted);
      max-width: 640px;
      margin-top: 20px;
      line-height: 1.65;
    }

    /* Social proof */
    .proof {
      margin-top: 18px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 12px;
    }

    .proof-card {
      background: rgba(255, 255, 255, 0.82);
      border: 1px solid var(--border-subtle);
      border-radius: 14px;
      padding: 12px 14px;
      box-shadow: 0 10px 26px rgba(15, 23, 42, 0.06);
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .proof-quote {
      font-size: 13px;
      color: var(--text-main);
      line-height: 1.6;
    }

    .proof-name {
      font-size: 12px;
      color: var(--text-soft);
      letter-spacing: 0.01em;
    }

    .proof-editorial {
      margin-top: 28px;
      padding: 14px 16px;
      border-left: 3px solid var(--accent-boost);
      background: transparent;
      border-radius: 0;
      box-shadow: none;
    }

    .proof-editorial-heading {
      font-size: 14px;
      font-weight: 700;
      color: var(--text-main);
      margin-bottom: 10px;
      letter-spacing: -0.01em;
    }

    .proof-editorial-quote {
      font-size: 13px;
      color: var(--text-muted);
      line-height: 1.6;
      margin-bottom: 8px;
    }

    .proof-editorial-quote:last-child {
      margin-bottom: 0;
    }

    .future-ribbon {
      display: flex;
      gap: 10px;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    .future-chip {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 10px;
      border: 1px solid var(--border-subtle);
      background: var(--surface-tint);
      color: var(--text-muted);
      font-size: 11px;
      letter-spacing: 0.01em;
    }

    .future-chip.warm {
      border-color: var(--border-subtle);
      background: var(--surface-tint);
      color: var(--text-muted);
    }

    @media (max-width: 600px) {
      .hero-title {
        font-size: 26px;
      }
      .hero-subtitle {
        font-size: 14px;
      }
    }

    /* Main tool area */

    .tool-layout {
      position: relative;
      margin-top: 12px;
      display: grid;
      grid-template-columns: minmax(0, 1.02fr) minmax(0, 1.05fr);
      gap: 32px;
      align-items: start;
    }

    .tool-layout::after {
      content: "";
      position: absolute;
      left: 50%;
      top: 10px;
      bottom: 10px;
      width: 1px;
      background: linear-gradient(
        180deg,
        rgba(15, 23, 42, 0) 0%,
        rgba(15, 23, 42, 0.08) 14%,
        rgba(15, 23, 42, 0.08) 86%,
        rgba(15, 23, 42, 0) 100%
      );
      transform: translateX(-50%);
      pointer-events: none;
    }

    @media (max-width: 860px) {
      .tool-layout {
        grid-template-columns: minmax(0, 1fr);
      }
      .tool-layout::after {
        display: none;
      }
    }

    .card {
      position: relative;
      background: var(--bg-card);
      border-radius: 18px;
      border: 1px solid rgba(12, 17, 32, 0.07);
      padding: 22px;
      box-shadow: var(--shadow-soft);
      overflow: visible;
    }

    .card::before {
      display: none;
    }

    .card-output {
      box-shadow: 0 18px 45px rgba(15, 23, 42, 0.08);
      border-color: rgba(12, 17, 32, 0.08);
      border-radius: 20px;
    }

    .card-output::before {
      content: "";
      position: absolute;
      left: 14px;
      top: 16px;
      bottom: 16px;
      width: 2px;
      border-radius: 8px;
      background: var(--accent-boost);
      opacity: 0.2;
      pointer-events: none;
    }

    .card-inner {
      position: relative;
      z-index: 1;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
    }

    .card-title {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-main);
      letter-spacing: -0.02em;
    }

    .card-input .card-title {
      font-size: 20px;
      font-weight: 800;
      letter-spacing: -0.02em;
      margin-bottom: 4px;
    }

    .mode-pill {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      padding: 7px 14px;
      border-radius: 14px;
      border: 1px solid rgba(12, 17, 32, 0.12);
      color: var(--text-soft);
      background: rgba(255, 255, 255, 0.8);
      white-space: nowrap;
      box-shadow: 0 10px 28px rgba(15, 23, 42, 0.08);
    }

    label {
      display: block;
      font-size: 13px;
      color: var(--text-soft);
      margin-bottom: 12px;
      letter-spacing: 0.01em;
    }

    textarea {
      width: 100%;
      min-height: 300px;
      max-height: 360px;
      overflow-y: auto;
      padding: 14px 16px;
      font-size: 15px;
      color: var(--text-main);
      border-radius: 12px;
      border: 1px solid var(--border-subtle);
      background: #ffffff;
      resize: none;
      margin: 0;
      line-height: 1.65;
      box-shadow: none;
      transition: border-color 0.16s ease, box-shadow 0.16s ease;
    }

    textarea::placeholder {
      color: var(--text-muted);
      font-size: 14px;
    }

    .input-meta-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
      margin-bottom: 12px;
      color: var(--text-muted);
    }

    .saved-indicator {
      color: #22c55e;
      opacity: 0;
      transition: opacity 0.25s ease-out;
    }

    .saved-indicator.visible {
      opacity: 1;
    }

    .mode-buttons {
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 12px;
      margin: 14px 0 16px;
    }

    @media (max-width: 600px) {
      .mode-buttons {
        gap: 6px;
      }
    }

    .mode-button {
      padding: 8px 16px;
      border-radius: 8px;
      border: 1px solid rgba(0, 0, 0, 0.12);
      background: #ffffff;
      color: rgba(0, 0, 0, 0.55);
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      box-shadow: none;
      transition: none;
    }

    .mode-button.active {
      background: rgba(3, 37, 65, 0.04);
      border-color: rgba(3, 37, 65, 0.35);
      color: rgb(3, 37, 65);
      font-weight: 600;
    }

    .mode-button.disabled-mode {
      opacity: 0.7;
      cursor: default;
      color: rgba(0, 0, 0, 0.55);
      background: #ffffff;
      border: 1px solid rgba(0, 0, 0, 0.08);
      box-shadow: none;
      pointer-events: none;
    }

    .mode-subtext {
      font-size: 11px;
      color: rgba(0, 0, 0, 0.38);
      margin-top: 2px;
      letter-spacing: 0.01em;
    }

    .mode-indicator {
      display: none;
    }

    body.focus-mode .tool-layout {
      grid-template-columns: minmax(0, 1fr);
      margin-top: 10px;
    }

    body.focus-mode .tool-layout::after {
      display: none;
    }

    body.focus-mode .card-input {
      display: none;
    }

    body.focus-mode .card-output {
      grid-column: 1 / -1;
      max-width: 960px;
      margin: 0 auto;
    }

    .card-input {
      margin-top: 0;
      border-radius: 20px;
      box-shadow: 0 18px 45px rgba(15, 23, 42, 0.08);
      border: 1px solid rgba(12, 17, 32, 0.08);
      padding: 24px;
    }

    .mode-indicator {
      position: absolute;
      bottom: 0;
      height: 3px;
      border-radius: 999px;
      background: linear-gradient(to right, var(--accent-boost), var(--accent-strong));
      transition: width 0.18s ease-out, transform 0.18s ease-out;
      box-shadow: 0 4px 14px rgba(15, 23, 42, 0.18);
    }

    .coming-soon-hint {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 2px;
      margin-bottom: 10px;
    }

    .run-row {
      position: relative;
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 16px;
    }

    .run-row::before {
      content: "";
      position: absolute;
      inset: -10px 8px 0 8px;
      background: radial-gradient(circle at 50% 30%, rgba(14, 58, 93, 0.14), transparent 55%);
      filter: blur(6px);
      z-index: 0;
      pointer-events: none;
    }

    .run-button {
      width: 100%;
      padding: 12px 14px;
      font-size: 16px;
      border-radius: 12px;
      border: 1px solid rgba(37, 99, 235, 0.7);
      cursor: pointer;
      background: var(--accent);
      color: #ffffff;
      font-weight: 700;
      letter-spacing: -0.01em;
      box-shadow: 0 8px 20px rgba(37, 99, 235, 0.24);
      transition: background 0.12s ease, box-shadow 0.12s ease, opacity 0.12s ease, transform 0.12s ease;
      position: relative;
      z-index: 1;
    }

    .run-button:hover:not(:disabled) {
      background: var(--accent);
      box-shadow: 0 10px 24px rgba(37, 99, 235, 0.28);
      transform: translateY(-1px);
    }

    .run-button:disabled {
      opacity: 0.65;
      cursor: default;
      box-shadow: 0 1px 3px rgba(10, 16, 28, 0.12);
    }

    .run-button:active:not(:disabled) {
      transform: scale(0.98);
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.22);
    }

    .status {
      font-size: 12px;
      color: var(--text-muted);
      min-height: 18px;
    }

    /* Results */

    .results-header-row {
      display: block;
      margin-top: 4px;
      margin-bottom: 6px;
    }

    .focus-controls {
      display: flex;
      justify-content: flex-end;
      margin: 4px 0 10px;
    }

    .focus-button {
      border: none;
      background: transparent;
      color: var(--accent-boost);
      font-size: 13px;
      font-weight: 600;
      letter-spacing: -0.01em;
      cursor: pointer;
      padding: 4px 0;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      text-decoration: none;
      transition: color 0.12s ease, text-decoration-color 0.12s ease;
    }

    .focus-button:hover {
      color: var(--accent-strong);
      text-decoration: underline;
      text-decoration-thickness: 1px;
      text-underline-offset: 2px;
    }

    .results-top {
      background: linear-gradient(180deg, #f7f8fc 0%, #f1f3f8 100%);
      border: 1px solid var(--border-subtle);
      border-radius: 14px;
      padding: 18px 16px 16px;
      margin-bottom: 16px;
      box-shadow: 0 16px 36px rgba(15, 23, 42, 0.12);
    }

    .report-view {
      transition: opacity 0.14s ease-out, transform 0.14s ease-out;
      transform: translateY(0);
      opacity: 1;
    }

    .report-view.report-view--reveal {
      opacity: 0;
      transform: translateY(3px);
    }

    .results-actions {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: 10px;
      margin-top: 8px;
    }

    .results-actions-bottom {
      margin-top: 16px;
    }

    .results-header-divider {
      height: 2px;
      background: var(--accent);
      margin: 12px 0 12px;
      border-radius: 999px;
      transform-origin: left center;
      transform: scaleX(1);
      transition: transform 0.16s ease-out;
    }

    .results-header-divider.accent-line-reset {
      transform: scaleX(0);
    }

    .score-wrapper {
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 0;
      border-radius: 999px;
      background: transparent;
      border: none;
      box-shadow: none;
    }

    .score-wrapper.hidden {
      display: none;
    }

    .score-cluster {
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }

    .score-texts {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .score-label-text {
      font-size: 13px;
      color: var(--text-main);
      font-weight: 700;
      letter-spacing: -0.01em;
    }

    .score-short-text {
      font-size: 12px;
      color: var(--text-soft);
      line-height: 1.4;
    }

    #results-title {
      font-size: 20px;
      margin-bottom: 8px;
      color: var(--text-main);
      font-weight: 800;
      letter-spacing: -0.02em;
    }

    .results-bridge {
      margin: 2px 0 10px;
    }

    .bridge-heading {
      font-size: 13px;
      font-weight: 700;
      color: var(--text-main);
      letter-spacing: -0.01em;
      margin-bottom: 4px;
    }

    #results-subtitle {
      font-size: 13px;
      color: var(--text-soft);
      line-height: 1.6;
      max-width: 620px;
      margin: 0;
    }

    .score-header-inside {
      width: 100%;
      display: flex;
      justify-content: center;
      margin: 6px 0 14px;
    }

    .score-badge {
      --score-pill-bg: rgba(37, 99, 235, 0.08);
      --score-pill-bg-boost: color-mix(in srgb, var(--score-pill-bg) 93%, white 7%);
      --score-pill-border: rgba(37, 99, 235, 0.28);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 12px 26px;
      border-radius: 999px;
      font-size: 22px;
      font-weight: 700;
      color: var(--accent);
      letter-spacing: -0.01em;
      position: relative;
      overflow: hidden;
      opacity: 0;
      transition:
        transform 0.16s ease-out,
        opacity 0.16s ease-out,
        background-color 0.08s ease-out;
      min-width: 118px;
      text-align: center;
      border: 1px solid var(--score-pill-border);
      background-color: var(--score-pill-bg);
      box-shadow: 0 12px 30px rgba(15, 23, 42, 0.08);
    }

    .score-badge.score-badge--glow {
      background-color: var(--score-pill-bg-boost);
      transition:
        transform 0.16s ease-out,
        opacity 0.16s ease-out,
        background-color 0.06s ease-out;
    }

    .score-pill--reveal {
      animation: score-reveal 0.15s ease-out;
    }

    @keyframes score-reveal {
      from {
        opacity: 0;
        transform: scale(0.96);
        box-shadow: 0 8px 18px rgba(15, 23, 42, 0.06);
      }
      to {
        opacity: 1;
        transform: scale(1);
        box-shadow: 0 12px 30px rgba(15, 23, 42, 0.08);
      }
    }

    .score-visible {
      opacity: 1;
      transform: scale(1);
    }

    .score-tooltip {
      position: absolute;
      top: 120%;
      right: 0;
      width: 320px;
      background: #ffffff;
      border: 1px solid var(--border-strong);
      box-shadow: 0 18px 44px rgba(0, 0, 0, 0.12);
      border-radius: 12px;
      padding: 12px;
      font-size: 12px;
      color: var(--text-main);
      line-height: 1.5;
      opacity: 0;
      transform: translateY(4px);
      pointer-events: none;
      transition: opacity 0.16s ease-out, transform 0.16s ease-out;
      z-index: 5;
    }

    .score-tip-line {
      margin-bottom: 6px;
      color: var(--text-soft);
    }

    .score-tip-line:last-child {
      margin-bottom: 0;
    }

    .score-wrapper:hover .score-tooltip,
    .score-wrapper:focus-within .score-tooltip,
    .score-tooltip.open {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
      box-shadow: 0 18px 44px rgba(0, 0, 0, 0.12);
    }

    .score-low {
      --score-pill-bg: #fbe4df;
      --score-pill-bg-boost: color-mix(in srgb, var(--score-pill-bg) 93%, white 7%);
      --score-pill-border: #f5c7bd;
      background-color: var(--score-pill-bg);
      border-color: var(--score-pill-border);
      color: #3c2317;
    }

    .score-mid {
      --score-pill-bg: #f7edd7;
      --score-pill-bg-boost: color-mix(in srgb, var(--score-pill-bg) 93%, white 7%);
      --score-pill-border: #ecd7ac;
      background-color: var(--score-pill-bg);
      border-color: var(--score-pill-border);
      color: #3f3011;
    }

    .score-good {
      --score-pill-bg: #e8edff;
      --score-pill-bg-boost: color-mix(in srgb, var(--score-pill-bg) 93%, white 7%);
      --score-pill-border: #cbd7ff;
      background-color: var(--score-pill-bg);
      border-color: var(--score-pill-border);
      color: #1f2f63;
    }

    .score-great {
      --score-pill-bg: #e3f6ee;
      --score-pill-bg-boost: color-mix(in srgb, var(--score-pill-bg) 93%, white 7%);
      --score-pill-border: #bdebd4;
      background-color: var(--score-pill-bg);
      border-color: var(--score-pill-border);
      color: #153828;
    }

    .score-bands-trigger {
      background: none;
      border: none;
      padding: 0;
      color: var(--text-soft);
      font-size: 12px;
      cursor: pointer;
      text-decoration: underline;
      text-underline-offset: 2px;
      margin-top: 8px;
      align-self: flex-start;
    }

    .score-bands-trigger:hover,
    .score-bands-trigger:focus-visible {
      color: var(--text-main);
    }

    .score-bands-panel {
      display: flex;
      flex-direction: column;
      gap: 10px;
      max-width: 320px;
    }

    .score-bands-panel-title {
      font-size: 13px;
      font-weight: 700;
      color: var(--text-main);
      letter-spacing: -0.01em;
    }

    .score-bands-intro {
      font-size: 12px;
      color: var(--text-soft);
      line-height: 1.55;
    }

    .score-bands-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .score-band-item {
      border: 1px solid var(--border-subtle);
      border-radius: 10px;
      padding: 8px 10px;
      background: #f9fafc;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .score-band-item.active {
      border-color: var(--accent);
      background: #eef2ff;
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
    }

    .score-band-header {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      color: var(--text-main);
      font-weight: 700;
      letter-spacing: -0.01em;
    }

    .score-band-range {
      color: var(--text-main);
    }

    .score-band-label {
      color: var(--text-soft);
      font-weight: 600;
    }

    .score-band-chip {
      margin-left: auto;
      font-size: 11px;
      background: #dfe7ff;
      color: #1f2f63;
      padding: 3px 6px;
      border-radius: 999px;
      font-weight: 700;
      letter-spacing: -0.01em;
    }

    .score-band-description {
      font-size: 12px;
      color: var(--text-soft);
      line-height: 1.5;
    }

    /* Paywall */
    .paywall-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.42);
      backdrop-filter: blur(2px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 20;
    }

    .paywall-card {
      background: #ffffff;
      border: 1px solid var(--border-subtle);
      border-radius: 14px;
      box-shadow: 0 22px 48px rgba(0, 0, 0, 0.12);
      width: min(520px, 92vw);
      padding: 18px 18px 16px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .paywall-title {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-main);
      letter-spacing: -0.015em;
    }

    .paywall-subtitle {
      font-size: 14px;
      color: var(--text-soft);
      line-height: 1.6;
    }

    .paywall-list {
      margin: 4px 0 8px;
      padding-left: 18px;
      color: var(--text-main);
      line-height: 1.55;
      font-size: 14px;
    }

    .paywall-actions {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 4px;
    }

    .paywall-primary {
      background: var(--accent);
      color: #fff;
      border: none;
      border-radius: 10px;
      padding: 10px 14px;
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
    }

    .paywall-secondary {
      background: none;
      border: 1px solid var(--border-subtle);
      color: var(--text-main);
      border-radius: 10px;
      padding: 10px 14px;
      font-size: 14px;
      cursor: pointer;
    }

    #loading-bar {
      height: 3px;
      border-radius: 999px;
      background: linear-gradient(90deg, var(--accent-strong), var(--accent-boost), var(--accent-strong));
      background-size: 200% 100%;
      margin-top: 8px;
      opacity: 0;
      transform: scaleX(0.9);
      transform-origin: center;
    }

    #loading-bar.active {
      opacity: 1;
      animation: loadingSlide 1.1s linear infinite;
      box-shadow: 0 8px 22px rgba(15, 23, 42, 0.18);
    }

    @keyframes loadingSlide {
      0% { background-position: 0% 0; }
      100% { background-position: 200% 0; }
    }

    #results-body {
      font-size: 14px;
      color: var(--text-main);
      background: #ffffff;
      border-radius: 14px;
      border: 1px solid var(--border-subtle);
      padding: 16px 18px 16px;
      line-height: 1.65;
      max-height: 520px;
      overflow-y: auto;
      white-space: normal;
      font-weight: 400;
      margin-top: 10px;
      box-shadow: inset 0 1px 0 rgba(15, 23, 42, 0.04);
      transition: opacity 0.18s ease, filter 0.18s ease;
    }

    #results-body.muted {
      opacity: 0.55;
      filter: grayscale(0.06);
    }

    #results-body.refreshed {
      animation: fadeSlideIn 0.24s ease;
    }

    #results-body.empty {
      color: rgba(156, 163, 175, 0.82);
    }

    .results-summary {
      font-size: 14px;
      color: var(--text-main);
      background: #ffffff;
      border: 1px solid var(--border-subtle);
      border-radius: 14px;
      padding: 14px 16px;
      line-height: 1.7;
      box-shadow: inset 0 1px 0 rgba(15, 23, 42, 0.02);
      margin-bottom: 12px;
    }

    .results-skeleton {
      border: 1px solid var(--border-subtle);
      border-radius: 14px;
      padding: 14px 16px;
      margin-top: 10px;
      background: #ffffff;
      box-shadow: inset 0 1px 0 rgba(15, 23, 42, 0.02);
      display: grid;
      gap: 6px;
    }

    .skeleton-line {
      height: 6px;
      border-radius: 999px;
      background: #e7e9f0;
      width: 100%;
      animation: none;
    }

    .skeleton-line.wide { width: 92%; }
    .skeleton-line.mid { width: 74%; }
    .skeleton-line.short { width: 52%; }

    .skeleton-divider {
      height: 1px;
      background: var(--border-subtle);
      margin: 2px 0 4px;
    }

    .hidden {
      display: none !important;
    }

    .results-summary.empty {
      color: var(--text-muted);
    }

    @keyframes fadeUp {
      from {
        opacity: 0;
        transform: translateY(6px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeSlideIn {
      from {
        opacity: 0;
        transform: translateY(8px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .results-error {
      border-color: var(--error) !important;
      color: #7f1d1d !important;
      background: rgba(185, 28, 28, 0.08) !important;
    }

    #results-body {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .result-heading {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-main);
      letter-spacing: -0.01em;
      margin: 16px 0 6px;
      padding: 12px 14px;
      background: rgba(15, 23, 42, 0.02);
      border: 1px solid rgba(12, 17, 32, 0.08);
      border-radius: 12px;
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.05);
    }

    .result-section + .result-heading {
      margin-top: -8px;
    }

    .result-heading:first-of-type {
      margin-top: 8px;
    }

    .result-subline {
      font-size: 12px;
      color: rgba(63, 69, 82, 0.78);
      line-height: 1.5;
      margin: 4px 0 10px;
      padding: 0 4px;
    }

    .result-paragraph {
      margin: 0 0 10px;
    }

    .result-list {
      margin: 4px 0 16px;
      padding-left: 18px;
    }

    .result-list li {
      margin-bottom: 8px;
      line-height: 1.6;
    }

    .rewrite-label {
      font-weight: 600;
      color: var(--text-soft);
      margin: 4px 0 2px;
    }

    .rewrite-text {
      margin: 0 0 6px;
      padding-left: 8px;
      color: var(--text-main);
    }

    .empty-hint {
      font-size: 12px;
      color: rgba(156, 163, 175, 0.85);
      margin-top: 6px;
    }

    #results-body:not(.empty) + .empty-hint {
      display: none;
    }

    .rewrite-enhancement-note {
      margin-top: 8px;
      font-size: 0.85rem;
      opacity: 0.95;
      font-style: normal;
      border-left: 3px solid var(--accent);
      padding: 8px 10px;
      color: var(--text-soft);
      line-height: 1.5;
      background: transparent;
    }

    .results-body-better-flash .rewrite-column.right {
      filter: contrast(1.05);
      transition: filter 0.2s ease;
    }

    .results-body-better-flash .rewrite-column:not(.right) {
      opacity: 0.82;
      transition: opacity 0.2s ease;
    }

    @media (prefers-reduced-motion: reduce) {
      .report-view,
      .report-view.report-view--reveal {
        transition: none;
        transform: none;
        opacity: 1;
      }

      .results-header-divider,
      .results-header-divider.accent-line-reset {
        transition: none;
        transform: none;
      }

      .score-badge {
        transition: none;
      }

      .score-badge.score-badge--glow {
        background-color: var(--score-pill-bg);
      }
    }

    .copy-button {
      border-radius: 10px;
      border: 1px solid var(--border-subtle);
      background: rgba(255, 255, 255, 0.85);
      color: var(--text-soft);
      font-size: 13px;
      padding: 7px 10px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      text-decoration: none;
      transition: color 0.15s ease, box-shadow 0.15s ease, border-color 0.15s ease;
      box-shadow: 0 10px 22px rgba(15, 23, 42, 0.06);
    }

    .copy-button:hover {
      color: var(--text-main);
      border-color: var(--border-strong);
      box-shadow: 0 12px 26px rgba(15, 23, 42, 0.08);
    }

    .export-button {
      border-radius: 10px;
      border: 1px solid var(--border-subtle);
      background: rgba(255, 255, 255, 0.85);
      color: var(--text-soft);
      font-size: 13px;
      padding: 7px 10px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      text-decoration: none;
      transition: color 0.15s ease, box-shadow 0.15s ease, border-color 0.15s ease;
      box-shadow: 0 10px 22px rgba(15, 23, 42, 0.06);
    }

    .export-button:hover {
      color: var(--text-main);
      border-color: var(--border-strong);
      box-shadow: 0 12px 26px rgba(15, 23, 42, 0.08);
    }

    /* Rewrite blocks and section separators */

    .rewrite-block {
      margin-top: 12px;
      padding-top: 10px;
    }

    .rewrite-columns {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
      align-items: start;
    }

    .rewrite-column {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .rewrite-column.right {
      border-left: 1px solid var(--border-subtle);
      padding-left: 12px;
    }

    @media (max-width: 720px) {
      .rewrite-columns {
        grid-template-columns: 1fr;
      }
      .rewrite-column.right {
        border-left: none;
        padding-left: 0;
      }
    }

    /* line only between successive rewrite blocks */
    .rewrite-block + .rewrite-block {
      border-top: 1px solid var(--border-subtle);
    }

    .result-section {
      border-top: 1px solid var(--border-subtle);
      padding-top: 12px;
      margin-top: 12px;
    }

    .next-steps-heading {
      border-top: 1px solid var(--border-subtle);
      padding-top: 12px;
      margin-top: 12px;
    }

    .result-subline {
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 10px;
      line-height: 1.5;
    }

    .rewrite-cluster-heading {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-main);
      margin: 14px 0 6px;
      letter-spacing: -0.01em;
    }

    /* Creator line and footer */

    .creator-section {
      text-align: center;
      color: var(--text-muted);
      font-size: 11px;
      opacity: 0.7;
      margin-top: 16px;
      margin-bottom: 6px;
    }

    .footer {
      margin-top: 4px;
      padding-top: 0;
      border-top: none;
      text-align: center;
      color: var(--text-muted);
      font-size: 11px;
      line-height: 1.55;
    }

    .footer strong {
      color: var(--text-soft);
      font-weight: 600;
    }

    textarea:focus-visible {
      outline: none;
      border-color: rgba(15, 23, 42, 0.28);
      box-shadow:
        0 14px 30px rgba(15, 23, 42, 0.14),
        inset 0 0 0 1px rgba(15, 23, 42, 0.28);
    }

    .mode-button:focus-visible,
    .run-button:focus-visible,
    .copy-button:focus-visible {
      outline: 2px solid rgba(15, 23, 42, 0.6);
      outline-offset: 2px;
    }

    /* Ghost overlay for textarea */

    .input-wrapper {
      position: relative;
      max-height: 440px;
      overflow-y: auto;
      overscroll-behavior: contain;
    }

    .resume-input-container {
      overflow: hidden;
      border-radius: 18px;
      border: 1px solid rgba(12, 17, 32, 0.08);
      background: rgba(15, 23, 42, 0.015);
      padding: 24px 18px;
      box-shadow: 0 14px 32px rgba(15, 23, 42, 0.06);
    }

    @media (max-width: 600px) {
      .input-wrapper {
        max-height: 540px;
      }
    }

    .resume-hint-overlay {
      position: absolute;
      inset: 14px 16px auto 16px;
      pointer-events: none;
      font-size: 13px;
      line-height: 1.5;
      color: var(--text-soft);
      background: var(--surface-tint);
      padding: 10px 12px 10px;
      border-radius: 12px;
      border: 1px solid var(--border-subtle);
      box-shadow: 0 12px 26px rgba(0, 0, 0, 0.08);
      opacity: 1;
      transform: translateY(0);
      transition: opacity 0.18s ease-out, transform 0.18s ease-out;
    }

    .resume-hint-title {
      font-weight: 600;
      color: var(--text-main);
      margin-bottom: 4px;
      letter-spacing: -0.01em;
    }

    .resume-hint-body {
      font-size: 12px;
      color: rgba(156, 163, 175, 0.92);
    }

    .resume-hint-overlay.hidden {
      opacity: 0;
      transform: translateY(4px);
    }
    .status-bar {
      margin-top: 6px;
      font-size: 13px;
      opacity: 0.95;
      min-height: 1.2em;
      color: var(--text-muted);
    }

    .status-bar.status-info {
      color: var(--text-soft);
    }

    .status-bar.status-error {
      color: var(--error);
    }

    /* Achievement ideas (inline + modal) */
    .ideas-inline {
      margin-top: 14px;
      margin-bottom: 14px;
      background: rgba(15, 23, 42, 0.02);
      border: 1px solid rgba(12, 17, 32, 0.08);
      border-radius: 14px;
      padding: 14px 16px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      box-shadow: 0 10px 24px rgba(15, 23, 42, 0.06);
    }

    .ideas-inline.hidden {
      display: none;
    }

    .ideas-inline .ideas-text {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .ideas-actions {
      display: flex;
      gap: 6px;
      align-items: center;
    }

    .ideas-kicker {
      font-size: 15px;
      font-weight: 700;
      color: #0b1224;
      letter-spacing: -0.01em;
      margin-bottom: 2px;
    }

    .ideas-subtitle {
      font-weight: 400;
      font-size: 12px;
      color: var(--text-soft);
      max-width: 360px;
    }

    .ideas-open-link {
      background: transparent;
      border: none;
      color: var(--accent-boost);
      font-size: 12px;
      padding: 0;
      cursor: pointer;
      text-decoration: none;
      align-self: flex-start;
    }

    .ideas-open-link:hover {
      text-decoration: underline;
      text-decoration-thickness: 1px;
      text-underline-offset: 2px;
    }

    .ideas-modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 100;
      opacity: 0;
      transform: translateY(6px);
      transition: opacity 0.18s ease, transform 0.2s ease;
    }

    .ideas-modal.visible {
      display: flex;
      opacity: 1;
      transform: translateY(0);
    }

    .ideas-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(15, 23, 42, 0.2);
      backdrop-filter: blur(2px);
      opacity: 0;
      transition: opacity 0.18s ease;
    }

    .ideas-modal.visible .ideas-backdrop {
      opacity: 1;
    }

    .ideas-sheet {
      position: relative;
      z-index: 1;
      width: min(720px, 92vw);
      max-height: 85vh;
      background: #ffffff;
      border: 1px solid var(--border-subtle);
      border-radius: 16px;
      box-shadow: 0 24px 60px rgba(0, 0, 0, 0.16);
      padding: 16px 18px 18px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.22s ease, transform 0.22s ease;
    }

    .ideas-modal.visible .ideas-sheet {
      opacity: 1;
      transform: translateY(0);
    }

    .ideas-sheet-header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 4px;
    }

    .ideas-sheet-title {
      font-size: 20px;
      font-weight: 800;
      color: var(--text-main);
      letter-spacing: -0.02em;
      margin-bottom: 6px;
    }

    .ideas-sheet-subtitle {
      font-size: 13px;
      color: var(--text-soft);
      line-height: 1.6;
      margin-bottom: 10px;
    }

    .ideas-sheet-body {
      overflow-y: auto;
      padding: 2px 2px 6px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .ghost-button {
      background: var(--surface-tint);
      color: var(--text-main);
      border: 1px solid var(--border-subtle);
      padding: 7px 12px;
      border-radius: 10px;
      font-size: 12px;
      cursor: pointer;
      transition: border-color 0.12s ease, background 0.12s ease;
      align-self: flex-start;
    }

    .ghost-button:hover {
      border-color: var(--border-strong);
      background: var(--surface-tint);
    }

    .ghost-button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .sample-resume-button {
      background: var(--surface-tint);
      color: var(--text-main);
      border: 1px solid var(--border-subtle);
      padding: 6px 12px;
      border-radius: 10px;
      font-size: 13px;
      cursor: pointer;
      transition: border-color 0.12s ease, background 0.12s ease;
      align-self: flex-start;
      margin: 6px 0 10px;
      box-shadow: 0 6px 14px rgba(15, 23, 42, 0.04);
    }

    .sample-resume-button:hover {
      border-color: var(--border-strong);
      background: var(--surface-tint);
    }

    .data-handling-row {
      margin-top: 4px;
    }

    .data-handling-link {
      font-size: 11px;
      padding: 4px 8px;
    }

    .data-handling-panel {
      margin-top: 6px;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid var(--border-subtle);
      background: #ffffff;
      box-shadow: inset 0 1px 0 rgba(15, 23, 42, 0.02);
      font-size: 11px;
      color: var(--text-soft);
    }

    .data-handling-title {
      font-weight: 600;
      color: var(--text-main);
      margin-bottom: 4px;
      letter-spacing: -0.01em;
      font-size: 12px;
    }

    .data-handling-text {
      margin: 0 0 4px;
      line-height: 1.5;
    }

    .data-handling-text:last-child {
      margin-bottom: 0;
    }

    .ideas-loading-bar {
      height: 2px;
      width: 100%;
      background: linear-gradient(90deg, var(--accent-strong), var(--accent-boost), var(--accent-strong));
      background-size: 200% 100%;
      opacity: 0;
      transform: scaleX(0.8);
      transform-origin: center;
      margin-top: 6px;
      border-radius: 999px;
      height: 1.5px;
    }

    .ideas-status {
      font-size: 12px;
      color: rgba(148, 163, 184, 0.9);
      margin-top: 6px;
      min-height: 16px;
    }

    .ideas-status.error {
      color: #fca5a5;
    }

    .ideas-body {
      margin-top: 4px;
      font-size: 13px;
      line-height: 1.6;
      color: var(--text-main);
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .ideas-body.empty {
      color: var(--text-muted);
      border: 1px dashed var(--border-subtle);
      border-radius: 12px;
      padding: 12px 14px;
    }

    .ideas-section-card {
      background: rgba(15, 23, 42, 0.02);
      border: 1px solid rgba(12, 17, 32, 0.08);
      box-shadow: 0 10px 24px rgba(15, 23, 42, 0.06);
      border-radius: 14px;
      padding: 14px 16px;
    }

    .ideas-section-title {
      font-size: 15px;
      font-weight: 600;
      color: var(--text-main);
      letter-spacing: -0.01em;
      margin: 0 0 8px;
    }

    .ideas-section-subline {
      margin: 0 0 10px;
      color: var(--text-soft);
      font-size: 13px;
      line-height: 1.5;
    }

    .ideas-section-card p {
      margin: 0;
      color: var(--text-main);
      line-height: 1.6;
    }

    .ideas-list {
      margin: 0;
      padding-left: 22px;
    }

    .ideas-list li {
      margin-bottom: 7px;
      line-height: 1.6;
      color: var(--text-main);
    }

    .ideas-how {
      margin-top: 0;
      font-weight: 600;
      font-size: 13px;
      line-height: 1.5;
      color: var(--text-main);
    }

    .ideas-sublist {
      margin-top: 6px;
      padding-left: 16px;
      color: rgba(63, 69, 82, 0.85);
      font-size: 12px;
      line-height: 1.5;
    }

    .ideas-divider {
      border-top: 1px solid var(--border-subtle);
      margin: 12px 0 8px;
      padding-top: 0;
    }

    .ideas-actions .ghost-button {
      border-radius: 10px;
      padding: 7px 12px;
      box-shadow: 0 8px 16px rgba(15, 23, 42, 0.06);
    }

  </style>
</head>

<body>
  <div class="page">
    <div class="page-inner">
      <header class="top-bar">
        <div class="brand">
          <div class="brand-wordmark">Recruiter in Your Pocket</div>
        </div>
        <div class="version-pill">
          <span class="status-dot"></span>
          <span>We don’t store your resume</span>
        </div>
      </header>

      <div id="loading-bar"></div>

      <section class="hero">
        <h1 class="hero-title">Recruiter-grade resume feedback in under a minute.</h1>
        <p class="hero-subtitle">Paste your resume to get a crafted, honest read on how your story lands, plus stronger bullets and clear next steps.</p>

        <div class="hero-grid">
          <div class="hero-pill">
            <span>1</span><span>Drop your resume in</span>
          </div>
          <div class="hero-pill">
            <span>2</span><span>Get actionable, clear feedback</span>
          </div>
          <div class="hero-pill">
            <span>3</span><span>Give yourself the inside edge</span>
          </div>
        </div>

        <p class="hero-cred">
          No signup. No fluff. Just a clear read on your story.
        </p>

        <div class="proof-editorial" aria-label="Testimonials from users">
          <div class="proof-editorial-heading">What early users say</div>
          <div class="proof-editorial-quote">“Honestly, I thought my resume was fine, but this showed me what actually mattered and what I could finally cut.”</div>
          <div class="proof-editorial-quote">“It connected my past roles into a story I didn’t even realize I was trying to tell.”</div>
          <div class="proof-editorial-quote">“I never understood why some bullets felt off until this explained it in a way that finally clicked.”</div>
          <div class="proof-editorial-quote">“It finally made me stop rewriting my resume at midnight every week.”</div>
        </div>
      </section>

      <main class="tool-layout">
        <!-- Left column -->
        <section class="card card-input" aria-label="Input panel">
          <div class="card-inner">
            <div class="card-header">
              <h2 class="card-title">Your resume</h2>
            </div>

            <label for="main-input" id="input-label">
              Paste your full resume, or use the sample to see how it works.
            </label>

            <button id="sample-resume-button" type="button" class="sample-resume-button">Try a sample resume →</button>

            <div class="input-wrapper resume-input-container resume-input-shell">
              <textarea
                id="main-input"
                placeholder="Paste your full resume, including work history, skills, and education."
              ></textarea>

              <div id="resume-hint" class="resume-hint-overlay">
                <div class="resume-hint-title">Paste your full resume or try the sample</div>
                <div class="resume-hint-body">
                  I’ll read it like a recruiter and highlight what’s clear, what’s hidden, and where phrasing can be sharper.
                </div>
              </div>
            </div>

            <div class="input-meta-row">
              <div>Start with your resume or the sample. Your text stays in this browser until you click Get feedback.</div>
              <div id="saved-indicator" class="saved-indicator">Saved</div>
            </div>

            <div class="data-handling-row">
              <button id="data-handling-link" type="button" class="ghost-button data-handling-link">
                How your data is handled
              </button>
            </div>

            <div id="data-handling-panel" class="data-handling-panel hidden" aria-live="polite">
              <div class="data-handling-title">How your data is handled</div>
              <p class="data-handling-text">
                Your resume lives only in this browser until you click <strong>Get feedback</strong>.
              </p>
              <p class="data-handling-text">
                When you run a review, we send your text securely to our backend so the model can read it and generate feedback.
              </p>
              <p class="data-handling-text">
                We do not store your resume text or use it to train models.
              </p>
            </div>

            <div class="run-row">
              <button id="run-button" class="run-button">Get feedback</button>
              <div id="status" class="status" aria-live="polite" role="status"></div>
            </div>
          </div>
        </section>

        <!-- Right column -->
        <section class="card card-output" aria-label="Results panel">
          <div class="card-inner report-view" id="report-view">
          <div class="results-top">
              <div class="score-header-inside">
                <div id="score-wrapper" class="score-wrapper hidden">
                  <div
                    id="score-badge"
                    class="score-badge"
                    tabindex="0"
                    aria-describedby="score-tooltip"
                  ></div>
                  <div id="score-tooltip" class="score-tooltip" role="tooltip"></div>
                </div>
              </div>
              <div class="results-header-row">
                <h2 id="results-title" class="card-title">Recruiter feedback</h2>
                <div class="focus-controls">
                  <button id="focus-toggle" class="focus-button hidden" type="button">Focus on report</button>
                </div>
              </div>
              <div class="results-bridge">
                <div class="bridge-heading">What this means</div>
                <div id="results-subtitle">
                  This number reflects how clearly your story reads in a quick scan. Below, you’ll see the strengths that already stand out, the details that get lost, and the simple edits that will make your impact easier to see.
                </div>
              </div>
              <div class="results-header-divider"></div>
              <div id="results-summary" class="results-summary empty">
                Your recruiter’s take will appear here.
              </div>
              <div id="status-bar" class="status-bar"></div>
            </div>

            <div id="results-skeleton" class="results-skeleton hidden" aria-hidden="true">
              <div class="skeleton-line wide"></div>
              <div class="skeleton-line"></div>
              <div class="skeleton-line"></div>
              <div class="skeleton-divider"></div>
              <div class="skeleton-line wide"></div>
              <div class="skeleton-line mid"></div>
              <div class="skeleton-line short"></div>
            </div>

            <div
              id="results-body"
              class="empty"
              role="region"
              aria-label="Resume feedback results"
            >
              <div class="result-heading">What’s working</div>
              <div class="result-subline">Strengths that show up clearly.</div>

              <div class="result-heading">What’s harder to see</div>
              <div class="result-subline">Parts of your impact that don’t come through as strongly.</div>

              <div class="result-heading">Stronger phrasing you can use</div>
              <div class="result-subline">Clearer versions of a few bullets.</div>

              <div class="result-heading">Next steps</div>
              <div class="result-subline">Simple fixes you can make this week.</div>
            </div>

            <div id="results-actions-bottom" class="results-actions results-actions-bottom hidden">
              <button id="export-button" class="export-button" aria-label="Export PDF">
                ⬇ <span>Export PDF</span>
              </button>
              <button id="copy-button" class="copy-button" aria-label="Copy results">
                ⧉ <span>Copy</span>
              </button>
            </div>

            <div id="ideas-inline" class="ideas-inline hidden" aria-label="Missing wins">
              <div class="ideas-text">
                <div class="ideas-kicker">Missing wins</div>
                <div class="ideas-subtitle">Let’s look for wins you have not written yet or forgot about.</div>
              </div>
              <button id="ideas-open" class="ideas-open-link" type="button">Open missing wins →</button>
            </div>

            <div id="ideas-modal" class="ideas-modal" aria-hidden="true">
              <div id="ideas-backdrop" class="ideas-backdrop"></div>
              <div class="ideas-sheet" role="dialog" aria-modal="true" aria-labelledby="ideas-modal-title">
                <div class="ideas-sheet-header">
                  <div>
                    <div id="ideas-modal-title" class="ideas-sheet-title">Missing wins</div>
                    <div class="ideas-sheet-subtitle">Let’s look for wins you have not written yet or forgot about.</div>
                  </div>
                  <div class="ideas-actions">
                    <button id="ideas-refresh" class="ghost-button" type="button">Refresh</button>
                    <button id="ideas-close" class="ghost-button" type="button" aria-label="Close missing wins">Close</button>
                  </div>
                </div>
                <div id="ideas-loading-bar" class="ideas-loading-bar"></div>
                <div id="ideas-status" class="ideas-status" aria-live="polite"></div>
                <div class="ideas-sheet-body">
                  <div id="ideas-body" class="ideas-body empty" aria-live="polite">
                    I’ll look for wins you have not written yet or forgot about.
                  </div>
                </div>
              </div>
            </div>

          </div>
        </section>
      </main>

      <div id="paywall-backdrop" class="paywall-backdrop" role="dialog" aria-modal="true" aria-labelledby="paywall-title">
        <div class="paywall-card">
          <div class="paywall-title" id="paywall-title">Keep using Resume Studio</div>
          <div class="paywall-subtitle">
            Get unlimited runs and full access to your personalized recruiter report.
          </div>
          <ul class="paywall-list">
            <li>Unlimited resume runs on this browser.</li>
            <li>Access to your full score, summary, and insight stack whenever you need it.</li>
            <li>Future saved reports as they ship.</li>
          </ul>
          <div class="paywall-actions">
            <button id="paywall-upgrade" class="paywall-primary" type="button">Upgrade and keep going</button>
            <button id="paywall-close" class="paywall-secondary" type="button">Not now</button>
          </div>
          <div id="paywall-status" class="paywall-subtitle" aria-live="polite"></div>
        </div>
      </div>

      <div class="creator-section">
        Made with care in Boulder, CO 🤍
      </div>

      <footer class="footer">
        We never store your resume or use it to train models.
      </footer>
    </div>
  </div>

  <script>
  const STORAGE_KEY = "rip-main-input-v1";

  const inputEl = document.getElementById("main-input");
  const inputLabelEl = document.getElementById("input-label");
  const modeButtons = document.querySelectorAll(".mode-button");
  const runButton = document.getElementById("run-button");
  const statusEl = document.getElementById("status");
  const resultsTitleEl = document.getElementById("results-title");
  const resultsSubtitleEl = document.getElementById("results-subtitle");
  const resultsSummaryEl = document.getElementById("results-summary");
  const resultsBodyEl = document.getElementById("results-body");
  const resultsSkeletonEl = document.getElementById("results-skeleton");
  const reportViewEl = document.getElementById("report-view");
  const resultsHeaderDividerEl = document.querySelector(".results-header-divider");
  const modePillEl = document.getElementById("mode-pill");
  const scoreWrapperEl = document.getElementById("score-wrapper");
  const scoreBandsTriggerEl = document.getElementById("score-bands-trigger");
  const scoreBadgeEl = document.getElementById("score-badge");
  const scoreLabelEl = document.getElementById("score-label");
  const scoreShortEl = document.getElementById("score-short");
  const scoreTooltipEl = document.getElementById("score-tooltip");
  const copyButtonEl = document.getElementById("copy-button");
  const exportButtonEl = document.getElementById("export-button");
  const resultsActionsBottomEl = document.getElementById("results-actions-bottom");
  const dataHandlingLinkEl = document.getElementById("data-handling-link");
  const dataHandlingPanelEl = document.getElementById("data-handling-panel");
  const textareaEl = document.getElementById("main-input");
  const savedIndicatorEl = document.getElementById("saved-indicator");
  const modeIndicatorEl = document.getElementById("mode-indicator");
  const loadingBarEl = document.getElementById("loading-bar");
  const resumeHintEl = document.getElementById("resume-hint");
  const sampleResumeButtonEl = document.getElementById("sample-resume-button");
  const ideasInlineEl = document.getElementById("ideas-inline");
  const ideasOpenEl = document.getElementById("ideas-open");
  const ideasModalEl = document.getElementById("ideas-modal");
  const ideasBackdropEl = document.getElementById("ideas-backdrop");
  const ideasRefreshEl = document.getElementById("ideas-refresh");
  const ideasCloseEl = document.getElementById("ideas-close");
  const ideasBodyEl = document.getElementById("ideas-body");
  const ideasLoadingBarEl = document.getElementById("ideas-loading-bar");
  const ideasStatusEl = document.getElementById("ideas-status");
  const focusToggleEl = document.getElementById("focus-toggle");
  const prefersReducedMotionQuery = window.matchMedia
    ? window.matchMedia("(prefers-reduced-motion: reduce)")
    : null;
  let focusMode = false;
  let hasReportContent = false;

  function setFocusMode(enabled) {
    focusMode = Boolean(enabled);
    document.body.classList.toggle("focus-mode", focusMode);
    if (focusToggleEl) {
      focusToggleEl.classList.toggle("hidden", !hasReportContent);
      focusToggleEl.textContent = focusMode ? "Back to editor" : "Focus on report";
    }
  }
  const paywallBackdropEl = document.getElementById("paywall-backdrop");
  const paywallUpgradeEl = document.getElementById("paywall-upgrade");
  const paywallCloseEl = document.getElementById("paywall-close");
  const paywallStatusEl = document.getElementById("paywall-status");

  let currentMode = "resume";
  let saveTimeout = null;
  let originalButtonText = runButton.textContent;
  let ideasInFlight = false;
  let currentScoreMeta = null;
  let lastScoreValue = null;
  let scoreBandsPinned = false;
  let scoreBandsHovering = false;
  let isSampleRun = false;

  const FREE_RUN_LIMIT = 2;
  const RUN_COUNT_KEY = "rip-free-runs-v1";
  const PAID_KEY = "rip-paid-v1";

  function getRunCount() {
    const raw = localStorage.getItem(RUN_COUNT_KEY);
    const n = Number(raw);
    return Number.isFinite(n) && n >= 0 ? n : 0;
  }

  function incrementRunCount() {
    const next = getRunCount() + 1;
    localStorage.setItem(RUN_COUNT_KEY, String(next));
    return next;
  }

  function isPaid() {
    return localStorage.getItem(PAID_KEY) === "1";
  }

  function markPaid() {
    localStorage.setItem(PAID_KEY, "1");
  }

  function showPaywall(msg = "") {
    if (paywallBackdropEl) {
      paywallBackdropEl.style.display = "flex";
    }
    if (paywallStatusEl) {
      paywallStatusEl.textContent = msg || "";
    }
  }

  function hidePaywall() {
    if (paywallBackdropEl) {
      paywallBackdropEl.style.display = "none";
    }
    if (paywallStatusEl) {
      paywallStatusEl.textContent = "";
    }
  }

  function prefersReducedMotion() {
    return !!(prefersReducedMotionQuery && prefersReducedMotionQuery.matches);
  }

  (function handleCheckoutParams() {
    const params = new URLSearchParams(window.location.search);
    const status = params.get("checkout");
    if (status === "success") {
      markPaid();
      const clean = window.location.pathname + window.location.hash;
      if (window.history && window.history.replaceState) {
        window.history.replaceState({}, document.title, clean);
      }
    }
    if (status === "cancelled") {
      const clean = window.location.pathname + window.location.hash;
      if (window.history && window.history.replaceState) {
        window.history.replaceState({}, document.title, clean);
      }
    }
  })();

  function autoResizeTextarea() {
    const maxHeight = 340;
    inputEl.style.height = "auto";
    const next = Math.min(inputEl.scrollHeight, maxHeight);
    inputEl.style.height = next + "px";
  }

  function showSavedIndicator() {
    if (!savedIndicatorEl) return;
    savedIndicatorEl.classList.add("visible");
    if (saveTimeout) clearTimeout(saveTimeout);
    saveTimeout = setTimeout(() => {
      savedIndicatorEl.classList.remove("visible");
    }, 1200);
  }

  function loadSavedInput() {
    try {
      const saved = localStorage.getItem(STORAGE_KEY);
      if (saved) {
        inputEl.value = saved;
        autoResizeTextarea();
        showSavedIndicator();
      }
    } catch (e) {
      console.warn("Could not load saved input", e);
    }
  }

  function updateResumeHintVisibility() {
    if (!resumeHintEl) return;
    const hasText = inputEl.value.trim().length > 0;
    const isFocused = document.activeElement === inputEl;

    if (hasText || isFocused) {
      resumeHintEl.classList.add("hidden");
    } else {
      resumeHintEl.classList.remove("hidden");
    }
  }

  inputEl.addEventListener("input", () => {
    autoResizeTextarea();
    try {
      localStorage.setItem(STORAGE_KEY, inputEl.value);
    } catch (e) {
      console.warn("Could not save input", e);
    }
    showSavedIndicator();
    updateResumeHintVisibility();
    if (!inputEl.value.trim()) {
      resetIdeasSection();
      if (ideasInlineEl) ideasInlineEl.classList.add("hidden");
      closeIdeasModal();
    }
  });

  inputEl.addEventListener("focus", updateResumeHintVisibility);
  inputEl.addEventListener("blur", updateResumeHintVisibility);

  function positionModeIndicator() {
    const activeBtn = document.querySelector(".mode-button.active");
    if (!activeBtn || !modeIndicatorEl) return;
    const left = activeBtn.offsetLeft;
    const width = activeBtn.offsetWidth;
    modeIndicatorEl.style.width = width + "px";
    modeIndicatorEl.style.transform = "translateX(" + left + "px)";
  }

  window.addEventListener("resize", positionModeIndicator);

  function clearScoreBadge() {
    scoreBadgeEl.textContent = "";
    scoreBadgeEl.className = "score-badge";
    scoreBadgeEl.removeAttribute("aria-label");
    if (scoreLabelEl) scoreLabelEl.textContent = "";
    if (scoreShortEl) scoreShortEl.textContent = "";
    if (scoreTooltipEl) {
      scoreTooltipEl.textContent = "";
      scoreTooltipEl.classList.remove("open");
      scoreTooltipEl.setAttribute("aria-hidden", "true");
    }
    if (scoreWrapperEl) scoreWrapperEl.classList.add("hidden");
    if (scoreBandsTriggerEl) scoreBandsTriggerEl.style.display = "none";
    if (resultsActionsBottomEl) resultsActionsBottomEl.classList.add("hidden");
    currentScoreMeta = null;
    lastScoreValue = null;
    scoreBandsPinned = false;
    scoreBandsHovering = false;
    if (scoreBandsTriggerEl) scoreBandsTriggerEl.setAttribute("aria-expanded", "false");
  }

  const SCORE_BANDS = [
    {
      id: "not_ready",
      min: 60,
      max: 69,
      label: "Not ready",
      description: "Story is hard to follow. Sections blur together and impact is mostly missing."
    },
    {
      id: "thin_signal",
      min: 70,
      max: 77,
      label: "Thin signal",
      description: "Some good pieces, but the signal is faint. Bullets are vague or light on impact."
    },
    {
      id: "strong_foundation",
      min: 78,
      max: 84,
      label: "Strong foundation",
      description: "Core story is clear. Real wins are present, but not every bullet carries weight."
    },
    {
      id: "high_bar",
      min: 85,
      max: 91,
      label: "High bar",
      description: "Ownership, scope, and results are consistently clear with very little noise."
    },
    {
      id: "rare_air",
      min: 92,
      max: 100,
      label: "Rare air",
      description: "Exceptionally clear and dense signal. Every line earns its place."
    }
  ];

  function getBandIdFromScore(score) {
    const n = Number.isFinite(Number(score)) ? Math.round(Number(score)) : 0;
    const clamped = Math.min(100, Math.max(0, n));
    const match = SCORE_BANDS.find((band) => clamped >= band.min && clamped <= band.max);
    if (match) return match.id;
    if (clamped < SCORE_BANDS[0].min) return SCORE_BANDS[0].id;
    return SCORE_BANDS[SCORE_BANDS.length - 1].id;
  }

  function getScoreMeta(score) {
    const n = Number.isFinite(Number(score)) ? Math.round(Number(score)) : 0;
    const clamped = Math.min(100, Math.max(0, n));
    if (clamped >= 97) {
      return {
        score: clamped,
        label: "Rare air",
        short: "Exceptionally clear and compelling on first read. Very minor refinements only.",
        long:
          "Exceptionally clear and compelling on first read. Very minor refinements only.",
        bandId: getBandIdFromScore(clamped)
      };
    }
    if (clamped >= 92) {
      return {
        score: clamped,
        label: "Top-bar ready",
        short: "Exceptionally clear and compelling on first read. Very minor refinements only.",
        long:
          "Exceptionally clear and compelling on first read. Very minor refinements only.",
        bandId: getBandIdFromScore(clamped)
      };
    }
    if (clamped >= 85) {
      return {
        score: clamped,
        label: "High bar",
        short: "Strong clarity and signal. Only light tightening needed to make your story land even cleaner.",
        long:
          "Strong clarity and signal. Only light tightening needed to make your story land even cleaner.",
        bandId: getBandIdFromScore(clamped)
      };
    }
    if (clamped >= 78) {
      return {
        score: clamped,
        label: "Strong story",
        short: "Clear momentum and ownership with a few areas needing sharper framing or impact cues.",
        long:
          "Clear momentum and ownership with a few areas needing sharper framing or impact cues.",
        bandId: getBandIdFromScore(clamped)
      };
    }
    if (clamped >= 70) {
      return {
        score: clamped,
        label: "Solid foundation",
        short:
          "Solid elements are here, but the core story still feels muted. Tightening scope and impact will lift the clarity.",
        long:
          "Solid elements are here, but the core story still feels muted. Tightening scope and impact will lift the clarity.",
        bandId: getBandIdFromScore(clamped)
      };
    }
    if (clamped >= 60) {
      return {
        score: clamped,
        label: "Needs clarity",
        short:
          "Your story is present but not landing clearly yet. A few structural tweaks can quickly strengthen the signal.",
        long:
          "Your story is present but not landing clearly yet. A few structural tweaks can quickly strengthen the signal.",
        bandId: getBandIdFromScore(clamped)
      };
    }
    if (clamped >= 50) {
      return {
        score: clamped,
        label: "Thin signal",
        short: "Ownership and outcomes are hard to see.",
        long:
          "Rebuild top bullets with clear role, scope, and before/after changes. Add context before applying.",
        bandId: getBandIdFromScore(clamped)
      };
    }
    return {
      score: clamped,
      label: "Not ready",
      short: "Hard to see role, scope, or results.",
      long:
        "Add structure, roles, and outcomes so there is usable signal. Right now it is not review-ready.",
      bandId: getBandIdFromScore(clamped)
    };
  }

  function applyScoreColor(score) {
    clearScoreBadge();
    if (Number.isNaN(score)) return;
    let cls = "";
    if (score < 50) cls = "score-low";
    else if (score < 70) cls = "score-mid";
    else if (score < 90) cls = "score-good";
    else cls = "score-great";
    scoreBadgeEl.textContent = score + "/100";
    scoreBadgeEl.setAttribute("aria-label", `Score ${score} out of 100`);
    scoreBadgeEl.classList.add("score-visible", cls);
  }

  function renderScoreBandsPanel(scoreMeta = {}) {
    if (!scoreTooltipEl) return;
    const bandId = scoreMeta.bandId || getBandIdFromScore(scoreMeta.score);
    const bandsMarkup = SCORE_BANDS.map((band) => {
      const isActive = band.id === bandId;
      return `
        <div class="score-band-item ${isActive ? "active" : ""}">
          <div class="score-band-header">
            <span class="score-band-range">${band.min} to ${band.max}</span>
            <span class="score-band-label">· ${escapeHtml(band.label)}</span>
            ${isActive ? '<span class="score-band-chip">Your band</span>' : ""}
          </div>
          <div class="score-band-description">${escapeHtml(band.description)}</div>
        </div>
      `;
    }).join("");

    scoreTooltipEl.innerHTML = `
      <div class="score-bands-panel">
        <div class="score-bands-panel-title">How to read this score</div>
        <div class="score-bands-intro">This clarity score is powered by a calibrated model shaped by thousands of real interview cycles. Each band reflects how clearly your story lands on a first read.</div>
        <div class="score-bands-list">${bandsMarkup}</div>
      </div>
    `;
  }

  function updateScoreBandsVisibility() {
    if (!scoreTooltipEl) return;
    const isOpen = (scoreBandsPinned || scoreBandsHovering) && !!currentScoreMeta;
    scoreTooltipEl.classList.toggle("open", isOpen);
    scoreTooltipEl.setAttribute("aria-hidden", isOpen ? "false" : "true");
    if (scoreBandsTriggerEl) scoreBandsTriggerEl.setAttribute("aria-expanded", isOpen ? "true" : "false");
  }

  function triggerScoreGlow() {
    if (!scoreBadgeEl || prefersReducedMotion()) return;
    scoreBadgeEl.classList.remove("score-badge--glow");
    void scoreBadgeEl.offsetWidth;
    scoreBadgeEl.classList.add("score-badge--glow");
    setTimeout(() => {
      scoreBadgeEl.classList.remove("score-badge--glow");
    }, 60);
  }

  function toggleScoreBandsPinned() {
    if (!currentScoreMeta) return;
    scoreBandsPinned = !scoreBandsPinned;
    if (scoreBandsPinned) {
      renderScoreBandsPanel(currentScoreMeta);
    }
    updateScoreBandsVisibility();
  }

  function closeScoreBandsPanel() {
    scoreBandsPinned = false;
    scoreBandsHovering = false;
    updateScoreBandsVisibility();
  }

  function renderScoreMeta(score, modelMeta = {}) {
    const meta = getScoreMeta(score);
    const prevScoreValue = lastScoreValue;
    applyScoreColor(meta.score);
    if (scoreBadgeEl) {
      scoreBadgeEl.classList.remove("score-pill--reveal");
      void scoreBadgeEl.offsetWidth;
      scoreBadgeEl.classList.add("score-pill--reveal");
    }
    if (prevScoreValue !== meta.score) {
      triggerScoreGlow();
    }
    lastScoreValue = meta.score;

    const labelText = (modelMeta.score_label || "").trim() || meta.label;
    const shortText = (modelMeta.score_comment_short || "").trim() || meta.short;
    const longText = (modelMeta.score_comment_long || "").trim() || meta.long;
    currentScoreMeta = {
      ...meta,
      label: labelText,
      short: shortText,
      long: longText
    };
    renderScoreBandsPanel(currentScoreMeta);
    updateScoreBandsVisibility();
    if (scoreBandsTriggerEl) scoreBandsTriggerEl.style.display = "inline";
    if (scoreWrapperEl) scoreWrapperEl.classList.remove("hidden");
  }

  function extractAndApplyScore(text) {
    const match = text.match(/(\d{1,3})\s*\/\s*100/);
    if (!match) {
      clearScoreBadge();
      return;
    }
    const score = parseInt(match[1], 10);
    if (Number.isNaN(score)) {
      clearScoreBadge();
      return;
    }
    applyScoreColor(score);
  }

  function escapeHtml(str) {
    return str
      .replace(/&/g, "&amp;")
      .replace(/</g, "&lt;")
      .replace(/>/g, "&gt;");
  }

  function formatResults(text) {
    const lines = text.split("\n");
    let html = "";
    let inList = false;

    function closeList() {
      if (inList) {
        html += "</ul>";
        inList = false;
      }
    }

    for (const raw of lines) {
      const line = raw.trim();
      if (!line) {
        closeList();
        html += '<p class="result-paragraph spacer"></p>';
        continue;
      }

      const headingMatch = line.match(/^(\d+)\.\s+(.*)$/);
      const bulletMatch = line.match(/^[-*•]+\s+(.*)$/);
      const originalMatch = line.match(/^Original:\s*(.*)$/i);
      const betterMatch = line.match(/^Better:\s*(.*)$/i);

      if (headingMatch) {
        closeList();
        html += `<div class="result-heading">${escapeHtml(headingMatch[2])}</div>`;
      } else if (originalMatch) {
        closeList();
        html += `<div class="rewrite-label">Original:</div>`;
        if (originalMatch[1]) {
          html += `<div class="rewrite-text">${escapeHtml(originalMatch[1])}</div>`;
        }
      } else if (betterMatch) {
        closeList();
        html += `<div class="rewrite-label">Better:</div>`;
        if (betterMatch[1]) {
          html += `<div class="rewrite-text">${escapeHtml(betterMatch[1])}</div>`;
        }
      } else if (bulletMatch) {
        if (!inList) {
          html += '<ul class="result-list">';
          inList = true;
        }
        html += `<li>${escapeHtml(bulletMatch[1])}</li>`;
      } else {
        closeList();
        html += `<p class="result-paragraph">${escapeHtml(line)}</p>`;
      }
    }

    closeList();
    return html;
  }

  function renderSummary(text) {
    if (!resultsSummaryEl) return;
    const clean = (text || "").trim();
    if (clean) {
      const sentences = clean
        .split(/(?<=[.!?])\s+/)
        .map((s) => s.trim())
        .filter(Boolean);
      const limited = sentences.slice(0, 3);
      const paragraph = limited.join(" ");
      resultsSummaryEl.innerHTML = `
        <div class="result-heading" style="padding:12px 14px;border-top:none;margin-top:0;">How your resume reads</div>
        <div class="result-subline">A quick read on how your resume actually lands.</div>
        <p class="result-paragraph">${escapeHtml(paragraph || clean)}</p>
      `;
      resultsSummaryEl.classList.remove("empty");
    } else {
      resultsSummaryEl.innerHTML = `
        <div class="result-heading" style="padding:12px 14px;border-top:none;margin-top:0;">How your resume reads</div>
        <div class="result-subline">A quick read on how your resume actually lands.</div>
        <p class="result-paragraph">Your summary will appear here.</p>
      `;
      resultsSummaryEl.classList.add("empty");
    }
  }

  function triggerReportReveal() {
    if (!reportViewEl) return;
    reportViewEl.classList.add("report-view--reveal");
    void reportViewEl.offsetWidth;
    reportViewEl.classList.remove("report-view--reveal");
  }

  function triggerAccentLineDraw() {
    if (!resultsHeaderDividerEl) return;
    resultsHeaderDividerEl.classList.add("accent-line-reset");
    void resultsHeaderDividerEl.offsetWidth;
    resultsHeaderDividerEl.classList.remove("accent-line-reset");
  }

  function renderStructuredResults(data) {
    const {
      summary,
      strengths,
      gaps,
      rewrites,
      next_steps: nextSteps,
      score,
      score_label: scoreLabelText,
      score_comment_short: scoreCommentShort,
      score_comment_long: scoreCommentLong,
      suggested_bullets: suggestedBullets,
      missing_wins: missingWins
    } = data || {};
    hasReportContent = true;

    let html = "";

    // score pill and commentary
    if (typeof score === "number") {
      renderScoreMeta(score, {
        score_label: scoreLabelText,
        score_comment_short: scoreCommentShort,
        score_comment_long: scoreCommentLong
      });
    } else {
      clearScoreBadge();
    }

    if (Array.isArray(missingWins) && missingWins.length > 0 && ideasInlineEl) {
      ideasInlineEl.classList.remove("hidden");
    }

    renderSummary(summary);

    // What's Working
    if (Array.isArray(strengths) && strengths.length > 0) {
      html += `<div class="result-heading result-section">What’s working</div>`;
      html += `<div class="result-subline">Strengths that show up clearly.</div>`;
      html += `<ul class="result-list">`;
      for (const item of strengths) {
        if (!item) continue;
        html += `<li>${escapeHtml(String(item))}</li>`;
      }
      html += `</ul>`;
    }

    // What’s harder to see
    if (Array.isArray(gaps) && gaps.length > 0) {
      html += `<div class="result-heading result-section">What’s harder to see</div>`;
      html += `<div class="result-subline">Parts of your impact that don’t come through as strongly.</div>`;
      html += `<ul class="result-list">`;
      for (const item of gaps) {
        if (!item) continue;
        html += `<li>${escapeHtml(String(item))}</li>`;
      }
      html += `</ul>`;
    }

    // Stronger Phrasing You Can Use
    if (Array.isArray(rewrites) && rewrites.length > 0) {
      const clarityGroup = [];
      const impactGroup = [];
      const fallbackGroup = [];

      for (const r of rewrites) {
        if (!r) continue;
        const label = (r.label || "").toLowerCase();
        if (label.includes("clarity") || label.includes("concise") || label.includes("conciseness") || label.includes("brevity") || label.includes("phrasing")) {
          clarityGroup.push(r);
        } else if (label.includes("impact") || label.includes("scope") || label.includes("ownership")) {
          impactGroup.push(r);
        } else {
          fallbackGroup.push(r);
        }
      }

      while (fallbackGroup.length) {
        const target = clarityGroup.length <= impactGroup.length ? clarityGroup : impactGroup;
        target.push(fallbackGroup.shift());
      }

      const renderRewriteGroup = (groupItems) => {
        let groupHtml = "";
        for (const r of groupItems) {
          if (!r) continue;
          const original = r.original || "";
          const better = r.better || "";
          const enhancementNote = r.enhancement_note || r.enhancementNote || "";

          groupHtml += `<div class="rewrite-block">`;
          groupHtml += `<div class="rewrite-columns">`;

          groupHtml += `<div class="rewrite-column">`;
          if (original) {
            groupHtml += `<div class="rewrite-label">Original</div>`;
            groupHtml += `<div class="rewrite-text">${escapeHtml(String(original))}</div>`;
          }
          groupHtml += `</div>`;

          groupHtml += `<div class="rewrite-column right">`;
          if (better) {
            groupHtml += `<div class="rewrite-label">Better</div>`;
            groupHtml += `<div class="rewrite-text">${escapeHtml(String(better))}</div>`;
          }
          groupHtml += `</div>`;

          groupHtml += `</div>`;

          if (enhancementNote) {
            groupHtml += `<div class="rewrite-enhancement-note">${escapeHtml(String(enhancementNote))}</div>`;
          }

          groupHtml += `</div>`;
        }
        return groupHtml;
      };

      html += `<div class="result-heading result-section">Stronger phrasing you can use</div>`;
      html += `<div class="result-subline">Clearer versions of a few bullets.</div>`;

      if (clarityGroup.length > 0) {
        html += `<div class="rewrite-cluster-heading">Clarity & Conciseness</div>`;
        html += renderRewriteGroup(clarityGroup);
      }

      if (impactGroup.length > 0) {
        html += `<div class="rewrite-cluster-heading">Impact, Scope & Ownership</div>`;
        html += renderRewriteGroup(impactGroup);
      }
    } else if (Array.isArray(suggestedBullets) && suggestedBullets.length > 0) {
      // Fallback: use suggested_bullets from backend as a simple list
      html += `<div class="result-heading result-section">Stronger phrasing you can use</div>`;
      html += `<div class="result-subline">Clearer versions of a few bullets.</div>`;
      html += `<ul class="result-list">`;
      for (const bullet of suggestedBullets) {
        if (!bullet) continue;
        html += `<li>${escapeHtml(String(bullet))}</li>`;
      }
      html += `</ul>`;
    }

    // Next Steps (override with fixed guidance)
    const fixedNextSteps = [
      "Split multi idea bullets so your role and impact are clearer.",
      "Add numbers or specific outcomes where they strengthen the story.",
      "Highlight your ownership in key achievements so your contribution stands out.",
      "Remember to make your strongest work easy to spot. Most recruiters will make a yes, no, or maybe decision within a few seconds."
    ];
    html += `<div class="result-heading next-steps-heading">Next steps</div>`;
    html += `<div class="result-subline">Simple fixes you can make this week.</div>`;
    html += `<ul class="result-list">`;
    for (const step of fixedNextSteps) {
      html += `<li>${escapeHtml(String(step))}</li>`;
    }
    html += `</ul>`;

    if (!html) {
      html = "No feedback returned.";
    }

    resultsBodyEl.innerHTML = html;
    resultsBodyEl.classList.remove("refreshed");
    void resultsBodyEl.offsetWidth;
    resultsBodyEl.classList.add("refreshed");
    resultsBodyEl.classList.remove("empty");
    resultsBodyEl.classList.add("results-body-better-flash");
    setTimeout(() => resultsBodyEl.classList.remove("results-body-better-flash"), 220);
  }

  function setMode(mode) {
    currentMode = mode;
    modeButtons.forEach(btn => {
      const active = btn.dataset.mode === mode;
      btn.classList.toggle("active", active);
    });

    clearScoreBadge();

    if (mode === "resume") {
      resultsTitleEl.textContent = "Recruiter feedback";
      resultsSubtitleEl.textContent =
        "Your score and take show how clearly your story lands. Below you’ll see what’s clear, what’s buried, and stronger phrasing to use.";
      if (modePillEl) {
        modePillEl.textContent = "Mode • Resume Review";
      }
      if (inputLabelEl) {
        inputLabelEl.textContent = "Paste your full resume, or use the sample to see how it works.";
      }
      inputEl.placeholder =
        "Paste your full resume, including work history, skills, and education.";
    } else if (mode === "offer") {
      resultsTitleEl.textContent = "Offer review (coming soon)";
      resultsSubtitleEl.textContent =
        "Offer guidance will appear here once it ships.";
      if (modePillEl) {
        modePillEl.textContent = "Mode • Offer (disabled)";
      }
      if (inputLabelEl) {
        inputLabelEl.textContent =
          "Offer review is coming soon. Resume Review is live today.";
      }
      inputEl.placeholder = "Offer review is coming soon. Resume Review is live today.";
    }

    positionModeIndicator();
  }

  if (scoreWrapperEl) {
    scoreWrapperEl.addEventListener("mouseenter", () => {
      if (!currentScoreMeta) return;
      scoreBandsHovering = true;
      renderScoreBandsPanel(currentScoreMeta);
      updateScoreBandsVisibility();
    });
    scoreWrapperEl.addEventListener("mouseleave", () => {
      scoreBandsHovering = false;
      updateScoreBandsVisibility();
    });
  }

  if (scoreBadgeEl) {
    scoreBadgeEl.addEventListener("click", () => {
      toggleScoreBandsPinned();
    });
  }

  if (scoreBandsTriggerEl) {
    scoreBandsTriggerEl.addEventListener("click", (event) => {
      event.preventDefault();
      toggleScoreBandsPinned();
    });
  }

  document.addEventListener("click", (event) => {
    if (
      (scoreTooltipEl && scoreTooltipEl.contains(event.target)) ||
      (scoreWrapperEl && scoreWrapperEl.contains(event.target)) ||
      (scoreBandsTriggerEl && scoreBandsTriggerEl.contains(event.target))
    ) {
      return;
    }
    closeScoreBandsPanel();
  });

  document.addEventListener("keydown", (event) => {
    if (event.key === "Escape") {
      closeScoreBandsPanel();
    }
  });

  async function startCheckout() {
    if (paywallStatusEl) paywallStatusEl.textContent = "Opening checkout...";
    try {
      const resp = await fetch("/api/create-checkout-session", { method: "POST" });
      const data = await resp.json().catch(() => null);
      if (!resp.ok || !data?.ok || !data?.url) {
        const msg =
          data?.message || "Could not start checkout right now. Try again in a moment.";
        if (paywallStatusEl) paywallStatusEl.textContent = msg;
        return;
      }
      window.location.href = data.url;
    } catch (err) {
      if (paywallStatusEl) {
        paywallStatusEl.textContent =
          "Could not start checkout right now. Try again in a moment.";
      }
    }
  }

  if (paywallUpgradeEl) {
    paywallUpgradeEl.addEventListener("click", () => {
      startCheckout();
    });
  }

  if (paywallCloseEl) {
    paywallCloseEl.addEventListener("click", () => {
      hidePaywall();
      statusEl.textContent = "";
      setStatus("");
    });
  }

  modeButtons.forEach(btn => {
    btn.addEventListener("click", () => {
      if (btn.classList.contains("disabled-mode")) {
        statusEl.textContent = "Offer review is coming soon. Resume Review is live today.";
        return;
      }
      setMode(btn.dataset.mode);
    });
  });

  async function runAnalysis() {
    const sampleRun = isSampleRun;
    const text = inputEl.value.trim();
    if (!text) {
      const msg = "Paste your resume text so I can actually review it.";
      statusEl.textContent = msg;
      setStatus(msg, "error");
      resultsBodyEl.textContent = "Your feedback will appear here.";
      resultsBodyEl.classList.add("empty");
      resultsBodyEl.classList.remove("results-error");
      renderSummary("");
      if (resultsActionsBottomEl) resultsActionsBottomEl.classList.add("hidden");
      return;
    }

    if (!sampleRun && !isPaid() && getRunCount() >= FREE_RUN_LIMIT) {
      statusEl.textContent = "You’ve used your free runs. Upgrade to keep going.";
      setStatus("You’ve used your free runs. Upgrade to keep going.", "error");
      showPaywall();
      return;
    }

    if (!focusMode) {
      setFocusMode(false);
    }
    statusEl.textContent = "";
    setStatus("");
      runButton.disabled = true;
      originalButtonText = runButton.textContent;
      runButton.textContent = "Processing...";
      loadingBarEl.classList.add("active");
      if (resultsSkeletonEl) {
        resultsSkeletonEl.classList.remove("hidden");
      }
    resultsBodyEl.classList.remove("results-error");
    resultsBodyEl.classList.remove("empty");
    resultsBodyEl.classList.add("muted");
    clearScoreBadge();
    if (ideasInlineEl) {
      ideasInlineEl.classList.add("hidden");
    }
    resetIdeasSection();

        try {
      const response = await fetch("/api/resume-feedback", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          mode: currentMode,
          text
        })
      });

      // New: read the unified payload from the backend
      const payload = await response.json().catch(() => null);

      const fieldMessages =
        payload?.details?.fieldErrors &&
        Object.values(payload.details.fieldErrors)
          .filter(Boolean)
          .join(" ");

      const isValidationError = payload?.errorCode === "VALIDATION_ERROR";

      // If HTTP is not ok or payload is missing, show a calm error
      if (!response.ok || !payload) {
        const msg =
          fieldMessages ||
          mapErrorToUserMessage(
            payload?.errorCode,
            payload?.message || "Unexpected server response."
          );
        statusEl.textContent = msg;
        setStatus(msg, "error");

        if (isValidationError) {
          renderSummary(msg);
          resultsBodyEl.textContent = "";
          resultsBodyEl.classList.add("empty");
          resultsBodyEl.classList.remove("results-error");
        } else {
          resultsBodyEl.textContent =
            fieldMessages ||
            "Something went wrong. Try again in a moment.";
          resultsBodyEl.classList.add("results-error");
          resultsBodyEl.classList.remove("empty");
          renderSummary("");
        }
        return;
      }

      // Backend explicitly signaled an error (ok === false)
      if (payload.ok === false) {
        const msg =
          fieldMessages ||
          mapErrorToUserMessage(payload.errorCode, payload.message);
        statusEl.textContent = msg;
        setStatus(msg, "error");
        if (isValidationError) {
          renderSummary(msg);
          resultsBodyEl.textContent = "";
          resultsBodyEl.classList.add("empty");
          resultsBodyEl.classList.remove("results-error");
        } else {
          resultsBodyEl.textContent =
            fieldMessages ||
            "Something went wrong. Try again in a moment.";
          resultsBodyEl.classList.add("results-error");
          resultsBodyEl.classList.remove("empty");
          renderSummary("");
        }
        return;
      }

      // Happy path: payload.data is the validated object from the server
      let structured = null;

      if (payload.data && typeof payload.data === "object") {
        structured = payload.data;
      } else if (typeof payload.content === "string") {
        // Fallback if we only have the JSON string
        structured = JSON.parse(payload.content);
      } else {
        structured = payload;
      }

      renderStructuredResults(structured);
      triggerReportReveal();
      triggerAccentLineDraw();
      resultsBodyEl.classList.remove("empty");
      resultsBodyEl.classList.remove("results-error");
      if (resultsSkeletonEl) {
        resultsSkeletonEl.classList.add("hidden");
      }
      resultsBodyEl.classList.remove("muted");
      if (!isPaid() && !sampleRun) {
        incrementRunCount();
      }
      if (resultsActionsBottomEl) {
        resultsActionsBottomEl.classList.remove("hidden");
      }

      runIdeas({ auto: true, sourceText: text });

      setFocusMode(true);
      const reportCard = document.querySelector(".card-output");
      if (reportCard && typeof reportCard.scrollIntoView === "function") {
        reportCard.scrollIntoView({ behavior: "smooth", block: "start" });
      }

      if (typeof resultsBodyEl.scrollTo === "function") {
        resultsBodyEl.scrollTo({ top: 0, behavior: "smooth" });
      } else {
        resultsBodyEl.scrollTop = 0;
      }

      statusEl.textContent = "";
      setStatus("");
    } catch (err) {
      console.error(err);
      statusEl.textContent =
        "Something went wrong. Try again in a moment.";
      setStatus("Something went wrong. Try again in a moment.", "error");
      resultsBodyEl.textContent =
        "Something went wrong. Try again in a moment.";
      resultsBodyEl.classList.add("results-error");
      resultsBodyEl.classList.remove("empty");
      renderSummary("");
    } finally {
      runButton.disabled = false;
      runButton.textContent = originalButtonText;
      loadingBarEl.classList.remove("active");
      if (resultsSkeletonEl) {
        resultsSkeletonEl.classList.add("hidden");
      }
      resultsBodyEl.classList.remove("muted");
      isSampleRun = false;
    }
  }

  runButton.addEventListener("click", runAnalysis);
  if (focusToggleEl) {
    focusToggleEl.addEventListener("click", () => {
      setFocusMode(!focusMode);
    });
  }

  copyButtonEl.addEventListener("click", async () => {
    const summaryText = resultsSummaryEl ? resultsSummaryEl.innerText.trim() : "";
    const bodyText = resultsBodyEl.innerText.trim();
    const text = [summaryText, bodyText].filter(Boolean).join("\n\n");
    if (!text) {
      statusEl.textContent = "Nothing to copy yet.";
      return;
    }
    try {
      await navigator.clipboard.writeText(text);
      statusEl.textContent = "Copied.";
    } catch {
      statusEl.textContent = "Could not copy. Please select the text manually.";
    }
  });

  exportButtonEl.addEventListener("click", () => {
    const summaryText = resultsSummaryEl ? resultsSummaryEl.innerText.trim() : "";
    const bodyText = resultsBodyEl ? resultsBodyEl.innerText.trim() : "";
    const text = [summaryText, bodyText].filter(Boolean).join("\n\n");
    if (!text) {
      statusEl.textContent = "Nothing to export yet.";
      return;
    }
    const blob = new Blob([text], { type: "application/pdf" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = "resume-review.pdf";
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    statusEl.textContent = "Exported PDF.";
  });

  inputEl.addEventListener("keydown", (e) => {
    if ((e.metaKey || e.ctrlKey) && e.key === "Enter") {
      e.preventDefault();
      runAnalysis();
    }
  });

  async function runIdeas(options = {}) {
    const { auto = false, sourceText } = options;
    const text = (sourceText || inputEl.value || "").trim();
    if (!text) {
      if (!auto) {
        setIdeasStatus("Add your resume first.", "error");
      }
      return;
    }

    if (ideasInFlight) return;
    ideasInFlight = true;

    const originalIdeasButtonText = ideasRefreshEl ? ideasRefreshEl.textContent : "";

    if (ideasRefreshEl) {
      ideasRefreshEl.disabled = true;
      ideasRefreshEl.textContent = auto ? "Refreshing..." : "Pulling questions...";
    }
    setIdeasStatus("Pulling new questions...");
    setIdeasLoading(true);
    if (ideasBodyEl) {
      ideasBodyEl.classList.remove("results-error");
    }

    try {
      const response = await fetch("/api/resume-ideas", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ text })
      });

      const payload = await response.json().catch(() => null);
      if (!response.ok || !payload || payload.ok === false) {
        const message =
          payload?.message || "There was an error generating ideas. Please try again.";
        if (ideasBodyEl) {
          ideasBodyEl.textContent = message;
          ideasBodyEl.classList.add("results-error");
          ideasBodyEl.classList.remove("empty");
        }
        setIdeasStatus(message, "error");
        return;
      }

      const structured = payload.data || payload;
      renderIdeas(structured);
      setIdeasStatus("Questions ready.");
      setTimeout(() => setIdeasStatus(""), 1600);
    } catch (err) {
      console.error(err);
      if (ideasBodyEl) {
        ideasBodyEl.textContent =
          "Something unexpected glitched. Try again in a moment.";
        ideasBodyEl.classList.add("results-error");
        ideasBodyEl.classList.remove("empty");
      }
      setIdeasStatus("Couldn’t load questions. Try again.", "error");
    } finally {
      ideasInFlight = false;
      if (ideasRefreshEl) {
        ideasRefreshEl.disabled = false;
        ideasRefreshEl.textContent = originalIdeasButtonText || "Refresh";
      }
      setIdeasLoading(false);
    }
  }

  if (ideasOpenEl) {
    ideasOpenEl.addEventListener("click", () => {
      openIdeasModal();
      if (!ideasBodyEl || ideasBodyEl.classList.contains("empty")) {
        runIdeas({ auto: false });
      }
    });
  }

  if (ideasRefreshEl) {
    ideasRefreshEl.addEventListener("click", () => {
      runIdeas({ auto: false });
    });
  }

  if (ideasCloseEl) {
    ideasCloseEl.addEventListener("click", closeIdeasModal);
  }

  if (ideasBackdropEl) {
    ideasBackdropEl.addEventListener("click", closeIdeasModal);
  }

  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape") {
      closeIdeasModal();
    }
  });

  function hideDataPanel() {
    if (dataHandlingPanelEl && !dataHandlingPanelEl.classList.contains("hidden")) {
      dataHandlingPanelEl.classList.add("hidden");
    }
  }

  const SAMPLE_RESUME_TEXT = `Jane Doe
Senior Product Manager

Summary
Senior product manager with 7+ years of experience shipping consumer and B2B features in fast moving environments. Known for turning vague problems into clear roadmaps and coordinated launches.

Experience
Stripe — Senior Product Manager (2021–Present)
- Led cross functional team of engineers, designers, and data scientists to launch a new onboarding flow for small businesses.
- Simplified KYC steps and reduced drop off, increasing completed sign ups by 18% across key markets.
- Built a simple metrics framework so leadership could see impact weekly.

Google — Product Manager (2017–2021)
- Owned a set of growth experiments for a core collaboration product with tens of millions of users.
- Partnered with UX research and engineering to test new sharing flows that improved active usage by 9%.
- Drove roadmap, specs, and cross team communication for launches across three regions.

Education
BA, Economics
University of Washington

Skills
Product discovery, experimentation, roadmapping, stakeholder communication, SQL, basic Python, Figma`;

  if (dataHandlingLinkEl && dataHandlingPanelEl) {
    dataHandlingLinkEl.addEventListener("click", (event) => {
      event.preventDefault();
      const isHidden = dataHandlingPanelEl.classList.contains("hidden");
      if (isHidden) {
        dataHandlingPanelEl.classList.remove("hidden");
      } else {
        dataHandlingPanelEl.classList.add("hidden");
      }
      event.stopPropagation();
    });

    document.addEventListener("click", (event) => {
      if (!dataHandlingPanelEl) return;
      if (dataHandlingPanelEl.classList.contains("hidden")) return;
      const target = event.target;
      if (
        target instanceof Node &&
        dataHandlingPanelEl &&
        dataHandlingLinkEl &&
        !dataHandlingPanelEl.contains(target) &&
        !dataHandlingLinkEl.contains(target)
      ) {
        hideDataPanel();
      }
    });
  }

  if (textareaEl) {
    textareaEl.addEventListener("focus", hideDataPanel);
  }

  if (runButton) {
    runButton.addEventListener("click", hideDataPanel);
  }

  if (sampleResumeButtonEl) {
    sampleResumeButtonEl.addEventListener("click", () => {
      if (!inputEl) return;
      isSampleRun = true;
      inputEl.value = SAMPLE_RESUME_TEXT;
      saveInput(inputEl.value);
      autoResizeTextarea();
      updateResumeHintVisibility();
      showSavedIndicator();
    });
  }

  // Backdrop click should not scroll page when modal hidden
  if (ideasModalEl) {
    ideasModalEl.addEventListener("click", (e) => {
      if (e.target === ideasModalEl) {
        closeIdeasModal();
      }
    });
  }
function mapErrorToUserMessage(errorCode, fallbackMessage) {
  switch (errorCode) {
    case "VALIDATION_ERROR":
      return "I need a bit more from you before I can give real feedback. Check what you pasted and try again.";
    case "OPENAI_TIMEOUT":
      return "The model took too long to finish this pass. Try again in a moment.";
    case "OPENAI_NETWORK_ERROR":
      return "There was a small network hiccup. Try again and it should go through.";
    case "OPENAI_HTTP_ERROR":
      return "The model had trouble finishing your review. Try once more.";
    case "OPENAI_RESPONSE_PARSE_ERROR":
    case "OPENAI_RESPONSE_SHAPE_INVALID":
    case "OPENAI_RESPONSE_NOT_JSON":
      return "The model replied in a format I could not read cleanly. Run it again and it should come back sharper.";
    default:
      return (
        fallbackMessage ||
        "Something on my side glitched while reading your resume. Try once more."
      );
  }
}

  function setStatus(message, variant = "info") {
    const el = document.getElementById("status-bar");
    if (!el) return;
    el.textContent = message || "";
    el.classList.remove("status-info", "status-error");
    if (message) {
      el.classList.add(variant === "error" ? "status-error" : "status-info");
    }
  }

  function resetIdeasSection() {
    setIdeasStatus("");
    if (!ideasBodyEl) return;
    ideasBodyEl.innerHTML =
      "I’ll look for wins you have not written yet or forgot about.";
    ideasBodyEl.classList.add("empty");
    ideasBodyEl.classList.remove("results-error");
    if (ideasModalEl) {
      ideasModalEl.classList.remove("visible");
      ideasModalEl.setAttribute("aria-hidden", "true");
    }
  }

  function setIdeasStatus(message, variant = "info") {
    if (!ideasStatusEl) return;
    ideasStatusEl.textContent = message || "";
    ideasStatusEl.classList.toggle("error", variant === "error" && !!message);
  }

  function openIdeasModal() {
    if (!ideasModalEl) return;
    ideasModalEl.classList.add("visible");
    ideasModalEl.setAttribute("aria-hidden", "false");
  }

  function closeIdeasModal() {
    if (!ideasModalEl) return;
    ideasModalEl.classList.remove("visible");
    ideasModalEl.setAttribute("aria-hidden", "true");
  }

  function setIdeasLoading(isLoading) {
    if (!ideasLoadingBarEl) return;
    if (isLoading) {
      ideasLoadingBarEl.style.opacity = "1";
      ideasLoadingBarEl.style.animation = "loadingSlide 1.2s linear infinite";
      ideasLoadingBarEl.classList.add("active");
    } else {
      ideasLoadingBarEl.style.opacity = "0";
      ideasLoadingBarEl.style.animation = "none";
      ideasLoadingBarEl.classList.remove("active");
    }
  }

  function renderIdeas(data) {
    if (!ideasBodyEl) return;
    const { questions, notes, how_to_use: howToUse } = data || {};
    let html = "";

    if (Array.isArray(questions) && questions.length > 0) {
      const limited = questions.slice(0, 3);
      html += `<div class="ideas-section-card"><div class="ideas-section-title">Questions worth answering</div><div class="ideas-section-subline">Use these to surface wins your resume isn’t showing yet.</div><ul class="ideas-list">`;
      for (const q of limited) {
        html += `<li>${escapeHtml(String(q))}</li>`;
      }
      html += `</ul></div>`;
    }

    html += `<div class="ideas-section-card"><div class="ideas-section-title">How to use this</div><p>Pick one question and jot down what actually happened: the situation, the decision you made, what you owned, and what changed.</p></div>`;

    html += `<div class="ideas-section-card"><div class="ideas-section-title">Turn it into a bullet</div><p>Use: verb + what you owned + the outcome (ideally with a number). Skip it if it’s already covered in your resume.</p></div>`;

    ideasBodyEl.innerHTML = html || "";
    ideasBodyEl.classList.remove("empty");
    if (ideasInlineEl) ideasInlineEl.classList.remove("hidden");
    if (focusToggleEl) focusToggleEl.classList.remove("hidden");
    }


    (function init() {
      loadSavedInput();
      setMode("resume");
      autoResizeTextarea();
      positionModeIndicator();
      updateResumeHintVisibility();
      renderSummary("");
    })();
</script>

</body>
</html>
