{"version":3,"sources":["../../../../../web/components/workspace/WorkspaceClient.tsx","../../../../../web/components/workspace/WorkspaceHeader.tsx","../../../../../web/components/workspace/InputPanel.tsx","../../../../../web/components/workspace/ReportPanel.tsx","../../../../../web/components/workspace/HistorySidebar.tsx","../../../../../web/lib/api.ts"],"sourcesContent":["\"use client\";\n\nimport { useState, useCallback, useEffect } from \"react\";\nimport { useSearchParams } from \"next/navigation\";\nimport { useAuth } from \"@/components/providers/AuthProvider\";\nimport WorkspaceHeader from \"@/components/workspace/WorkspaceHeader\";\nimport InputPanel from \"@/components/workspace/InputPanel\";\nimport ReportPanel from \"@/components/workspace/ReportPanel\";\nimport HistorySidebar from \"@/components/workspace/HistorySidebar\";\nimport PaywallModal from \"@/components/workspace/PaywallModal\";\nimport AuthModal from \"@/components/shared/AuthModal\";\nimport { createResumeFeedback, parseResume } from \"@/lib/api\";\n\nexport default function WorkspaceClient() {\n    const searchParams = useSearchParams();\n    const { user, signOut, refreshUser } = useAuth();\n    const [resumeText, setResumeText] = useState(\"\");\n    const [jobDescription, setJobDescription] = useState(\"\");\n    const [isLoading, setIsLoading] = useState(false);\n    const [report, setReport] = useState<any>(null);\n    const [freeUsesRemaining, setFreeUsesRemaining] = useState(2);\n\n    // History sidebar, paywall modal, and auth modal state\n    const [isHistoryOpen, setIsHistoryOpen] = useState(false);\n    const [isPaywallOpen, setIsPaywallOpen] = useState(false);\n    const [isAuthOpen, setIsAuthOpen] = useState(false);\n\n    // Auto-load sample report if ?sample=true\n    useEffect(() => {\n        if (searchParams.get(\"sample\") === \"true\" && !report) {\n            fetch(\"/sample-report.json\")\n                .then(res => res.json())\n                .then(data => setReport(data))\n                .catch(err => console.error(\"Failed to load sample report:\", err));\n        }\n    }, [searchParams, report]);\n\n    const handleFileSelect = useCallback(async (file: File) => {\n        console.log(\"[WorkspaceClient] handleFileSelect called with:\", file.name, file.type);\n        try {\n            setIsLoading(true);\n            const formData = new FormData();\n            formData.append(\"file\", file);\n\n            const result = await parseResume(formData);\n            console.log(\"[WorkspaceClient] parseResume result:\", result);\n            if (result.ok && result.text) {\n                setResumeText(result.text);\n            } else {\n                console.error(\"Failed to parse resume:\", result.message);\n                alert(\"Failed to parse resume: \" + (result.message || \"Unknown error\"));\n            }\n        } catch (err) {\n            console.error(\"File parsing error:\", err);\n            alert(\"File parsing error. Check console for details.\");\n        } finally {\n            setIsLoading(false);\n        }\n    }, []);\n\n    const handleRun = useCallback(async () => {\n        console.log(\"[WorkspaceClient] handleRun called, resumeText length:\", resumeText.length);\n        if (!resumeText.trim()) return;\n\n        // Check if free uses exhausted (and user doesn't have active pass)\n        if (freeUsesRemaining <= 0) {\n            setIsPaywallOpen(true);\n            return;\n        }\n\n        setIsLoading(true);\n        setReport(null);\n\n        try {\n            console.log(\"[WorkspaceClient] Calling createResumeFeedback...\");\n            const result = await createResumeFeedback(resumeText, jobDescription || undefined);\n            console.log(\"[WorkspaceClient] createResumeFeedback result:\", result);\n\n            if (result.ok && result.report) {\n                console.log(\"[WorkspaceClient] Setting report:\", result.report);\n                setReport(result.report);\n                setFreeUsesRemaining((prev) => Math.max(0, prev - 1));\n            } else {\n                console.error(\"Failed to generate report:\", result.message);\n                alert(\"Failed to generate report: \" + (result.message || \"Unknown error\"));\n            }\n        } catch (err) {\n            console.error(\"Report generation error:\", err);\n            alert(\"Report generation error. Check console for details.\");\n        } finally {\n            setIsLoading(false);\n        }\n    }, [resumeText, jobDescription]);\n\n    const handleNewReport = useCallback(() => {\n        setResumeText(\"\");\n        setJobDescription(\"\");\n        setReport(null);\n    }, []);\n\n    const handleSampleReport = useCallback(async () => {\n        // Load sample report\n        try {\n            const res = await fetch(\"/sample-report.json\");\n            const data = await res.json();\n            setReport(data);\n        } catch (err) {\n            console.error(\"Failed to load sample report:\", err);\n        }\n    }, []);\n\n    // PDF export state\n    const [isExporting, setIsExporting] = useState(false);\n\n    const handleExportPdf = useCallback(async () => {\n        if (!report) return;\n\n        setIsExporting(true);\n        try {\n            const response = await fetch(\"/api/export-pdf\", {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify({ report }),\n            });\n\n            if (!response.ok) {\n                const error = await response.json().catch(() => ({}));\n                alert(error.message || \"Failed to export PDF\");\n                return;\n            }\n\n            // Download PDF\n            const blob = await response.blob();\n            const url = URL.createObjectURL(blob);\n            const a = document.createElement(\"a\");\n            a.href = url;\n            a.download = \"resume-report.pdf\";\n            document.body.appendChild(a);\n            a.click();\n            document.body.removeChild(a);\n            URL.revokeObjectURL(url);\n        } catch (err) {\n            console.error(\"PDF export error:\", err);\n            alert(\"Failed to export PDF\");\n        } finally {\n            setIsExporting(false);\n        }\n    }, [report]);\n\n    // Fetch free status on mount\n    useEffect(() => {\n        fetch(\"/api/free-status\")\n            .then(res => res.json())\n            .then(data => {\n                if (data.free_uses_left !== undefined) {\n                    setFreeUsesRemaining(data.free_uses_left);\n                }\n            })\n            .catch(err => console.error(\"Failed to fetch free status:\", err));\n    }, []);\n\n\n    return (\n        <>\n            <main className=\"min-h-screen flex flex-col bg-gray-50\">\n                <h1 className=\"sr-only\">Resume Workspace ‚Äî Analyze Your Resume</h1>\n\n                <WorkspaceHeader\n                    user={user ? { email: user.email || undefined, firstName: user.firstName || undefined } : null}\n                    onNewReport={handleNewReport}\n                    onSampleReport={handleSampleReport}\n                    onSignIn={() => setIsAuthOpen(true)}\n                    onSignOut={signOut}\n                    onHistory={() => setIsHistoryOpen(true)}\n                />\n\n                <div className={`flex-1 grid ${report ? \"grid-cols-1\" : \"grid-cols-1 lg:grid-cols-2\"}`}>\n                    {/* Input Panel - hidden when report is showing */}\n                    <div className={`${report ? \"hidden\" : \"block\"} h-full`}>\n                        <InputPanel\n                            resumeText={resumeText}\n                            jobDescription={jobDescription}\n                            onResumeTextChange={setResumeText}\n                            onJobDescChange={setJobDescription}\n                            onFileSelect={handleFileSelect}\n                            onRun={handleRun}\n                            isLoading={isLoading}\n                            freeUsesRemaining={freeUsesRemaining}\n                        />\n                    </div>\n\n                    <ReportPanel\n                        report={report}\n                        isLoading={isLoading}\n                        hasJobDescription={!!jobDescription.trim()}\n                        onExportPdf={handleExportPdf}\n                        isExporting={isExporting}\n                    />\n                </div>\n            </main>\n\n\n            {/* History Sidebar */}\n            <HistorySidebar\n                isOpen={isHistoryOpen}\n                onClose={() => setIsHistoryOpen(false)}\n                user={user ? { email: user.email || undefined, firstName: user.firstName || undefined } : null}\n                onSignIn={() => {\n                    setIsHistoryOpen(false);\n                    setIsAuthOpen(true);\n                }}\n                onLoadReport={(reportId) => {\n                    console.log(\"Load report:\", reportId);\n                    setIsHistoryOpen(false);\n                    // TODO: Fetch and display report\n                }}\n            />\n\n            {/* Paywall Modal */}\n            <PaywallModal\n                isOpen={isPaywallOpen}\n                onClose={() => setIsPaywallOpen(false)}\n                freeUsesRemaining={freeUsesRemaining}\n                userEmail={user?.email || undefined}\n                onSuccess={() => {\n                    setIsPaywallOpen(false);\n                    // Refresh free uses count\n                }}\n            />\n\n            {/* Auth Modal */}\n            <AuthModal\n                isOpen={isAuthOpen}\n                onClose={() => setIsAuthOpen(false)}\n                onSuccess={async () => {\n                    await refreshUser();\n                    setIsAuthOpen(false);\n                }}\n            />\n        </>\n    );\n}\n\n","\"use client\";\n\nimport { useState } from \"react\";\nimport Link from \"next/link\";\nimport ThemeToggle from \"../shared/ThemeToggle\";\n\ninterface User {\n    email?: string;\n    firstName?: string;\n}\n\ninterface WorkspaceHeaderProps {\n    user?: User | null;\n    onNewReport?: () => void;\n    onSampleReport?: () => void;\n    onSignIn?: () => void;\n    onSignOut?: () => void;\n    onHistory?: () => void;\n}\n\nexport default function WorkspaceHeader({\n    user,\n    onNewReport,\n    onSampleReport,\n    onSignIn,\n    onSignOut,\n    onHistory\n}: WorkspaceHeaderProps) {\n    const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n    const userInitial = user?.firstName?.[0] || user?.email?.[0]?.toUpperCase() || \"?\";\n\n    return (\n        <header className=\"flex items-center justify-between px-6 py-4 bg-surface border-b border-subtle\">\n            <Link href=\"/\" className=\"font-display font-bold text-lg text-primary hover:text-brand dark:hover:text-brand-strong transition-colors\">\n                Recruiter in Your Pocket\n            </Link>\n\n            <div className=\"flex items-center gap-3\">\n                <button className=\"btn-ghost\" onClick={onSampleReport}>\n                    üìÑ Sample Report\n                </button>\n\n                <button\n                    onClick={onNewReport}\n                    className=\"inline-flex items-center gap-2 px-4 py-2 bg-success text-white \n                        font-semibold rounded-lg shadow-button hover:opacity-90 \n                        transition-all duration-200\"\n                >\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\">\n                        <path d=\"M12 8V16M8 12H16\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n                    </svg>\n                    New Report\n                </button>\n\n                {!user ? (\n                    <button className=\"btn-ghost font-semibold\" onClick={onSignIn}>\n                        Sign In\n                    </button>\n                ) : (\n                    <div className=\"relative\">\n                        <button\n                            onClick={() => setIsDropdownOpen(!isDropdownOpen)}\n                            className=\"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-hover transition-colors\"\n                        >\n                            <span className=\"w-8 h-8 flex items-center justify-center bg-brand text-white rounded-full font-semibold text-sm\">\n                                {userInitial}\n                            </span>\n                            <span className=\"text-sm text-primary max-w-[120px] truncate\">\n                                {user.firstName || user.email}\n                            </span>\n                            <span className=\"text-muted text-xs\">‚ñæ</span>\n                        </button>\n\n                        {isDropdownOpen && (\n                            <>\n                                <div\n                                    className=\"fixed inset-0 z-40\"\n                                    onClick={() => setIsDropdownOpen(false)}\n                                />\n                                <div className=\"absolute right-0 top-full mt-1 w-56 bg-surface border border-subtle rounded-xl shadow-modal z-50 py-2\">\n\n                                    <div className=\"px-4 py-2 text-xs text-muted truncate\">\n                                        {user.email}\n                                    </div>\n                                    <div className=\"border-t border-subtle my-1\" />\n\n                                    <button\n                                        onClick={() => { onHistory?.(); setIsDropdownOpen(false); }}\n                                        className=\"w-full flex items-center gap-3 px-4 py-2 text-sm text-secondary hover:bg-brand-soft transition-colors\"\n                                    >\n                                        <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\">\n                                            <path d=\"M3 7C3 4.239 4.239 3 7 3H17C19.761 3 21 4.239 21 7V17C21 19.761 19.761 21 17 21H7C4.239 21 3 19.761 3 17V7Z\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n                                            <path d=\"M7 8H17M7 12H17M7 16H13\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\n                                        </svg>\n                                        My Reports\n                                    </button>\n\n                                    <button\n                                        onClick={() => { onNewReport?.(); setIsDropdownOpen(false); }}\n                                        className=\"w-full flex items-center gap-3 px-4 py-2 text-sm text-secondary hover:bg-brand-soft transition-colors\"\n                                    >\n                                        <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\">\n                                            <path d=\"M12 8V16M8 12H16\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\n                                        </svg>\n                                        New Report\n                                    </button>\n\n                                    <div className=\"border-t border-subtle my-1\" />\n\n                                    <Link\n                                        href=\"/\"\n                                        className=\"w-full flex items-center gap-3 px-4 py-2 text-sm text-secondary hover:bg-brand-soft transition-colors\"\n                                        onClick={() => setIsDropdownOpen(false)}\n                                    >\n                                        <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\">\n                                            <path d=\"M11 6L5 12M5 12L11 18M5 12H19\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                                        </svg>\n                                        Home\n                                    </Link>\n\n                                    <Link\n                                        href=\"/settings\"\n                                        className=\"w-full flex items-center gap-3 px-4 py-2 text-sm text-secondary hover:bg-brand-soft transition-colors\"\n                                        onClick={() => setIsDropdownOpen(false)}\n                                    >\n                                        <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\">\n                                            <path d=\"M12 15a3 3 0 100-6 3 3 0 000 6z\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n                                            <path d=\"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n                                        </svg>\n                                        Settings\n                                    </Link>\n\n                                    <button\n                                        onClick={() => { onSignOut?.(); setIsDropdownOpen(false); }}\n                                        className=\"w-full flex items-center gap-3 px-4 py-2 text-sm text-danger hover:bg-warning-soft transition-colors\"\n                                    >\n                                        Sign Out\n                                    </button>\n                                </div>\n                            </>\n                        )}\n                    </div>\n                )}\n\n                <ThemeToggle />\n            </div>\n        </header>\n    );\n}\n","\"use client\";\n\nimport { useState, useRef, ChangeEvent } from \"react\";\n\ninterface InputPanelProps {\n    resumeText: string;\n    jobDescription: string;\n    onResumeTextChange: (text: string) => void;\n    onJobDescChange: (text: string) => void;\n    onFileSelect: (file: File) => void;\n    onRun: () => void;\n    isLoading: boolean;\n    freeUsesRemaining: number;\n}\n\nexport default function InputPanel({\n    resumeText,\n    jobDescription,\n    onResumeTextChange,\n    onJobDescChange,\n    onFileSelect,\n    onRun,\n    isLoading,\n    freeUsesRemaining\n}: InputPanelProps) {\n    const [fileName, setFileName] = useState<string | null>(null);\n    const [isDragOver, setIsDragOver] = useState(false);\n    const fileInputRef = useRef<HTMLInputElement>(null);\n\n    const handleFileChange = (e: ChangeEvent<HTMLInputElement>) => {\n        const file = e.target.files?.[0];\n        if (file) {\n            setFileName(file.name);\n            onFileSelect(file);\n        }\n    };\n\n    const handleDrop = (e: React.DragEvent) => {\n        e.preventDefault();\n        setIsDragOver(false);\n        const file = e.dataTransfer.files?.[0];\n        if (file) {\n            setFileName(file.name);\n            onFileSelect(file);\n        }\n    };\n\n    const handleRemoveFile = () => {\n        setFileName(null);\n        if (fileInputRef.current) {\n            fileInputRef.current.value = \"\";\n        }\n    };\n\n    const getRunHint = () => {\n        if (freeUsesRemaining >= 2) {\n            return \"Your first 2 reports are free. No login required.\";\n        } else if (freeUsesRemaining === 1) {\n            return \"1 free report remaining\";\n        } else {\n            return \"Upgrade to keep analyzing\";\n        }\n    };\n\n    const charCount = resumeText.length;\n    const isShortResume = charCount > 0 && charCount < 1500;\n\n    return (\n        <div className=\"bg-surface p-6 flex flex-col gap-6 overflow-y-auto h-full\">\n            <div className=\"flex flex-col gap-6\">\n                {/* Resume Upload */}\n                <div className=\"flex flex-col gap-2\">\n                    <div className=\"flex items-center justify-between\">\n                        <span className=\"font-semibold text-primary text-sm\">Your Resume</span>\n                        <span className=\"text-muted text-xs\">PDF, DOCX, or paste text</span>\n                    </div>\n\n                    {/* Dropzone */}\n                    <div\n                        className={`flex flex-col items-center justify-center gap-3 p-6\n                            border-2 border-dashed rounded-xl cursor-pointer\n                            transition-all duration-200\n                            ${isDragOver\n                                ? \"border-brand bg-brand-soft\"\n                                : \"border-subtle hover:border-brand hover:bg-brand-soft/30\"\n                            }`}\n                        onClick={(e) => {\n                            if (e.target === e.currentTarget || !(e.target as HTMLElement).closest('input')) {\n                                fileInputRef.current?.click();\n                            }\n                        }}\n                        onDragOver={(e) => { e.preventDefault(); setIsDragOver(true); }}\n                        onDragLeave={() => setIsDragOver(false)}\n                        onDrop={handleDrop}\n                    >\n                        <svg className=\"w-8 h-8 text-muted\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\"\n                                d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n                        </svg>\n                        <div className=\"text-primary text-sm font-medium\">Drop your resume here or click to upload</div>\n                        <div className=\"text-muted text-xs\">Supports PDF and DOCX files</div>\n                        <input\n                            type=\"file\"\n                            ref={fileInputRef}\n                            className=\"hidden\"\n                            accept=\".pdf,.docx,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n                            onChange={handleFileChange}\n                            onClick={(e) => e.stopPropagation()}\n                        />\n                    </div>\n\n                    {/* File info */}\n                    {fileName && (\n                        <div className=\"flex items-center justify-between px-4 py-2 bg-brand-soft rounded-lg\">\n                            <span className=\"text-brand font-medium text-sm\">{fileName}</span>\n                            <button\n                                className=\"text-muted hover:text-danger text-xs transition-colors\"\n                                onClick={handleRemoveFile}\n                            >\n                                ‚úï Remove\n                            </button>\n                        </div>\n                    )}\n\n                    {/* Divider */}\n                    <div className=\"text-center text-muted text-sm py-2\">\n                        ‚Äî or paste ‚Äî\n                    </div>\n\n                    {/* Resume textarea */}\n                    <textarea\n                        value={resumeText}\n                        onChange={(e) => onResumeTextChange(e.target.value)}\n                        placeholder=\"Paste your resume text here...\"\n                        className=\"textarea min-h-[200px]\"\n                    />\n\n                    {/* Short resume warning */}\n                    {isShortResume && (\n                        <div className=\"flex items-start gap-3 p-4 bg-warning-soft border border-amber-200 rounded-lg\">\n                            <div className=\"text-lg\">‚ö†Ô∏è</div>\n                            <div>\n                                <div className=\"font-semibold text-primary text-sm\">Resume looks short</div>\n                                <p className=\"text-secondary text-xs mt-1\">\n                                    We found {charCount} characters. Most resumes have 1,500+ characters. You might get limited feedback.\n                                </p>\n                            </div>\n                        </div>\n                    )}\n                </div>\n\n                {/* Job Description (Optional) */}\n                <div className=\"flex flex-col gap-2\">\n                    <div className=\"flex items-center justify-between\">\n                        <span className=\"font-semibold text-primary text-sm\">Job Description</span>\n                        <span className=\"text-muted text-xs\">Optional ‚Äî enables alignment analysis</span>\n                    </div>\n                    <textarea\n                        value={jobDescription}\n                        onChange={(e) => onJobDescChange(e.target.value)}\n                        className=\"textarea min-h-[120px]\"\n                        placeholder=\"Paste the job description to see how well your resume aligns...\"\n                    />\n                </div>\n            </div>\n\n            {/* Run Button */}\n            <div className=\"flex flex-col items-center gap-2 pt-4 border-t border-subtle mt-auto\">\n                <button\n                    className=\"btn-primary w-full\"\n                    onClick={onRun}\n                    disabled={isLoading || (!resumeText.trim() && !fileName)}\n                >\n                    <span>{isLoading ? \"Analyzing...\" : \"See How Recruiters Read You\"}</span>\n                    <span>‚Üí</span>\n                </button>\n                <div className=\"text-muted text-xs\">{getRunHint()}</div>\n            </div>\n        </div>\n    );\n}\n","\"use client\";\n\nimport { useState, useMemo, useEffect, useRef } from \"react\";\n\n// Score-based color function - returns Tailwind color classes\nfunction getScoreColorClass(score: number): string {\n    if (score >= 90) return 'text-purple-500';\n    if (score >= 85) return 'text-blue-500';\n    if (score >= 80) return 'text-emerald-500';\n    if (score >= 70) return 'text-amber-500';\n    return 'text-red-500';\n}\n\nfunction getScoreColor(score: number): string {\n    if (score >= 90) return '#8b5cf6';\n    if (score >= 85) return '#3b82f6';\n    if (score >= 80) return '#22c55e';\n    if (score >= 70) return '#f59e0b';\n    return '#ef4444';\n}\n\nfunction getScoreBgClass(score: number): string {\n    if (score >= 90) return 'bg-purple-100 text-purple-700';\n    if (score >= 85) return 'bg-blue-100 text-blue-700';\n    if (score >= 80) return 'bg-emerald-100 text-emerald-700';\n    if (score >= 70) return 'bg-amber-100 text-amber-700';\n    return 'bg-red-100 text-red-700';\n}\n\ntype TabId = \"overview\" | \"fixes\" | \"sections\" | \"rewrites\" | \"alignment\" | \"wins\";\n\ninterface ReportData {\n    score?: number;\n    score_label?: string;\n    score_comment_short?: string;\n    score_comment_long?: string;\n    summary?: string;\n    subscores?: {\n        impact?: number;\n        clarity?: number;\n        story?: number;\n        readability?: number;\n    };\n    first_impression?: string;\n    strengths?: string[];\n    gaps?: string[];\n    top_fixes?: Array<{ fix?: string; text?: string; impact_level?: string; effort?: string; section_ref?: string }>;\n    section_review?: Record<string, { working?: string | null; missing?: string | null; fix?: string | null; grade?: string; priority?: string }>;\n    rewrites?: Array<{ original: string; better: string; label?: string; enhancement_note?: string }>;\n    job_alignment?: {\n        strongly_aligned?: string[];\n        underplayed?: string[];\n        missing?: string[];\n        role_fit?: {\n            best_fit_roles?: string[];\n            stretch_roles?: string[];\n            seniority_read?: string;\n            industry_signals?: string[];\n            company_stage_fit?: string;\n        };\n        positioning_suggestion?: string;\n    };\n    ideas?: {\n        questions?: Array<{ question: string; archetype?: string; why?: string }>;\n        notes?: string[];\n        how_to_use?: string;\n    };\n    next_steps?: string[];\n}\n\ninterface ReportPanelProps {\n    report: ReportData | null;\n    isLoading: boolean;\n    hasJobDescription: boolean;\n    onExportPdf?: () => void;\n    isExporting?: boolean;\n}\n\nconst tabs: { id: TabId; label: string }[] = [\n    { id: \"overview\", label: \"Overview\" },\n    { id: \"fixes\", label: \"Top Fixes\" },\n    { id: \"sections\", label: \"By Section\" },\n    { id: \"rewrites\", label: \"Bullet Upgrades\" },\n    { id: \"alignment\", label: \"Job Alignment\" },\n    { id: \"wins\", label: \"Missing Wins\" }\n];\n\nexport default function ReportPanel({ report, isLoading, hasJobDescription, onExportPdf, isExporting }: ReportPanelProps) {\n    const [activeTab, setActiveTab] = useState<TabId>(\"overview\");\n\n    const showEmptyState = !report && !isLoading;\n    const showLoading = isLoading;\n    const showReport = report && !isLoading;\n\n    // First impression text fallback\n    const firstImpressionText = report?.score_comment_long || report?.score_comment_short || report?.first_impression || report?.summary;\n\n    // Animated score dial state\n    const [animatedScore, setAnimatedScore] = useState(0);\n    const animationRef = useRef<number | null>(null);\n\n    useEffect(() => {\n        const targetScore = report?.score || 0;\n        if (targetScore <= 0) {\n            setAnimatedScore(0);\n            return;\n        }\n\n        const duration = 1200;\n        const startTime = Date.now();\n\n        const animate = () => {\n            const elapsed = Date.now() - startTime;\n            const progress = Math.min(elapsed / duration, 1);\n            const eased = 1 - Math.pow(1 - progress, 3);\n            const current = Math.round(targetScore * eased);\n            setAnimatedScore(current);\n\n            if (progress < 1) {\n                animationRef.current = requestAnimationFrame(animate);\n            } else {\n                setAnimatedScore(targetScore);\n            }\n        };\n\n        setAnimatedScore(0);\n        const timeoutId = setTimeout(() => {\n            animationRef.current = requestAnimationFrame(animate);\n        }, 100);\n\n        return () => {\n            clearTimeout(timeoutId);\n            if (animationRef.current) cancelAnimationFrame(animationRef.current);\n        };\n    }, [report?.score]);\n\n    const dialColor = getScoreColor(animatedScore);\n\n    return (\n        <div className=\"bg-gray-50 flex flex-col h-full overflow-hidden\">\n            {/* Tabs + Export Button */}\n            <div className=\"flex items-center justify-between px-4 py-3 bg-white border-b border-gray-200\">\n                <div className=\"flex gap-1 overflow-x-auto\">\n                    {tabs.map((tab) => (\n                        <button\n                            key={tab.id}\n                            className={`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors\n                            ${activeTab === tab.id\n                                    ? \"bg-indigo-100 text-indigo-700\"\n                                    : \"text-gray-600 hover:bg-gray-100\"\n                                }`}\n                            onClick={() => setActiveTab(tab.id)}\n                        >\n                            {tab.label}\n                        </button>\n                    ))}\n                </div>\n\n                {/* Export PDF Button */}\n                {showReport && onExportPdf && (\n                    <button\n                        onClick={onExportPdf}\n                        disabled={isExporting}\n                        className=\"flex items-center gap-2 px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50\"\n                    >\n                        <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" />\n                        </svg>\n                        {isExporting ? \"Exporting...\" : \"Export PDF\"}\n                    </button>\n                )}\n            </div>\n\n            {/* Content */}\n            <div className=\"flex-1 overflow-y-auto p-6\">\n                {/* Empty State */}\n                {showEmptyState && (\n                    <div className=\"flex flex-col items-center justify-center h-full text-center text-gray-500\">\n                        <svg className=\"w-16 h-16 mb-4 opacity-50\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\"\n                                d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                        </svg>\n                        <div className=\"text-lg font-semibold text-gray-700 mb-2\">Ready when you are</div>\n                        <p>Upload or paste your resume to get recruiter-grade feedback in seconds.</p>\n                    </div>\n                )}\n\n                {/* Loading State */}\n                {showLoading && (\n                    <div className=\"flex flex-col items-center justify-center h-full text-center\">\n                        <div className=\"w-10 h-10 border-4 border-indigo-200 border-t-indigo-500 rounded-full animate-spin mb-4\" />\n                        <div className=\"text-lg font-medium text-gray-700 mb-1\">Reading your resume like a recruiter...</div>\n                        <p className=\"text-gray-500\">This usually takes 10-15 seconds</p>\n                    </div>\n                )}\n\n                {/* Report Content */}\n                {showReport && (\n                    <div className=\"max-w-3xl mx-auto space-y-6\">\n                        {/* Overview */}\n                        {activeTab === \"overview\" && (\n                            <>\n                                {/* Score Header */}\n                                <div className=\"flex items-start gap-6 p-6 bg-white rounded-xl border border-gray-200\">\n                                    {/* Score Dial */}\n                                    <div className=\"flex flex-col items-center gap-2 flex-shrink-0\">\n                                        <div className=\"relative w-28 h-28\">\n                                            <svg viewBox=\"0 0 120 120\" className=\"w-full h-full -rotate-90\">\n                                                <circle cx=\"60\" cy=\"60\" r=\"54\" fill=\"none\" stroke=\"#e5e7eb\" strokeWidth=\"8\" />\n                                                <circle\n                                                    cx=\"60\" cy=\"60\" r=\"54\" fill=\"none\"\n                                                    stroke={dialColor} strokeWidth=\"8\" strokeLinecap=\"round\"\n                                                    strokeDasharray=\"339.292\"\n                                                    strokeDashoffset={339.292 * (1 - animatedScore / 100)}\n                                                    className=\"transition-all duration-100\"\n                                                />\n                                            </svg>\n                                            <div\n                                                className=\"absolute inset-0 flex items-center justify-center font-display text-4xl font-extrabold\"\n                                                style={{ color: dialColor }}\n                                            >\n                                                {animatedScore}\n                                            </div>\n                                        </div>\n                                        <span className=\"text-xs font-medium text-gray-500 uppercase tracking-wide\">Score</span>\n                                    </div>\n\n                                    {/* First Impression */}\n                                    <div className=\"flex-1\">\n                                        {firstImpressionText && (\n                                            <div>\n                                                <div className=\"flex items-center gap-2 mb-2\">\n                                                    <svg className=\"w-5 h-5 text-indigo-500\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n                                                        <path d=\"M12 5C16.478 5 20.268 7.405 22 11C20.268 14.595 16.478 17 12 17C7.522 17 3.732 14.595 2 11C3.732 7.405 7.522 5 12 5Z\" />\n                                                        <circle cx=\"12\" cy=\"11\" r=\"3\" />\n                                                    </svg>\n                                                    <span className=\"font-semibold text-gray-900\">Recruiter First Impression</span>\n                                                </div>\n                                                <p className=\"text-gray-600 leading-relaxed\">{firstImpressionText}</p>\n                                            </div>\n                                        )}\n                                    </div>\n                                </div>\n\n                                {/* Subscores */}\n                                <div className=\"grid grid-cols-4 gap-3\">\n                                    {[\n                                        { key: 'impact', label: 'Impact', score: report.subscores?.impact },\n                                        { key: 'clarity', label: 'Clarity', score: report.subscores?.clarity },\n                                        { key: 'story', label: 'Story', score: report.subscores?.story },\n                                        { key: 'readability', label: 'Readability', score: report.subscores?.readability }\n                                    ].map(({ key, label, score }) => (\n                                        <div key={key} className=\"p-4 bg-white rounded-lg border border-gray-200 text-center\">\n                                            <div className={`text-2xl font-bold ${score ? getScoreColorClass(score) : 'text-gray-400'}`}>\n                                                {score || \"‚Äî\"}\n                                            </div>\n                                            <div className=\"text-xs text-gray-500 mt-1\">{label}</div>\n                                            {score && (\n                                                <span className={`inline-block mt-2 px-2 py-0.5 rounded text-[10px] font-medium ${getScoreBgClass(score)}`}>\n                                                    {score >= 90 ? 'EXCEPTIONAL' : score >= 85 ? 'STRONG' : score >= 80 ? 'GOOD' : score >= 70 ? 'NEEDS WORK' : 'RISK'}\n                                                </span>\n                                            )}\n                                        </div>\n                                    ))}\n                                </div>\n\n                                {/* Strengths */}\n                                {report.strengths && report.strengths.length > 0 && (\n                                    <div className=\"p-5 bg-white rounded-xl border border-gray-200\">\n                                        <h3 className=\"flex items-center gap-2 font-semibold text-gray-900 mb-3\">\n                                            <span className=\"text-emerald-500\">‚úì</span> What&apos;s Working\n                                        </h3>\n                                        <ul className=\"space-y-2\">\n                                            {report.strengths.map((s, i) => (\n                                                <li key={i} className=\"flex items-start gap-2 text-gray-600\">\n                                                    <span className=\"text-emerald-400 mt-1\">‚Ä¢</span> {s}\n                                                </li>\n                                            ))}\n                                        </ul>\n                                    </div>\n                                )}\n\n                                {/* Gaps */}\n                                {report.gaps && report.gaps.length > 0 && (\n                                    <div className=\"p-5 bg-white rounded-xl border border-gray-200\">\n                                        <h3 className=\"flex items-center gap-2 font-semibold text-gray-900 mb-3\">\n                                            <span className=\"text-amber-500\">‚ö†</span> What&apos;s Missing\n                                        </h3>\n                                        <ul className=\"space-y-2\">\n                                            {report.gaps.map((g, i) => (\n                                                <li key={i} className=\"flex items-start gap-2 text-gray-600\">\n                                                    <span className=\"text-amber-400 mt-1\">‚Ä¢</span> {g}\n                                                </li>\n                                            ))}\n                                        </ul>\n                                    </div>\n                                )}\n                            </>\n                        )}\n\n                        {/* Top Fixes */}\n                        {activeTab === \"fixes\" && (\n                            <div className=\"p-5 bg-white rounded-xl border border-gray-200\">\n                                <h3 className=\"font-semibold text-gray-900 mb-4\">Top Fixes ‚Äî Prioritized</h3>\n                                <div className=\"space-y-4\">\n                                    {report.top_fixes?.map((fix, i) => (\n                                        <div key={i} className=\"flex gap-4 p-4 bg-gray-50 rounded-lg\">\n                                            <span className=\"flex-shrink-0 w-8 h-8 flex items-center justify-center bg-indigo-100 text-indigo-600 font-bold rounded-full\">\n                                                {i + 1}\n                                            </span>\n                                            <div className=\"flex-1\">\n                                                <p className=\"text-gray-700\">{fix.fix || fix.text}</p>\n                                                {fix.section_ref && <span className=\"inline-block mt-2 text-xs text-gray-500 bg-gray-200 px-2 py-0.5 rounded\">{fix.section_ref}</span>}\n                                                {fix.impact_level && (\n                                                    <span className={`inline-block mt-2 ml-2 text-xs px-2 py-0.5 rounded\n                                                        ${fix.impact_level === 'high' ? 'bg-red-100 text-red-700' : fix.impact_level === 'medium' ? 'bg-amber-100 text-amber-700' : 'bg-gray-100 text-gray-600'}`}>\n                                                        {fix.impact_level} impact\n                                                    </span>\n                                                )}\n                                            </div>\n                                        </div>\n                                    )) || <p className=\"text-gray-500\">No fixes available</p>}\n                                </div>\n                            </div>\n                        )}\n\n                        {/* By Section */}\n                        {activeTab === \"sections\" && (\n                            <div className=\"space-y-4\">\n                                {report.section_review ? (\n                                    Object.entries(report.section_review).map(([sectionName, section], i) => (\n                                        <div key={i} className=\"p-5 bg-white rounded-xl border border-gray-200\">\n                                            <div className=\"flex items-center justify-between mb-3\">\n                                                <h4 className=\"font-semibold text-gray-900\">{sectionName}</h4>\n                                                {section.grade && (\n                                                    <span className={`px-2 py-1 text-xs font-bold rounded\n                                                        ${section.grade.includes('A') ? 'bg-emerald-100 text-emerald-700' :\n                                                            section.grade.includes('B') ? 'bg-blue-100 text-blue-700' :\n                                                                section.grade.includes('C') ? 'bg-amber-100 text-amber-700' : 'bg-red-100 text-red-700'}`}>\n                                                        {section.grade}\n                                                    </span>\n                                                )}\n                                            </div>\n                                            <div className=\"space-y-2 text-sm\">\n                                                {section.working && (\n                                                    <div className=\"flex gap-2\">\n                                                        <span className=\"text-emerald-500 font-medium\">‚úì Working:</span>\n                                                        <span className=\"text-gray-600\">{section.working}</span>\n                                                    </div>\n                                                )}\n                                                {section.missing && (\n                                                    <div className=\"flex gap-2\">\n                                                        <span className=\"text-amber-500 font-medium\">‚ñ≥ Missing:</span>\n                                                        <span className=\"text-gray-600\">{section.missing}</span>\n                                                    </div>\n                                                )}\n                                                {section.fix && (\n                                                    <div className=\"flex gap-2\">\n                                                        <span className=\"text-indigo-500 font-medium\">‚Üí Fix:</span>\n                                                        <span className=\"text-gray-600\">{section.fix}</span>\n                                                    </div>\n                                                )}\n                                            </div>\n                                        </div>\n                                    ))\n                                ) : (\n                                    <p className=\"text-gray-500 text-center py-8\">Section analysis not available</p>\n                                )}\n                            </div>\n                        )}\n\n                        {/* Bullet Upgrades */}\n                        {activeTab === \"rewrites\" && (\n                            <div className=\"space-y-4\">\n                                {report.rewrites?.map((rw, i) => (\n                                    <div key={i} className=\"p-5 bg-white rounded-xl border border-gray-200\">\n                                        {rw.label && <div className=\"text-xs font-semibold text-indigo-600 uppercase mb-3\">{rw.label}</div>}\n                                        <div className=\"grid md:grid-cols-2 gap-4\">\n                                            <div className=\"p-4 bg-red-50 rounded-lg\">\n                                                <div className=\"text-xs font-medium text-red-600 mb-2\">Original</div>\n                                                <p className=\"text-sm text-gray-700\">{rw.original}</p>\n                                            </div>\n                                            <div className=\"p-4 bg-emerald-50 rounded-lg\">\n                                                <div className=\"text-xs font-medium text-emerald-600 mb-2\">Better</div>\n                                                <p className=\"text-sm text-gray-700\">{rw.better}</p>\n                                                {rw.enhancement_note && (\n                                                    <p className=\"text-xs text-emerald-600 mt-2 italic\">{rw.enhancement_note}</p>\n                                                )}\n                                            </div>\n                                        </div>\n                                    </div>\n                                )) || <p className=\"text-gray-500 text-center py-8\">No rewrites available</p>}\n                            </div>\n                        )}\n\n                        {/* Job Alignment */}\n                        {activeTab === \"alignment\" && (\n                            <>\n                                {(report.job_alignment?.strongly_aligned?.length || report.job_alignment?.underplayed?.length || report.job_alignment?.missing?.length) ? (\n                                    <div className=\"space-y-4\">\n                                        <div className=\"grid md:grid-cols-3 gap-4\">\n                                            <div className=\"p-4 bg-emerald-50 rounded-lg\">\n                                                <h4 className=\"font-semibold text-emerald-700 mb-2\">‚úì Strongly Aligned</h4>\n                                                <ul className=\"space-y-1 text-sm text-gray-600\">\n                                                    {report.job_alignment?.strongly_aligned?.map((item, i) => <li key={i}>‚Ä¢ {item}</li>) || <li className=\"text-gray-400\">None found</li>}\n                                                </ul>\n                                            </div>\n                                            <div className=\"p-4 bg-amber-50 rounded-lg\">\n                                                <h4 className=\"font-semibold text-amber-700 mb-2\">‚ö† Underplayed</h4>\n                                                <ul className=\"space-y-1 text-sm text-gray-600\">\n                                                    {report.job_alignment?.underplayed?.map((item, i) => <li key={i}>‚Ä¢ {item}</li>) || <li className=\"text-gray-400\">None found</li>}\n                                                </ul>\n                                            </div>\n                                            <div className=\"p-4 bg-red-50 rounded-lg\">\n                                                <h4 className=\"font-semibold text-red-700 mb-2\">‚úó Missing/Weak</h4>\n                                                <ul className=\"space-y-1 text-sm text-gray-600\">\n                                                    {report.job_alignment?.missing?.map((item, i) => <li key={i}>‚Ä¢ {item}</li>) || <li className=\"text-gray-400\">None found</li>}\n                                                </ul>\n                                            </div>\n                                        </div>\n\n                                        {/* Role Fit */}\n                                        {report.job_alignment?.role_fit && (\n                                            <div className=\"p-5 bg-white rounded-xl border border-gray-200\">\n                                                <h4 className=\"font-semibold text-gray-900 mb-4\">Where You Read Strongest</h4>\n                                                <div className=\"grid md:grid-cols-2 gap-4 mb-4\">\n                                                    <div>\n                                                        <div className=\"text-sm font-medium text-emerald-600 mb-2\">Best Fit Roles</div>\n                                                        <div className=\"flex flex-wrap gap-2\">\n                                                            {report.job_alignment.role_fit.best_fit_roles?.map((role, i) => (\n                                                                <span key={i} className=\"px-3 py-1 bg-emerald-100 text-emerald-700 text-sm rounded-full\">{role}</span>\n                                                            ))}\n                                                        </div>\n                                                    </div>\n                                                    <div>\n                                                        <div className=\"text-sm font-medium text-amber-600 mb-2\">Stretch Roles</div>\n                                                        <div className=\"flex flex-wrap gap-2\">\n                                                            {report.job_alignment.role_fit.stretch_roles?.map((role, i) => (\n                                                                <span key={i} className=\"px-3 py-1 bg-amber-100 text-amber-700 text-sm rounded-full\">{role}</span>\n                                                            ))}\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div className=\"grid grid-cols-3 gap-4 text-sm\">\n                                                    {report.job_alignment.role_fit.seniority_read && (\n                                                        <div>\n                                                            <div className=\"text-gray-500 mb-1\">Seniority Read</div>\n                                                            <div className=\"font-medium text-gray-900\">{report.job_alignment.role_fit.seniority_read}</div>\n                                                        </div>\n                                                    )}\n                                                    {report.job_alignment.role_fit.industry_signals && (\n                                                        <div>\n                                                            <div className=\"text-gray-500 mb-1\">Industry Signals</div>\n                                                            <div className=\"font-medium text-gray-900\">{report.job_alignment.role_fit.industry_signals.join(\", \")}</div>\n                                                        </div>\n                                                    )}\n                                                    {report.job_alignment.role_fit.company_stage_fit && (\n                                                        <div>\n                                                            <div className=\"text-gray-500 mb-1\">Company Stage Fit</div>\n                                                            <div className=\"font-medium text-gray-900\">{report.job_alignment.role_fit.company_stage_fit}</div>\n                                                        </div>\n                                                    )}\n                                                </div>\n                                            </div>\n                                        )}\n\n                                        {/* Positioning Recommendation */}\n                                        {report.job_alignment?.positioning_suggestion && (\n                                            <div className=\"p-5 bg-white rounded-xl border border-gray-200\">\n                                                <h4 className=\"font-semibold text-gray-900 mb-3\">Positioning Recommendation</h4>\n                                                <p className=\"text-gray-600 leading-relaxed\">\n                                                    {report.job_alignment.positioning_suggestion}\n                                                </p>\n                                            </div>\n                                        )}\n                                    </div>\n                                ) : (\n                                    <div className=\"p-8 bg-white rounded-xl border border-gray-200 text-center\">\n                                        <div className=\"text-3xl mb-2\">üìã</div>\n                                        <p className=\"text-gray-500\">Add a job description to see alignment analysis</p>\n                                    </div>\n                                )}\n                            </>\n                        )}\n\n                        {/* Missing Wins */}\n                        {activeTab === \"wins\" && (\n                            <div className=\"p-5 bg-white rounded-xl border border-gray-200\">\n                                <h3 className=\"font-semibold text-gray-900 mb-2\">Surface Missing Wins</h3>\n                                <p className=\"text-gray-500 text-sm mb-4\">\n                                    Answer these questions to uncover hidden impact your resume isn&apos;t telling yet:\n                                </p>\n                                <div className=\"space-y-3\">\n                                    {report.ideas?.questions?.map((q, i) => (\n                                        <div key={i} className=\"p-4 bg-indigo-50 rounded-lg\">\n                                            <p className=\"font-medium text-gray-900 mb-1\">{q.question}</p>\n                                            {q.archetype && <span className=\"inline-block text-xs bg-indigo-100 text-indigo-600 px-2 py-0.5 rounded mr-2\">{q.archetype}</span>}\n                                            {q.why && <p className=\"text-sm text-gray-600 mt-2\">{q.why}</p>}\n                                        </div>\n                                    )) || report.next_steps?.map((step, i) => (\n                                        <div key={i} className=\"p-4 bg-gray-50 rounded-lg\">\n                                            <p className=\"text-gray-700\">{step}</p>\n                                        </div>\n                                    )) || <p className=\"text-gray-500\">No questions available</p>}\n                                </div>\n                                {report.ideas?.how_to_use && (\n                                    <p className=\"text-sm text-gray-600 mt-4 p-3 bg-gray-50 rounded\">\n                                        <strong>How to use:</strong> {report.ideas.how_to_use}\n                                    </p>\n                                )}\n                            </div>\n                        )}\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n","\"use client\";\n\nimport { useState, useEffect } from \"react\";\n\ninterface HistoryReport {\n    id: string;\n    createdAt: string;\n    score: number;\n    scoreLabel?: string;\n    resumeSnippet?: string;\n}\n\ninterface HistorySidebarProps {\n    isOpen: boolean;\n    onClose: () => void;\n    user?: { email?: string } | null;\n    onSignIn?: () => void;\n    onLoadReport?: (reportId: string) => void;\n}\n\nexport default function HistorySidebar({\n    isOpen,\n    onClose,\n    user,\n    onSignIn,\n    onLoadReport\n}: HistorySidebarProps) {\n    const [reports, setReports] = useState<HistoryReport[]>([]);\n    const [loading, setLoading] = useState(false);\n\n    useEffect(() => {\n        if (isOpen && user?.email) {\n            setLoading(true);\n            fetch(\"/api/reports\")\n                .then(res => res.json())\n                .then(data => {\n                    if (data.ok && Array.isArray(data.reports)) {\n                        setReports(data.reports);\n                    }\n                })\n                .catch(console.error)\n                .finally(() => setLoading(false));\n        }\n    }, [isOpen, user?.email]);\n\n    const formatDate = (dateStr: string) => {\n        try {\n            return new Date(dateStr).toLocaleDateString(undefined, {\n                month: \"short\",\n                day: \"numeric\",\n                year: \"numeric\"\n            });\n        } catch {\n            return dateStr;\n        }\n    };\n\n    return (\n        <>\n            {/* Overlay */}\n            <div\n                className={`fixed inset-0 bg-black/40 z-[100] transition-opacity duration-300\n                    ${isOpen ? \"opacity-100\" : \"opacity-0 pointer-events-none\"}`}\n                onClick={onClose}\n            />\n\n            {/* Sidebar */}\n            <aside\n                className={`fixed top-0 right-0 w-[340px] max-w-full h-screen\n                    bg-white shadow-modal z-[101] flex flex-col\n                    transition-transform duration-300 ease-out\n                    ${isOpen ? \"translate-x-0\" : \"translate-x-full\"}`}\n            >\n                <div className=\"flex items-center justify-between px-5 py-4 border-b border-gray-200\">\n                    <span className=\"font-display text-lg font-bold text-gray-900\">Your Reports</span>\n                    <button\n                        onClick={onClose}\n                        aria-label=\"Close\"\n                        className=\"text-2xl text-gray-500 hover:text-gray-900 transition-colors p-1\"\n                    >\n                        √ó\n                    </button>\n                </div>\n\n                <div className=\"flex-1 p-5 overflow-y-auto\">\n                    {!user?.email ? (\n                        <div className=\"text-center py-10 text-gray-500\">\n                            <div className=\"text-5xl mb-4\">üìä</div>\n                            <div className=\"text-lg font-semibold text-gray-900 mb-2\">\n                                Track your progress\n                            </div>\n                            <p className=\"mb-5\">\n                                Log in to save every analysis, track your score improvements, and compare different versions of your resume.\n                            </p>\n                            <button onClick={onSignIn} className=\"btn-primary w-full\">\n                                Log In to Save History\n                            </button>\n                        </div>\n                    ) : loading ? (\n                        <div className=\"text-center py-10 text-gray-500\">Loading...</div>\n                    ) : reports.length === 0 ? (\n                        <div className=\"text-center py-10 text-gray-500\">\n                            <div className=\"text-5xl mb-4\">üìã</div>\n                            <div className=\"text-lg font-semibold text-gray-900 mb-2\">\n                                No reports yet\n                            </div>\n                            <p>Run an analysis to see your history here.</p>\n                        </div>\n                    ) : (\n                        <div className=\"space-y-3\">\n                            {reports.map((report) => (\n                                <div\n                                    key={report.id}\n                                    onClick={() => onLoadReport?.(report.id)}\n                                    className=\"p-4 bg-white border border-gray-200 rounded-lg cursor-pointer\n                                        hover:border-indigo-500 transition-colors\"\n                                >\n                                    <div className=\"flex justify-between mb-2\">\n                                        <span className=\"font-semibold text-indigo-600\">\n                                            Score: {report.score}\n                                        </span>\n                                        <span className=\"text-xs text-gray-500\">\n                                            {formatDate(report.createdAt)}\n                                        </span>\n                                    </div>\n                                    {report.resumeSnippet && (\n                                        <p className=\"text-xs text-gray-500 leading-relaxed\">\n                                            {report.resumeSnippet.substring(0, 100)}...\n                                        </p>\n                                    )}\n                                </div>\n                            ))}\n                        </div>\n                    )}\n                </div>\n            </aside>\n        </>\n    );\n}\n","export type ResumeFeedbackRequest = {\n  text: string;\n  jobDescription?: string;\n  mode?: \"resume\" | \"resume_ideas\";\n};\n\nexport type ResumeFeedbackResponse = {\n  ok: true;\n  data: {\n    score?: number;\n    score_label?: string;\n    summary?: string;\n    strengths?: string[];\n    gaps?: string[];\n    rewrites?: Array<{ label?: string; original?: string; better?: string; enhancement_note?: string }>;\n    job_alignment?: {\n      strongly_aligned?: string[];\n      underplayed?: string[];\n      missing?: string[];\n    };\n    missing_wins?: string[];\n    next_steps?: string[];\n  };\n  free_uses_remaining?: number;\n  access_tier?: string;\n  access?: string;\n};\n\nexport type ResumeFeedbackError = {\n  ok: false;\n  message?: string;\n  errorCode?: string;\n  free_uses_remaining?: number;\n};\n\nexport async function postResumeFeedback(\n  payload: ResumeFeedbackRequest\n): Promise<ResumeFeedbackResponse | ResumeFeedbackError> {\n  const res = await fetch(`/api/resume-feedback`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    credentials: \"include\",\n    body: JSON.stringify({\n      text: payload.text,\n      jobDescription: payload.jobDescription,\n      mode: payload.mode || \"resume\"\n    })\n  });\n\n  const data = await res.json();\n  return data;\n}\n\nexport async function parseResume(formData: FormData): Promise<{ ok: boolean; text?: string; message?: string }> {\n  const res = await fetch(`/api/parse-resume`, {\n    method: \"POST\",\n    body: formData\n  });\n  const data = await res.json();\n  return data;\n}\n\nexport async function createCheckoutSession(tier: \"24h\" | \"30d\" = \"24h\"): Promise<{ ok: boolean; url?: string; message?: string }> {\n  const res = await fetch(`/api/create-checkout-session`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    credentials: \"include\",\n    body: JSON.stringify({ tier })\n  });\n  const data = await res.json();\n  return data;\n}\n\n// Wrapper for postResumeFeedback that returns data in format expected by WorkspaceClient\nexport async function createResumeFeedback(resumeText: string, jobDescription?: string): Promise<{ ok: boolean; report?: any; message?: string }> {\n  const result = await postResumeFeedback({\n    text: resumeText,\n    jobDescription,\n    mode: \"resume\"\n  });\n\n  console.log(\"[createResumeFeedback] API response:\", result);\n\n  if (result.ok) {\n    // The backend returns the report data in `data` property\n    return {\n      ok: true,\n      report: result.data\n    };\n  }\n\n  return {\n    ok: false,\n    message: result.message || \"Failed to generate report\"\n  };\n}\n"],"names":[],"mappings":"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"}