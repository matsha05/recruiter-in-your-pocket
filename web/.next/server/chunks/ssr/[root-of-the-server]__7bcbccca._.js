module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},51108,(a,b,c)=>{"use strict";b.exports=a.r(40881).vendored.contexts.AppRouterContext},49231,(a,b,c)=>{"use strict";b.exports=a.r(40881).vendored["react-ssr"].ReactServerDOMTurbopackClient},52491,(a,b,c)=>{"use strict";b.exports=a.r(40881).vendored.contexts.HooksClientContext},60703,(a,b,c)=>{"use strict";b.exports=a.r(40881).vendored.contexts.ServerInsertedHtml},65103,a=>{"use strict";var b=a.i(56856),c=a.i(55132),d=a.i(32315),e=a.i(46640),f=a.i(76937),g=a.i(37377),h=a.i(97207);function i({checked:a,onChange:c,disabled:d=!1,size:e="md",className:f=""}){return(0,b.jsx)("button",{type:"button",role:"switch","aria-checked":a,disabled:d,onClick:c,className:`
                toggle
                ${a?"active":""}
                ${d?"opacity-50 cursor-not-allowed":""}
                ${"sm"===e?"w-9 h-5 after:w-4 after:h-4":"w-11 h-6 after:w-5 after:h-5"}
                ${f}
            `.trim()})}function j(){let a=(0,d.useRouter)(),{user:j,signOut:k,refreshUser:l}=(0,f.useAuth)(),[m,n]=(0,c.useState)("profile"),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)(!0),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!0),[E,F]=(0,c.useState)(!0),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(!1);(0,c.useEffect)(()=>{j?.firstName&&(p(j.firstName),r(j.firstName))},[j]),(0,c.useEffect)(()=>{B(document.documentElement.classList.contains("dark"))},[]),(0,c.useEffect)(()=>{let a=async()=>{try{let a=await fetch("/api/passes"),b=await a.json();b.ok&&b.passes&&x(b.passes)}catch{}z(!1)};j?a():z(!1)},[j]);let K=async()=>{if(o.trim()&&o!==q){t(!0),v(!1);try{let a=(0,g.createSupabaseBrowserClient)();await a.auth.updateUser({data:{first_name:o.trim()}}),await l(),r(o.trim()),v(!0),setTimeout(()=>v(!1),3e3)}catch{}t(!1)}},L=async()=>{await k(),a.push("/")},M=async()=>{if(!G)return void H(!0);J(!0);try{await fetch("/api/account",{method:"DELETE"}),await k(),a.push("/?deleted=true")}catch{}J(!1)},N=a=>"30d"===a?"30-Day Campaign Pass":"24-Hour Fix Pass",O=w.find(a=>new Date(a.expires_at)>new Date),P=w.filter(a=>new Date(a.expires_at)<=new Date);return j?(0,b.jsxs)("div",{className:"min-h-screen bg-body",children:[(0,b.jsx)("header",{className:"bg-surface border-b border-subtle",children:(0,b.jsxs)("div",{className:"max-w-5xl mx-auto px-6 py-4 flex items-center justify-between",children:[(0,b.jsx)(e.default,{href:"/",className:"font-display text-lg font-bold text-primary",children:"Recruiter in Your Pocket"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(e.default,{href:"/workspace",className:"text-sm text-secondary hover:text-primary",children:"← Back to Workspace"}),(0,b.jsx)(h.default,{})]})]})}),(0,b.jsxs)("div",{className:"max-w-5xl mx-auto px-6",children:[(0,b.jsxs)("div",{className:"pt-12 pb-8",children:[(0,b.jsx)("h1",{className:"font-display text-2xl font-bold text-primary",children:"Settings"}),(0,b.jsx)("p",{className:"text-muted mt-1",children:"Manage your account, passes, and preferences."})]}),(0,b.jsxs)("div",{className:"flex gap-8 pb-16",children:[(0,b.jsxs)("nav",{className:"w-52 flex-shrink-0",children:[(0,b.jsxs)("div",{className:"mb-6 pb-6 border-b border-subtle",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-primary",children:j.firstName||j.email?.split("@")[0]}),(0,b.jsx)("div",{className:"text-xs text-muted mt-0.5",children:O?N(O.tier):"Free plan"})]}),(0,b.jsx)("ul",{className:"space-y-1",children:[{id:"profile",label:"Profile"},{id:"passes",label:"Passes"},{id:"preferences",label:"Preferences"},{id:"delete",label:"Delete account"}].map(a=>(0,b.jsx)("li",{children:(0,b.jsxs)("button",{onClick:()=>{n(a.id),H(!1)},className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors relative ${m===a.id?"bg-brand-soft text-brand font-medium":"delete"===a.id?"text-muted hover:text-danger hover:bg-hover":"text-secondary hover:bg-hover"}`,children:[m===a.id&&(0,b.jsx)("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-0.5 h-5 bg-brand rounded-r"}),a.label]})},a.id))})]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:["profile"===m&&(0,b.jsxs)("div",{className:"bg-surface rounded-xl border border-subtle p-6",children:[(0,b.jsx)("h2",{className:"font-semibold text-primary",children:"Profile"}),(0,b.jsx)("p",{className:"text-sm text-muted mt-1 mb-6",children:"Update your basic account info."}),(0,b.jsxs)("div",{className:"space-y-5",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-secondary mb-1",children:"Email"}),(0,b.jsx)("input",{type:"email",value:j.email,disabled:!0,className:"input bg-muted cursor-not-allowed text-muted"}),(0,b.jsx)("p",{className:"text-xs text-muted mt-1.5",children:"Used for login and pass access."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-secondary mb-1",children:"Name"}),(0,b.jsx)("input",{type:"text",value:o,onChange:a=>p(a.target.value),placeholder:"Your name",className:"input"})]}),(0,b.jsxs)("div",{className:"pt-4 flex flex-col items-start gap-3",children:[(0,b.jsx)("button",{onClick:K,disabled:s||o===q||!o.trim(),className:"btn-primary",children:s?"Saving...":u?"✓ Saved":"Save changes"}),(0,b.jsx)("button",{onClick:L,className:"text-sm text-muted hover:text-secondary hover:underline",children:"Sign out"})]})]})]}),"passes"===m&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"bg-surface rounded-xl border border-subtle p-6",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"font-semibold text-primary",children:"Your current plan"}),O?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-primary mt-2",children:N(O.tier)}),(0,b.jsx)("p",{className:"text-sm text-muted mt-0.5",children:((a,b)=>{let c=new Date(a);if(c<=new Date)return"Expired";if("30d"===b){let a=c.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`Unlimited full reports until ${a}.`}{let a=c.toLocaleDateString("en-US",{weekday:"long"}),b=c.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});return`Unlimited full reports until ${a} at ${b}.`}})(O.expires_at,O.tier)})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-primary mt-2",children:"Free plan"}),(0,b.jsx)("p",{className:"text-sm text-muted mt-0.5",children:"You can run two full reports at no cost. Upgrade when you are ready for more."})]})]}),O&&(0,b.jsx)("span",{className:"badge-success px-2.5 py-1 text-xs font-medium rounded-full",children:"Active"})]})}),(0,b.jsxs)("div",{className:"bg-surface rounded-xl border border-subtle p-6",children:[(0,b.jsx)("h2",{className:"font-semibold text-primary mb-4",children:"Pass history"}),y?(0,b.jsx)("p",{className:"text-sm text-muted",children:"Loading..."}):0===P.length?(0,b.jsx)("p",{className:"text-sm text-muted",children:"You have not used any passes yet."}):(0,b.jsx)("div",{className:"border border-subtle rounded-lg overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{className:"bg-muted",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"text-left px-4 py-2.5 text-xs font-medium text-muted uppercase tracking-wide",children:"Pass"}),(0,b.jsx)("th",{className:"text-left px-4 py-2.5 text-xs font-medium text-muted uppercase tracking-wide",children:"Date"}),(0,b.jsx)("th",{className:"text-left px-4 py-2.5 text-xs font-medium text-muted uppercase tracking-wide",children:"Status"})]})}),(0,b.jsx)("tbody",{children:P.map(a=>(0,b.jsxs)("tr",{className:"border-t border-subtle",children:[(0,b.jsx)("td",{className:"px-4 py-3 text-primary",children:N(a.tier)}),(0,b.jsxs)("td",{className:"px-4 py-3 text-muted",children:["Used on ",new Date(a.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),(0,b.jsx)("td",{className:"px-4 py-3 text-muted",children:"Completed"})]},a.id))})]})}),(0,b.jsx)("div",{className:"mt-5",children:(0,b.jsx)(e.default,{href:"/workspace",className:"text-sm text-brand hover:underline",children:"Get a new pass →"})})]})]}),"preferences"===m&&(0,b.jsxs)("div",{className:"bg-surface rounded-xl border border-subtle p-6",children:[(0,b.jsx)("h2",{className:"font-semibold text-primary",children:"Preferences"}),(0,b.jsx)("p",{className:"text-sm text-muted mt-1 mb-6",children:"Customize how Recruiter in Your Pocket feels and behaves."}),(0,b.jsxs)("div",{className:"space-y-0",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between py-4 border-b border-subtle",children:[(0,b.jsxs)("div",{className:"pr-4",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-primary",children:"Dark mode"}),(0,b.jsx)("p",{className:"text-xs text-muted mt-0.5",children:"Use a darker theme that is easier on the eyes."})]}),(0,b.jsx)(i,{checked:A,onChange:()=>{let a=!A;B(a),a?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))}})]}),(0,b.jsxs)("div",{className:"flex items-start justify-between py-4 border-b border-subtle",children:[(0,b.jsxs)("div",{className:"pr-4",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-primary",children:"Show sample report link in workspace"}),(0,b.jsx)("p",{className:"text-xs text-muted mt-0.5",children:"Keep a shortcut to the sample report in your workspace."})]}),(0,b.jsx)(i,{checked:C,onChange:()=>D(!C)})]}),(0,b.jsxs)("div",{className:"flex items-start justify-between py-4",children:[(0,b.jsxs)("div",{className:"pr-4",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-primary",children:"Email reminders before a pass expires"}),(0,b.jsx)("p",{className:"text-xs text-muted mt-0.5",children:"Get a quick reminder before your current pass ends."})]}),(0,b.jsx)(i,{checked:E,onChange:()=>F(!E)})]})]})]}),"delete"===m&&(0,b.jsxs)("div",{className:"bg-surface rounded-xl border border-danger/30 p-6",children:[(0,b.jsx)("h2",{className:"font-semibold text-danger",children:"Delete account"}),(0,b.jsx)("p",{className:"text-sm text-muted mt-1 mb-4",children:"Permanently remove your account and all reports from Recruiter in Your Pocket."}),(0,b.jsx)("p",{className:"text-sm text-danger mb-6",children:"This action cannot be undone."}),(0,b.jsxs)("div",{className:"flex flex-col items-start gap-3",children:[(0,b.jsx)("button",{onClick:M,disabled:I,className:"btn-destructive",children:I?"Deleting...":G?"Click again to confirm":"Delete account"}),G&&(0,b.jsx)("button",{onClick:()=>H(!1),className:"text-sm text-muted hover:text-secondary hover:underline",children:"Go back to settings"})]})]})]})]})]})]}):(0,b.jsx)("div",{className:"min-h-screen bg-body flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-secondary mb-4",children:"Please sign in to view settings"}),(0,b.jsx)(e.default,{href:"/",className:"btn-primary",children:"Go Home"})]})})}a.s(["default",()=>j],65103)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__7bcbccca._.js.map