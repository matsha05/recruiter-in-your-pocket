module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},51108,(a,b,c)=>{"use strict";b.exports=a.r(40881).vendored.contexts.AppRouterContext},49231,(a,b,c)=>{"use strict";b.exports=a.r(40881).vendored["react-ssr"].ReactServerDOMTurbopackClient},52491,(a,b,c)=>{"use strict";b.exports=a.r(40881).vendored.contexts.HooksClientContext},60703,(a,b,c)=>{"use strict";b.exports=a.r(40881).vendored.contexts.ServerInsertedHtml},53123,a=>{"use strict";var b=a.i(56856),c=a.i(55132),d=a.i(37377);function e({isOpen:a,onClose:e,onSuccess:f}){let[g,h]=(0,c.useState)(""),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)("email"),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(!1);if(!a)return null;let u=async()=>{if(!g.trim())return void r("Please enter your email");p(!0),r(null);try{let a=await fetch("/api/auth/send-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:g.trim()})}),b=await a.json();b.ok?n("code"):r(b.message||"Failed to send code")}catch(a){r("Something went wrong. Please try again.")}finally{p(!1)}},v=async()=>{if(!i.trim())return void r("Please enter the code");p(!0),r(null);try{let a=await fetch("/api/auth/verify-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:g.trim(),code:i.trim()})}),b=await a.json();b.ok?b.user?.firstName?(f?.(),e()):(t(!0),n("name")):r(b.message||"Invalid code")}catch(a){r("Something went wrong. Please try again.")}finally{p(!1)}},w=async()=>{if(!k.trim())return void r("Please enter your first name");p(!0),r(null);try{let a=(0,d.createSupabaseBrowserClient)(),{error:b}=await a.auth.updateUser({data:{first_name:k.trim()}});if(b)return void r(b.message);f?.(),e()}catch(a){r("Something went wrong. Please try again.")}finally{p(!1)}},x=()=>{h(""),j(""),l(""),n("email"),r(null),t(!1),e()};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[1000] p-5",onClick:a=>a.target===a.currentTarget&&x(),children:(0,b.jsxs)("div",{className:"bg-surface rounded-2xl shadow-modal w-full max-w-[400px] p-8 relative",children:[(0,b.jsx)("button",{onClick:x,"aria-label":"Close",className:"absolute top-4 right-4 text-muted hover:text-primary transition-colors p-2",children:(0,b.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,b.jsx)("path",{d:"M15 5L5 15M5 5L15 15",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})}),(0,b.jsxs)("div",{className:"text-center mb-6",children:[(0,b.jsxs)("h2",{className:"font-display text-xl font-bold text-primary mb-2",children:["email"===m&&"Sign in or create account","code"===m&&"Check your email","name"===m&&"One last thing"]}),(0,b.jsxs)("p",{className:"text-muted text-sm",children:["email"===m&&"We'll send you a login code. No password needed.","code"===m&&`We sent an 8-digit code to ${g}`,"name"===m&&"What should we call you?"]})]}),"email"===m&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("input",{type:"email",value:g,onChange:a=>h(a.target.value),placeholder:"you@example.com",className:"input",autoFocus:!0,onKeyDown:a=>"Enter"===a.key&&u()}),q&&(0,b.jsx)("div",{className:"text-danger text-sm text-center",children:q}),(0,b.jsx)("button",{onClick:u,disabled:o,className:"btn-primary w-full",children:o?"Sending...":"Send Code"})]}),"code"===m&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("input",{type:"text",value:i,onChange:a=>j(a.target.value.replace(/\D/g,"").slice(0,8)),placeholder:"00000000",className:"input text-center text-2xl tracking-widest font-mono",autoFocus:!0,onKeyDown:a=>"Enter"===a.key&&v()}),q&&(0,b.jsx)("div",{className:"text-danger text-sm text-center",children:q}),(0,b.jsx)("button",{onClick:v,disabled:o||8!==i.length,className:"btn-primary w-full",children:o?"Verifying...":"Verify Code"}),(0,b.jsx)("button",{onClick:()=>{n("email"),j(""),r(null)},className:"btn-ghost w-full text-sm",children:"Use a different email"})]}),"name"===m&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("input",{type:"text",value:k,onChange:a=>l(a.target.value),placeholder:"Your first name",className:"input",autoFocus:!0,onKeyDown:a=>"Enter"===a.key&&w()}),q&&(0,b.jsx)("div",{className:"text-danger text-sm text-center",children:q}),(0,b.jsx)("button",{onClick:w,disabled:o||!k.trim(),className:"btn-primary w-full",children:o?"Saving...":"Continue"}),(0,b.jsx)("button",{onClick:()=>{f?.(),e()},className:"btn-ghost w-full text-sm",children:"Skip for now"})]}),(0,b.jsx)("p",{className:"text-center text-xs text-muted mt-4",children:"By continuing, you agree to our Terms and Privacy Policy."})]})})}a.s(["default",()=>e])},54220,a=>{"use strict";var b=a.i(56856),c=a.i(55132),d=a.i(76937);function e({isOpen:a,onClose:e,freeUsesRemaining:f=0,hasCurrentReport:g=!1,onSuccess:h}){let{user:i}=(0,d.useAuth)(),[j,k]=(0,c.useState)("24h"),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),r=!!i;if(!a)return null;let s=async()=>{o(!0),q(null);let a=r?i.email:l.trim();if(!a){q("Please enter your email"),o(!1);return}try{let b=await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tier:j,email:a})}),c=await b.json();c.ok&&c.url?window.location.href=c.url:q(c.message||"Failed to start checkout")}catch(a){q(a.message||"Something went wrong")}finally{o(!1)}},t=()=>{m(""),q(null),e()};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[1000] p-5",onClick:a=>a.target===a.currentTarget&&t(),children:(0,b.jsxs)("div",{className:"bg-surface rounded-2xl shadow-modal w-full max-w-[520px] p-8 relative max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)("button",{onClick:t,"aria-label":"Close",className:"absolute top-4 right-4 text-muted hover:text-primary transition-colors p-2",children:(0,b.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,b.jsx)("path",{d:"M15 5L5 15M5 5L15 15",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})}),(0,b.jsxs)("div",{className:"text-center mb-6",children:[(0,b.jsx)("h2",{className:"font-display text-xl font-bold text-primary mb-2",children:2===f?"You have 2 free reviews left":1===f?"You have 1 free review left":"You've used your free reviews. Pick a pass to keep going."}),(0,b.jsx)("p",{className:"text-muted",children:"Pick a pass that fits your timeline. No subscriptions."})]}),(0,b.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>k("24h"),className:`flex-1 p-5 rounded-xl text-center transition-all
                            ${"24h"===j?"border-2 border-brand bg-brand-soft":"border-2 border-subtle hover:border-brand"}`,children:[(0,b.jsx)("div",{className:"inline-block px-3 py-1 text-[11px] font-semibold uppercase tracking-wide rounded bg-brand text-white mb-3",children:"Most popular"}),(0,b.jsx)("div",{className:"text-3xl font-extrabold text-brand mb-1",children:"$9"}),(0,b.jsx)("div",{className:"font-semibold text-primary mb-2",children:"24-Hour Fix Pass"}),(0,b.jsx)("p",{className:"text-xs text-muted leading-relaxed",children:"Unlimited reports for 24 hours."})]}),(0,b.jsxs)("button",{type:"button",onClick:()=>k("30d"),className:`flex-1 p-5 rounded-xl text-center transition-all
                            ${"30d"===j?"border-2 border-success bg-success-soft":"border-2 border-subtle hover:border-success"}`,children:[(0,b.jsx)("div",{className:"inline-block px-3 py-1 text-[11px] font-semibold uppercase tracking-wide rounded bg-[var(--status-success)] text-white mb-3",children:"Best value"}),(0,b.jsx)("div",{className:"text-3xl font-extrabold text-success mb-1",children:"$39"}),(0,b.jsx)("div",{className:"font-semibold text-primary mb-2",children:"30-Day Campaign Pass"}),(0,b.jsx)("p",{className:"text-xs text-muted leading-relaxed",children:"Unlimited reports for 30 days."})]})]}),(0,b.jsx)("div",{className:"bg-muted rounded-xl p-5 mb-4",children:r?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("p",{className:"text-sm text-secondary mb-4",children:["You're getting this pass for ",(0,b.jsx)("strong",{className:"text-primary",children:i.email})]}),(0,b.jsx)("button",{type:"button",onClick:s,disabled:n,className:"btn-primary w-full",children:n?"Processing...":`Get ${"24h"===j?"24-Hour":"30-Day"} Pass â†’`})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Your email"}),(0,b.jsx)("input",{type:"email",value:l,onChange:a=>m(a.target.value),placeholder:"you@example.com",className:"input mb-4"}),(0,b.jsx)("button",{type:"button",onClick:s,disabled:n||!l.trim(),className:"btn-primary w-full",children:n?"Processing...":`Continue to checkout â†’`}),(0,b.jsx)("p",{className:"text-xs text-muted text-center mt-3",children:"Your email links your pass to any device."})]})}),p&&(0,b.jsx)("div",{className:"text-danger text-sm text-center mb-4",children:p}),g&&(0,b.jsx)("p",{className:"text-center text-xs text-muted mb-2",children:"Your current report stays here while you upgrade."}),(0,b.jsx)("p",{className:"text-center text-xs text-muted",children:"ðŸ”’ No recurring charges â€¢ Instant access"})]})})}a.s(["default",()=>e])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__998e124f._.js.map