(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19609,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},25203,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={assign:function(){return o},searchParamsToUrlQuery:function(){return n},urlQueryToSearchParams:function(){return i}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});function n(e){let t={};for(let[s,r]of e.entries()){let e=t[s];void 0===e?t[s]=r:Array.isArray(e)?e.push(r):t[s]=[e,r]}return t}function l(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function i(e){let t=new URLSearchParams;for(let[s,r]of Object.entries(e))if(Array.isArray(r))for(let e of r)t.append(s,l(e));else t.set(s,l(r));return t}function o(e,...t){for(let s of t){for(let t of s.keys())e.delete(t);for(let[t,r]of s.entries())e.append(t,r)}return e}},71746,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={formatUrl:function(){return i},formatWithValidation:function(){return c},urlObjectKeys:function(){return o}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});let n=e.r(79510)._(e.r(25203)),l=/https?|ftp|gopher|file/;function i(e){let{auth:t,hostname:s}=e,r=e.protocol||"",a=e.pathname||"",i=e.hash||"",o=e.query||"",c=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?c=t+e.host:s&&(c=t+(~s.indexOf(":")?`[${s}]`:s),e.port&&(c+=":"+e.port)),o&&"object"==typeof o&&(o=String(n.urlQueryToSearchParams(o)));let d=e.search||o&&`?${o}`||"";return r&&!r.endsWith(":")&&(r+=":"),e.slashes||(!r||l.test(r))&&!1!==c?(c="//"+(c||""),a&&"/"!==a[0]&&(a="/"+a)):c||(c=""),i&&"#"!==i[0]&&(i="#"+i),d&&"?"!==d[0]&&(d="?"+d),a=a.replace(/[?#]/g,encodeURIComponent),d=d.replace("#","%23"),`${r}${c}${a}${d}${i}`}let o=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function c(e){return i(e)}},15232,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"useMergedRef",{enumerable:!0,get:function(){return a}});let r=e.r(30878);function a(e,t){let s=(0,r.useRef)(null),a=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=s.current;e&&(s.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(s.current=n(e,r)),t&&(a.current=n(t,r))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let s=e(t);return"function"==typeof s?s:()=>e(null)}}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},9008,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={DecodeError:function(){return g},MiddlewareNotFoundError:function(){return v},MissingStaticPage:function(){return y},NormalizeError:function(){return b},PageNotFoundError:function(){return j},SP:function(){return h},ST:function(){return f},WEB_VITALS:function(){return n},execOnce:function(){return l},getDisplayName:function(){return u},getLocationOrigin:function(){return c},getURL:function(){return d},isAbsoluteUrl:function(){return o},isResSent:function(){return m},loadGetInitialProps:function(){return p},normalizeRepeatedSlashes:function(){return x},stringifyError:function(){return N}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});let n=["CLS","FCP","FID","INP","LCP","TTFB"];function l(e){let t,s=!1;return(...r)=>(s||(s=!0,t=e(...r)),t)}let i=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,o=e=>i.test(e);function c(){let{protocol:e,hostname:t,port:s}=window.location;return`${e}//${t}${s?":"+s:""}`}function d(){let{href:e}=window.location,t=c();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function m(e){return e.finished||e.headersSent}function x(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function p(e,t){let s=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await p(t.Component,t.ctx)}:{};let r=await e.getInitialProps(t);if(s&&m(s))return r;if(!r)throw Object.defineProperty(Error(`"${u(e)}.getInitialProps()" should resolve to an object. But found "${r}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return r}let h="undefined"!=typeof performance,f=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class g extends Error{}class b extends Error{}class j extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class y extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class v extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function N(e){return JSON.stringify({message:e.message,stack:e.stack})}},68988,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"isLocalURL",{enumerable:!0,get:function(){return n}});let r=e.r(9008),a=e.r(98018);function n(e){if(!(0,r.isAbsoluteUrl)(e))return!0;try{let t=(0,r.getLocationOrigin)(),s=new URL(e,t);return s.origin===t&&(0,a.hasBasePath)(s.pathname)}catch(e){return!1}}},12491,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"errorOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},4561,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={default:function(){return g},useLinkStatus:function(){return j}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});let n=e.r(79510),l=e.r(14294),i=n._(e.r(30878)),o=e.r(71746),c=e.r(69168),d=e.r(15232),u=e.r(9008),m=e.r(69343);e.r(19609);let x=e.r(93505),p=e.r(68988),h=e.r(91544);function f(e){return"string"==typeof e?e:(0,o.formatUrl)(e)}function g(t){var s;let r,a,n,[o,g]=(0,i.useOptimistic)(x.IDLE_LINK_STATUS),j=(0,i.useRef)(null),{href:y,as:v,children:N,prefetch:w=null,passHref:k,replace:C,shallow:S,scroll:_,onClick:P,onMouseEnter:R,onTouchStart:O,legacyBehavior:T=!1,onNavigate:E,ref:L,unstable_dynamicOnHover:F,...M}=t;r=N,T&&("string"==typeof r||"number"==typeof r)&&(r=(0,l.jsx)("a",{children:r}));let D=i.default.useContext(c.AppRouterContext),A=!1!==w,W=!1!==w?null===(s=w)||"auto"===s?h.FetchStrategy.PPR:h.FetchStrategy.Full:h.FetchStrategy.PPR,{href:U,as:$}=i.default.useMemo(()=>{let e=f(y);return{href:e,as:v?f(v):e}},[y,v]);if(T){if(r?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});a=i.default.Children.only(r)}let I=T?a&&"object"==typeof a&&a.ref:L,B=i.default.useCallback(e=>(null!==D&&(j.current=(0,x.mountLinkInstance)(e,U,D,W,A,g)),()=>{j.current&&((0,x.unmountLinkForCurrentNavigation)(j.current),j.current=null),(0,x.unmountPrefetchableInstance)(e)}),[A,U,D,W,g]),z={ref:(0,d.useMergedRef)(B,I),onClick(t){T||"function"!=typeof P||P(t),T&&a.props&&"function"==typeof a.props.onClick&&a.props.onClick(t),!D||t.defaultPrevented||function(t,s,r,a,n,l,o){if("undefined"!=typeof window){let c,{nodeName:d}=t.currentTarget;if("A"===d.toUpperCase()&&((c=t.currentTarget.getAttribute("target"))&&"_self"!==c||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,p.isLocalURL)(s)){n&&(t.preventDefault(),location.replace(s));return}if(t.preventDefault(),o){let e=!1;if(o({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:u}=e.r(89867);i.default.startTransition(()=>{u(r||s,n?"replace":"push",l??!0,a.current)})}}(t,U,$,j,C,_,E)},onMouseEnter(e){T||"function"!=typeof R||R(e),T&&a.props&&"function"==typeof a.props.onMouseEnter&&a.props.onMouseEnter(e),D&&A&&(0,x.onNavigationIntent)(e.currentTarget,!0===F)},onTouchStart:function(e){T||"function"!=typeof O||O(e),T&&a.props&&"function"==typeof a.props.onTouchStart&&a.props.onTouchStart(e),D&&A&&(0,x.onNavigationIntent)(e.currentTarget,!0===F)}};return(0,u.isAbsoluteUrl)($)?z.href=$:T&&!k&&("a"!==a.type||"href"in a.props)||(z.href=(0,m.addBasePath)($)),n=T?i.default.cloneElement(a,z):(0,l.jsx)("a",{...M,...z,children:r}),(0,l.jsx)(b.Provider,{value:o,children:n})}e.r(12491);let b=(0,i.createContext)(x.IDLE_LINK_STATUS),j=()=>(0,i.useContext)(b);("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},65946,e=>{"use strict";var t=e.i(14294),s=e.i(30878);function r(){let[e,r]=(0,s.useState)(!1),[a,n]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{n(!0);let e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,s="dark"===e||!e&&t;r(s),s&&(document.documentElement.setAttribute("data-theme","dark"),document.documentElement.classList.add("dark"))},[]),a)?(0,t.jsx)("button",{className:"p-2 rounded-lg text-secondary hover:bg-hover transition-colors",type:"button","aria-label":"Toggle dark mode",title:"Toggle dark mode",onClick:()=>{let t=!e;r(t),t?(document.documentElement.setAttribute("data-theme","dark"),document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.removeAttribute("data-theme"),document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},children:(0,t.jsx)("span",{className:"text-xl",children:e?"â˜€ï¸":"ðŸŒ™"})}):(0,t.jsx)("button",{className:"p-2 rounded-lg text-secondary hover:bg-hover transition-colors",type:"button","aria-label":"Toggle dark mode",title:"Toggle dark mode",children:(0,t.jsx)("span",{className:"text-xl",children:"ðŸŒ™"})})}e.s(["default",()=>r])},24271,e=>{"use strict";var t=e.i(14294),s=e.i(30878),r=e.i(94667);function a({isOpen:e,onClose:a,onSuccess:n}){let[l,i]=(0,s.useState)(""),[o,c]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),[m,x]=(0,s.useState)("email"),[p,h]=(0,s.useState)(!1),[f,g]=(0,s.useState)(null),[b,j]=(0,s.useState)(!1);if(!e)return null;let y=async()=>{if(!l.trim())return void g("Please enter your email");h(!0),g(null);try{let e=await fetch("/api/auth/send-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l.trim()})}),t=await e.json();t.ok?x("code"):g(t.message||"Failed to send code")}catch(e){g("Something went wrong. Please try again.")}finally{h(!1)}},v=async()=>{if(!o.trim())return void g("Please enter the code");h(!0),g(null);try{let e=await fetch("/api/auth/verify-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l.trim(),code:o.trim()})}),t=await e.json();t.ok?t.user?.firstName?(n?.(),a()):(j(!0),x("name")):g(t.message||"Invalid code")}catch(e){g("Something went wrong. Please try again.")}finally{h(!1)}},N=async()=>{if(!d.trim())return void g("Please enter your first name");h(!0),g(null);try{let e=(0,r.createSupabaseBrowserClient)(),{error:t}=await e.auth.updateUser({data:{first_name:d.trim()}});if(t)return void g(t.message);n?.(),a()}catch(e){g("Something went wrong. Please try again.")}finally{h(!1)}},w=()=>{i(""),c(""),u(""),x("email"),g(null),j(!1),a()};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[1000] p-5",onClick:e=>e.target===e.currentTarget&&w(),children:(0,t.jsxs)("div",{className:"bg-surface rounded-2xl shadow-modal w-full max-w-[400px] p-8 relative",children:[(0,t.jsx)("button",{onClick:w,"aria-label":"Close",className:"absolute top-4 right-4 text-muted hover:text-primary transition-colors p-2",children:(0,t.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,t.jsx)("path",{d:"M15 5L5 15M5 5L15 15",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})}),(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsxs)("h2",{className:"font-display text-xl font-bold text-primary mb-2",children:["email"===m&&"Sign in or create account","code"===m&&"Check your email","name"===m&&"One last thing"]}),(0,t.jsxs)("p",{className:"text-muted text-sm",children:["email"===m&&"We'll send you a login code. No password needed.","code"===m&&`We sent an 8-digit code to ${l}`,"name"===m&&"What should we call you?"]})]}),"email"===m&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("input",{type:"email",value:l,onChange:e=>i(e.target.value),placeholder:"you@example.com",className:"input",autoFocus:!0,onKeyDown:e=>"Enter"===e.key&&y()}),f&&(0,t.jsx)("div",{className:"text-danger text-sm text-center",children:f}),(0,t.jsx)("button",{onClick:y,disabled:p,className:"btn-primary w-full",children:p?"Sending...":"Send Code"})]}),"code"===m&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("input",{type:"text",value:o,onChange:e=>c(e.target.value.replace(/\D/g,"").slice(0,8)),placeholder:"00000000",className:"input text-center text-2xl tracking-widest font-mono",autoFocus:!0,onKeyDown:e=>"Enter"===e.key&&v()}),f&&(0,t.jsx)("div",{className:"text-danger text-sm text-center",children:f}),(0,t.jsx)("button",{onClick:v,disabled:p||8!==o.length,className:"btn-primary w-full",children:p?"Verifying...":"Verify Code"}),(0,t.jsx)("button",{onClick:()=>{x("email"),c(""),g(null)},className:"btn-ghost w-full text-sm",children:"Use a different email"})]}),"name"===m&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),placeholder:"Your first name",className:"input",autoFocus:!0,onKeyDown:e=>"Enter"===e.key&&N()}),f&&(0,t.jsx)("div",{className:"text-danger text-sm text-center",children:f}),(0,t.jsx)("button",{onClick:N,disabled:p||!d.trim(),className:"btn-primary w-full",children:p?"Saving...":"Continue"}),(0,t.jsx)("button",{onClick:()=>{n?.(),a()},className:"btn-ghost w-full text-sm",children:"Skip for now"})]}),(0,t.jsx)("p",{className:"text-center text-xs text-muted mt-4",children:"By continuing, you agree to our Terms and Privacy Policy."})]})})}e.s(["default",()=>a])},53913,(e,t,s)=>{t.exports=e.r(87603)},23201,e=>{"use strict";var t=e.i(14294),s=e.i(30878),r=e.i(95535);function a({isOpen:e,onClose:a,freeUsesRemaining:n=0,hasCurrentReport:l=!1,onSuccess:i}){let{user:o}=(0,r.useAuth)(),[c,d]=(0,s.useState)("24h"),[u,m]=(0,s.useState)(""),[x,p]=(0,s.useState)(!1),[h,f]=(0,s.useState)(null),g=!!o;if(!e)return null;let b=async()=>{p(!0),f(null);let e=g?o.email:u.trim();if(!e){f("Please enter your email"),p(!1);return}try{let t=await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tier:c,email:e})}),s=await t.json();s.ok&&s.url?window.location.href=s.url:f(s.message||"Failed to start checkout")}catch(e){f(e.message||"Something went wrong")}finally{p(!1)}},j=()=>{m(""),f(null),a()};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[1000] p-5",onClick:e=>e.target===e.currentTarget&&j(),children:(0,t.jsxs)("div",{className:"bg-surface rounded-2xl shadow-modal w-full max-w-[520px] p-8 relative max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)("button",{onClick:j,"aria-label":"Close",className:"absolute top-4 right-4 text-muted hover:text-primary transition-colors p-2",children:(0,t.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,t.jsx)("path",{d:"M15 5L5 15M5 5L15 15",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})}),(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("h2",{className:"font-display text-xl font-bold text-primary mb-2",children:2===n?"You have 2 free reviews left":1===n?"You have 1 free review left":"You've used your free reviews. Pick a pass to keep going."}),(0,t.jsx)("p",{className:"text-muted",children:"Pick a pass that fits your timeline. No subscriptions."})]}),(0,t.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>d("24h"),className:`flex-1 p-5 rounded-xl text-center transition-all
                            ${"24h"===c?"border-2 border-brand bg-brand-soft":"border-2 border-subtle hover:border-brand"}`,children:[(0,t.jsx)("div",{className:"inline-block px-3 py-1 text-[11px] font-semibold uppercase tracking-wide rounded bg-brand text-white mb-3",children:"Most popular"}),(0,t.jsx)("div",{className:"text-3xl font-extrabold text-brand mb-1",children:"$9"}),(0,t.jsx)("div",{className:"font-semibold text-primary mb-2",children:"24-Hour Fix Pass"}),(0,t.jsx)("p",{className:"text-xs text-muted leading-relaxed",children:"Unlimited reports for 24 hours."})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>d("30d"),className:`flex-1 p-5 rounded-xl text-center transition-all
                            ${"30d"===c?"border-2 border-success bg-success-soft":"border-2 border-subtle hover:border-success"}`,children:[(0,t.jsx)("div",{className:"inline-block px-3 py-1 text-[11px] font-semibold uppercase tracking-wide rounded bg-[var(--status-success)] text-white mb-3",children:"Best value"}),(0,t.jsx)("div",{className:"text-3xl font-extrabold text-success mb-1",children:"$39"}),(0,t.jsx)("div",{className:"font-semibold text-primary mb-2",children:"30-Day Campaign Pass"}),(0,t.jsx)("p",{className:"text-xs text-muted leading-relaxed",children:"Unlimited reports for 30 days."})]})]}),(0,t.jsx)("div",{className:"bg-muted rounded-xl p-5 mb-4",children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{className:"text-sm text-secondary mb-4",children:["You're getting this pass for ",(0,t.jsx)("strong",{className:"text-primary",children:o.email})]}),(0,t.jsx)("button",{type:"button",onClick:b,disabled:x,className:"btn-primary w-full",children:x?"Processing...":`Get ${"24h"===c?"24-Hour":"30-Day"} Pass â†’`})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Your email"}),(0,t.jsx)("input",{type:"email",value:u,onChange:e=>m(e.target.value),placeholder:"you@example.com",className:"input mb-4"}),(0,t.jsx)("button",{type:"button",onClick:b,disabled:x||!u.trim(),className:"btn-primary w-full",children:x?"Processing...":`Continue to checkout â†’`}),(0,t.jsx)("p",{className:"text-xs text-muted text-center mt-3",children:"Your email links your pass to any device."})]})}),h&&(0,t.jsx)("div",{className:"text-danger text-sm text-center mb-4",children:h}),l&&(0,t.jsx)("p",{className:"text-center text-xs text-muted mb-2",children:"Your current report stays here while you upgrade."}),(0,t.jsx)("p",{className:"text-center text-xs text-muted",children:"ðŸ”’ No recurring charges â€¢ Instant access"})]})})}e.s(["default",()=>a])},74451,e=>{"use strict";var t=e.i(14294),s=e.i(30878),r=e.i(53913),a=e.i(95535),n=e.i(4561),l=e.i(65946);function i({user:e,onNewReport:r,onSampleReport:a,onSignIn:i,onSignOut:o,onHistory:c}){let[d,u]=(0,s.useState)(!1),m=e?.firstName?.[0]||e?.email?.[0]?.toUpperCase()||"?";return(0,t.jsxs)("header",{className:"flex items-center justify-between px-6 py-4 bg-surface border-b border-subtle",children:[(0,t.jsx)(n.default,{href:"/",className:"font-display font-bold text-lg text-primary hover:text-brand dark:hover:text-brand-strong transition-colors",children:"Recruiter in Your Pocket"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{className:"btn-ghost",onClick:a,children:"ðŸ“„ Sample Report"}),(0,t.jsxs)("button",{onClick:r,className:"inline-flex items-center gap-2 px-4 py-2 bg-success text-white  font-semibold rounded-lg shadow-button hover:opacity-90  transition-all duration-200",children:[(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:(0,t.jsx)("path",{d:"M12 8V16M8 12H16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),"New Report"]}),e?(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("button",{onClick:()=>u(!d),className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-hover transition-colors",children:[(0,t.jsx)("span",{className:"w-8 h-8 flex items-center justify-center bg-brand text-white rounded-full font-semibold text-sm",children:m}),(0,t.jsx)("span",{className:"text-sm text-primary max-w-[120px] truncate",children:e.firstName||e.email}),(0,t.jsx)("span",{className:"text-muted text-xs",children:"â–¾"})]}),d&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)}),(0,t.jsxs)("div",{className:"absolute right-0 top-full mt-1 w-56 bg-surface border border-subtle rounded-xl shadow-modal z-50 py-2",children:[(0,t.jsx)("div",{className:"px-4 py-2 text-xs text-muted truncate",children:e.email}),(0,t.jsx)("div",{className:"border-t border-subtle my-1"}),(0,t.jsxs)("button",{onClick:()=>{c?.(),u(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-secondary hover:bg-brand-soft transition-colors",children:[(0,t.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",children:[(0,t.jsx)("path",{d:"M3 7C3 4.239 4.239 3 7 3H17C19.761 3 21 4.239 21 7V17C21 19.761 19.761 21 17 21H7C4.239 21 3 19.761 3 17V7Z",stroke:"currentColor",strokeWidth:"1.5"}),(0,t.jsx)("path",{d:"M7 8H17M7 12H17M7 16H13",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]}),"My Reports"]}),(0,t.jsxs)("button",{onClick:()=>{r?.(),u(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-secondary hover:bg-brand-soft transition-colors",children:[(0,t.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",children:(0,t.jsx)("path",{d:"M12 8V16M8 12H16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})}),"New Report"]}),(0,t.jsx)("div",{className:"border-t border-subtle my-1"}),(0,t.jsxs)(n.default,{href:"/",className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-secondary hover:bg-brand-soft transition-colors",onClick:()=>u(!1),children:[(0,t.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",children:(0,t.jsx)("path",{d:"M11 6L5 12M5 12L11 18M5 12H19",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),"Home"]}),(0,t.jsxs)(n.default,{href:"/settings",className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-secondary hover:bg-brand-soft transition-colors",onClick:()=>u(!1),children:[(0,t.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",children:[(0,t.jsx)("path",{d:"M12 15a3 3 0 100-6 3 3 0 000 6z",stroke:"currentColor",strokeWidth:"1.5"}),(0,t.jsx)("path",{d:"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z",stroke:"currentColor",strokeWidth:"1.5"})]}),"Settings"]}),(0,t.jsx)("button",{onClick:()=>{o?.(),u(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-danger hover:bg-warning-soft transition-colors",children:"Sign Out"})]})]})]}):(0,t.jsx)("button",{className:"btn-ghost font-semibold",onClick:i,children:"Sign In"}),(0,t.jsx)(l.default,{})]})]})}function o({resumeText:e,jobDescription:r,onResumeTextChange:a,onJobDescChange:n,onFileSelect:l,onRun:i,isLoading:o,freeUsesRemaining:c}){let[d,u]=(0,s.useState)(null),[m,x]=(0,s.useState)(!1),p=(0,s.useRef)(null),h=e.length;return(0,t.jsxs)("div",{className:"bg-surface p-6 flex flex-col gap-6 overflow-y-auto h-full",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-semibold text-primary text-sm",children:"Your Resume"}),(0,t.jsx)("span",{className:"text-muted text-xs",children:"PDF, DOCX, or paste text"})]}),(0,t.jsxs)("div",{className:`flex flex-col items-center justify-center gap-3 p-6
                            border-2 border-dashed rounded-xl cursor-pointer
                            transition-all duration-200
                            ${m?"border-brand bg-brand-soft":"border-subtle hover:border-brand hover:bg-brand-soft/30"}`,onClick:e=>{e.target!==e.currentTarget&&e.target.closest("input")||p.current?.click()},onDragOver:e=>{e.preventDefault(),x(!0)},onDragLeave:()=>x(!1),onDrop:e=>{e.preventDefault(),x(!1);let t=e.dataTransfer.files?.[0];t&&(u(t.name),l(t))},children:[(0,t.jsx)("svg",{className:"w-8 h-8 text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,t.jsx)("div",{className:"text-primary text-sm font-medium",children:"Drop your resume here or click to upload"}),(0,t.jsx)("div",{className:"text-muted text-xs",children:"Supports PDF and DOCX files"}),(0,t.jsx)("input",{type:"file",ref:p,className:"hidden",accept:".pdf,.docx,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document",onChange:e=>{let t=e.target.files?.[0];t&&(u(t.name),l(t))},onClick:e=>e.stopPropagation()})]}),d&&(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 bg-brand-soft rounded-lg",children:[(0,t.jsx)("span",{className:"text-brand font-medium text-sm",children:d}),(0,t.jsx)("button",{className:"text-muted hover:text-danger text-xs transition-colors",onClick:()=>{u(null),p.current&&(p.current.value="")},children:"âœ• Remove"})]}),(0,t.jsx)("div",{className:"text-center text-muted text-sm py-2",children:"â€” or paste â€”"}),(0,t.jsx)("textarea",{value:e,onChange:e=>a(e.target.value),placeholder:"Paste your resume text here...",className:"textarea min-h-[200px]"}),h>0&&h<1500&&(0,t.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-warning-soft border border-amber-200 rounded-lg",children:[(0,t.jsx)("div",{className:"text-lg",children:"âš ï¸"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-semibold text-primary text-sm",children:"Resume looks short"}),(0,t.jsxs)("p",{className:"text-secondary text-xs mt-1",children:["We found ",h," characters. Most resumes have 1,500+ characters. You might get limited feedback."]})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-semibold text-primary text-sm",children:"Job Description"}),(0,t.jsx)("span",{className:"text-muted text-xs",children:"Optional â€” enables alignment analysis"})]}),(0,t.jsx)("textarea",{value:r,onChange:e=>n(e.target.value),className:"textarea min-h-[120px]",placeholder:"Paste the job description to see how well your resume aligns..."})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2 pt-4 border-t border-subtle mt-auto",children:[(0,t.jsxs)("button",{className:"btn-primary w-full",onClick:i,disabled:o||!e.trim()&&!d,children:[(0,t.jsx)("span",{children:o?"Analyzing...":"See How Recruiters Read You"}),(0,t.jsx)("span",{children:"â†’"})]}),(0,t.jsx)("div",{className:"text-muted text-xs",children:c>=2?"Your first 2 reports are free. No login required.":1===c?"1 free report remaining":"Upgrade to keep analyzing"})]})]})}let c=[{id:"overview",label:"Overview"},{id:"fixes",label:"Top Fixes"},{id:"sections",label:"By Section"},{id:"rewrites",label:"Bullet Upgrades"},{id:"alignment",label:"Job Alignment"},{id:"wins",label:"Missing Wins"}];function d({report:e,isLoading:r,hasJobDescription:a,onExportPdf:n,isExporting:l}){let[i,o]=(0,s.useState)("overview"),[d,u]=(0,s.useState)(!1),m=!e&&!r,x=e&&!r,p=e?.score_comment_long||e?.score_comment_short||e?.first_impression||e?.summary,[h,f]=(0,s.useState)(0),g=(0,s.useRef)(null);(0,s.useEffect)(()=>{let t=e?.score||0;if(t<=0)return void f(0);let s=Date.now(),r=()=>{let e=Math.min((Date.now()-s)/1200,1);f(Math.round(t*(1-Math.pow(1-e,3)))),e<1?g.current=requestAnimationFrame(r):f(t)};f(0);let a=setTimeout(()=>{g.current=requestAnimationFrame(r)},100);return()=>{clearTimeout(a),g.current&&cancelAnimationFrame(g.current)}},[e?.score]);let b=h>=90?"#8b5cf6":h>=85?"#3b82f6":h>=80?"#22c55e":h>=70?"#f59e0b":"#ef4444";return(0,t.jsxs)("div",{className:"bg-muted flex flex-col h-full overflow-hidden",children:[(0,t.jsxs)("div",{className:"sticky top-0 z-10 flex items-center justify-between px-4 py-3 bg-surface border-b border-subtle",children:[(0,t.jsx)("div",{className:"flex gap-2 overflow-x-auto",children:c.map(e=>(0,t.jsx)("button",{className:`px-4 py-2.5 rounded-lg text-sm font-medium whitespace-nowrap transition-all duration-200
                            ${i===e.id?"bg-brand-soft text-brand shadow-sm":"text-secondary hover:bg-hover hover:text-primary"}`,onClick:()=>{var t;(t=e.id)!==i&&(u(!0),setTimeout(()=>{o(t),u(!1)},150))},children:e.label},e.id))}),x&&n&&(0,t.jsxs)("button",{onClick:n,disabled:l,className:"flex items-center gap-2 px-3 py-2 text-sm text-secondary hover:text-primary hover:bg-hover rounded-lg transition-colors disabled:opacity-50",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),l?"Exporting...":"Export PDF"]})]}),(0,t.jsxs)("div",{className:`flex-1 overflow-y-auto p-6 transition-all duration-150 ${d?"opacity-0 translate-y-2":"opacity-100 translate-y-0"}`,children:[m&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center text-muted",children:[(0,t.jsx)("svg",{className:"w-16 h-16 mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,t.jsx)("div",{className:"text-lg font-semibold text-primary mb-2",children:"Ready when you are"}),(0,t.jsx)("p",{children:"Upload or paste your resume to get recruiter-grade feedback in seconds."})]}),r&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[(0,t.jsx)("div",{className:"w-10 h-10 border-4 border-brand/20 border-t-brand rounded-full animate-spin mb-4"}),(0,t.jsx)("div",{className:"text-lg font-medium text-primary mb-1",children:"Reading your resume like a recruiter..."}),(0,t.jsx)("p",{className:"text-muted",children:"This usually takes 10-15 seconds"})]}),x&&(0,t.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:["overview"===i&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-start gap-6 p-6 bg-surface rounded-xl border border-subtle shadow-card",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2 flex-shrink-0",children:[(0,t.jsxs)("div",{className:"relative w-28 h-28",children:[(0,t.jsxs)("svg",{viewBox:"0 0 120 120",className:"w-full h-full -rotate-90",children:[(0,t.jsx)("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"currentColor",className:"text-muted/30",strokeWidth:"8"}),(0,t.jsx)("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:b,strokeWidth:"8",strokeLinecap:"round",strokeDasharray:"339.292",strokeDashoffset:339.292*(1-h/100),className:"transition-all duration-100"})]}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center font-display text-4xl font-extrabold",style:{color:b},children:h})]}),(0,t.jsx)("span",{className:"text-xs font-medium text-muted uppercase tracking-wide",children:"Score"})]}),(0,t.jsx)("div",{className:"flex-1",children:p&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsxs)("svg",{className:"w-5 h-5 text-brand",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[(0,t.jsx)("path",{d:"M12 5C16.478 5 20.268 7.405 22 11C20.268 14.595 16.478 17 12 17C7.522 17 3.732 14.595 2 11C3.732 7.405 7.522 5 12 5Z"}),(0,t.jsx)("circle",{cx:"12",cy:"11",r:"3"})]}),(0,t.jsx)("span",{className:"font-semibold text-primary",children:"Recruiter First Impression"})]}),(0,t.jsx)("p",{className:"text-secondary leading-relaxed",children:p})]})})]}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-3",children:[{key:"impact",label:"Impact",score:e.subscores?.impact},{key:"clarity",label:"Clarity",score:e.subscores?.clarity},{key:"story",label:"Story",score:e.subscores?.story},{key:"readability",label:"Readability",score:e.subscores?.readability}].map(({key:e,label:s,score:r})=>(0,t.jsxs)("div",{className:"p-4 bg-surface rounded-lg border border-subtle text-center shadow-card",children:[(0,t.jsx)("div",{className:`text-2xl font-bold ${r?r>=90?"text-[#8b5cf6]":r>=85?"text-brand":r>=80?"text-success":r>=70?"text-warning":"text-danger":"text-muted"}`,children:r||"â€”"}),(0,t.jsx)("div",{className:"text-xs text-muted mt-1",children:s}),r&&(0,t.jsx)("span",{className:`inline-block mt-2 px-2 py-0.5 rounded text-[10px] font-medium ${r>=90?"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300":r>=85?"bg-brand-soft text-brand":r>=80?"bg-success-soft text-success":r>=70?"bg-warning-soft text-warning":"bg-danger-soft text-danger"}`,children:r>=90?"EXCEPTIONAL":r>=85?"STRONG":r>=80?"GOOD":r>=70?"NEEDS WORK":"RISK"})]},e))}),e.strengths&&e.strengths.length>0&&(0,t.jsxs)("div",{className:"p-5 bg-surface rounded-xl border border-subtle shadow-card",children:[(0,t.jsxs)("h3",{className:"flex items-center gap-2 font-semibold text-primary mb-3",children:[(0,t.jsx)("span",{className:"text-success",children:"âœ“"})," What's Working"]}),(0,t.jsx)("ul",{className:"space-y-2",children:e.strengths.map((e,s)=>(0,t.jsxs)("li",{className:"flex items-start gap-2 text-secondary",children:[(0,t.jsx)("span",{className:"text-success/70 mt-1",children:"â€¢"})," ",e]},s))})]}),e.gaps&&e.gaps.length>0&&(0,t.jsxs)("div",{className:"p-5 bg-surface rounded-xl border border-subtle shadow-card",children:[(0,t.jsxs)("h3",{className:"flex items-center gap-2 font-semibold text-primary mb-3",children:[(0,t.jsx)("span",{className:"text-warning",children:"âš "})," What's Missing"]}),(0,t.jsx)("ul",{className:"space-y-2",children:e.gaps.map((e,s)=>(0,t.jsxs)("li",{className:"flex items-start gap-2 text-secondary",children:[(0,t.jsx)("span",{className:"text-warning/70 mt-1",children:"â€¢"})," ",e]},s))})]})]}),"fixes"===i&&(0,t.jsxs)("div",{className:"p-5 bg-surface rounded-xl border border-subtle shadow-card",children:[(0,t.jsx)("h3",{className:"font-semibold text-primary mb-4",children:"Top Fixes â€” Prioritized"}),(0,t.jsx)("div",{className:"space-y-4",children:e.top_fixes?.map((e,s)=>(0,t.jsxs)("div",{className:"flex gap-4 p-4 bg-muted rounded-lg",children:[(0,t.jsx)("span",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center bg-brand-soft text-brand font-bold rounded-full",children:s+1}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-secondary",children:e.fix||e.text}),e.section_ref&&(0,t.jsx)("span",{className:"inline-block mt-2 text-xs text-muted bg-hover px-2 py-0.5 rounded",children:e.section_ref}),e.impact_level&&(0,t.jsxs)("span",{className:`inline-block mt-2 ml-2 text-xs px-2 py-0.5 rounded
                                                        ${"high"===e.impact_level?"bg-danger-soft text-danger":"medium"===e.impact_level?"bg-warning-soft text-warning":"bg-hover text-muted"}`,children:[e.impact_level," impact"]})]})]},s))||(0,t.jsx)("p",{className:"text-muted",children:"No fixes available"})})]}),"sections"===i&&(0,t.jsx)("div",{className:"space-y-4",children:e.section_review?Object.entries(e.section_review).map(([e,s],r)=>(0,t.jsxs)("div",{className:"p-5 bg-surface rounded-xl border border-subtle shadow-card",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h4",{className:"font-semibold text-primary",children:e}),s.grade&&(0,t.jsx)("span",{className:`px-2 py-1 text-xs font-bold rounded
                                                        ${s.grade.includes("A")?"bg-success-soft text-success":s.grade.includes("B")?"bg-brand-soft text-brand":s.grade.includes("C")?"bg-warning-soft text-warning":"bg-danger-soft text-danger"}`,children:s.grade})]}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[s.working&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("span",{className:"text-success font-medium",children:"âœ“ Working:"}),(0,t.jsx)("span",{className:"text-secondary",children:s.working})]}),s.missing&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("span",{className:"text-warning font-medium",children:"â–³ Missing:"}),(0,t.jsx)("span",{className:"text-secondary",children:s.missing})]}),s.fix&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("span",{className:"text-brand font-medium",children:"â†’ Fix:"}),(0,t.jsx)("span",{className:"text-secondary",children:s.fix})]})]})]},r)):(0,t.jsx)("p",{className:"text-muted text-center py-8",children:"Section analysis not available"})}),"rewrites"===i&&(0,t.jsx)("div",{className:"space-y-4",children:e.rewrites?.map((e,s)=>(0,t.jsxs)("div",{className:"p-5 bg-surface rounded-xl border border-subtle shadow-card",children:[e.label&&(0,t.jsx)("div",{className:"text-xs font-semibold text-brand uppercase mb-3",children:e.label}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-danger-soft rounded-lg",children:[(0,t.jsx)("div",{className:"text-xs font-medium text-danger mb-2",children:"Original"}),(0,t.jsx)("p",{className:"text-sm text-secondary",children:e.original})]}),(0,t.jsxs)("div",{className:"p-4 bg-success-soft rounded-lg",children:[(0,t.jsx)("div",{className:"text-xs font-medium text-success mb-2",children:"Better"}),(0,t.jsx)("p",{className:"text-sm text-secondary",children:e.better}),e.enhancement_note&&(0,t.jsx)("p",{className:"text-xs text-success mt-2 italic",children:e.enhancement_note})]})]})]},s))||(0,t.jsx)("p",{className:"text-muted text-center py-8",children:"No rewrites available"})}),"alignment"===i&&(0,t.jsx)(t.Fragment,{children:e.job_alignment?.strongly_aligned?.length||e.job_alignment?.underplayed?.length||e.job_alignment?.missing?.length?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-success-soft rounded-lg",children:[(0,t.jsx)("h4",{className:"font-semibold text-success mb-2",children:"âœ“ Strongly Aligned"}),(0,t.jsx)("ul",{className:"space-y-1 text-sm text-secondary",children:e.job_alignment?.strongly_aligned?.map((e,s)=>(0,t.jsxs)("li",{children:["â€¢ ",e]},s))||(0,t.jsx)("li",{className:"text-muted",children:"None found"})})]}),(0,t.jsxs)("div",{className:"p-4 bg-warning-soft rounded-lg",children:[(0,t.jsx)("h4",{className:"font-semibold text-warning mb-2",children:"âš  Underplayed"}),(0,t.jsx)("ul",{className:"space-y-1 text-sm text-secondary",children:e.job_alignment?.underplayed?.map((e,s)=>(0,t.jsxs)("li",{children:["â€¢ ",e]},s))||(0,t.jsx)("li",{className:"text-muted",children:"None found"})})]}),(0,t.jsxs)("div",{className:"p-4 bg-danger-soft rounded-lg",children:[(0,t.jsx)("h4",{className:"font-semibold text-danger mb-2",children:"âœ— Missing/Weak"}),(0,t.jsx)("ul",{className:"space-y-1 text-sm text-secondary",children:e.job_alignment?.missing?.map((e,s)=>(0,t.jsxs)("li",{children:["â€¢ ",e]},s))||(0,t.jsx)("li",{className:"text-muted",children:"None found"})})]})]}),e.job_alignment?.role_fit&&(0,t.jsxs)("div",{className:"p-5 bg-surface rounded-xl border border-subtle shadow-card",children:[(0,t.jsx)("h4",{className:"font-semibold text-primary mb-4",children:"Where You Read Strongest"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-success mb-2",children:"Best Fit Roles"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:e.job_alignment.role_fit.best_fit_roles?.map((e,s)=>(0,t.jsx)("span",{className:"px-3 py-1 bg-success-soft text-success text-sm rounded-full",children:e},s))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-warning mb-2",children:"Stretch Roles"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:e.job_alignment.role_fit.stretch_roles?.map((e,s)=>(0,t.jsx)("span",{className:"px-3 py-1 bg-warning-soft text-warning text-sm rounded-full",children:e},s))})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.job_alignment.role_fit.seniority_read&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-muted mb-1",children:"Seniority Read"}),(0,t.jsx)("div",{className:"font-medium text-primary",children:e.job_alignment.role_fit.seniority_read})]}),e.job_alignment.role_fit.industry_signals&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-muted mb-1",children:"Industry Signals"}),(0,t.jsx)("div",{className:"font-medium text-primary",children:e.job_alignment.role_fit.industry_signals.join(", ")})]}),e.job_alignment.role_fit.company_stage_fit&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-muted mb-1",children:"Company Stage Fit"}),(0,t.jsx)("div",{className:"font-medium text-primary",children:e.job_alignment.role_fit.company_stage_fit})]})]})]}),e.job_alignment?.positioning_suggestion&&(0,t.jsxs)("div",{className:"p-5 bg-surface rounded-xl border border-subtle shadow-card",children:[(0,t.jsx)("h4",{className:"font-semibold text-primary mb-3",children:"Positioning Recommendation"}),(0,t.jsx)("p",{className:"text-secondary leading-relaxed",children:e.job_alignment.positioning_suggestion})]})]}):(0,t.jsxs)("div",{className:"p-8 bg-surface rounded-xl border border-subtle text-center shadow-card",children:[(0,t.jsx)("div",{className:"text-3xl mb-2",children:"ðŸ“‹"}),(0,t.jsx)("p",{className:"text-muted",children:"Add a job description to see alignment analysis"})]})}),"wins"===i&&(0,t.jsxs)("div",{className:"p-5 bg-surface rounded-xl border border-subtle shadow-card",children:[(0,t.jsx)("h3",{className:"font-semibold text-primary mb-2",children:"Surface Missing Wins"}),(0,t.jsx)("p",{className:"text-muted text-sm mb-4",children:"Answer these questions to uncover hidden impact your resume isn't telling yet:"}),(0,t.jsx)("div",{className:"space-y-3",children:e.ideas?.questions?.map((e,s)=>(0,t.jsxs)("div",{className:"p-4 bg-brand-soft rounded-lg",children:[(0,t.jsx)("p",{className:"font-medium text-primary mb-1",children:e.question}),e.archetype&&(0,t.jsx)("span",{className:"inline-block text-xs bg-brand/10 text-brand px-2 py-0.5 rounded mr-2",children:e.archetype}),e.why&&(0,t.jsx)("p",{className:"text-sm text-secondary mt-2",children:e.why})]},s))||e.next_steps?.map((e,s)=>(0,t.jsx)("div",{className:"p-4 bg-muted rounded-lg",children:(0,t.jsx)("p",{className:"text-secondary",children:e})},s))||(0,t.jsx)("p",{className:"text-muted",children:"No questions available"})}),e.ideas?.how_to_use&&(0,t.jsxs)("p",{className:"text-sm text-secondary mt-4 p-3 bg-muted rounded",children:[(0,t.jsx)("strong",{children:"How to use:"})," ",e.ideas.how_to_use]})]})]})]})]})}function u({isOpen:e,onClose:r,user:a,onSignIn:n,onLoadReport:l}){let[i,o]=(0,s.useState)([]),[c,d]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{e&&a?.email&&(d(!0),fetch("/api/reports").then(e=>e.json()).then(e=>{e.ok&&Array.isArray(e.reports)&&o(e.reports)}).catch(console.error).finally(()=>d(!1)))},[e,a?.email]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:`fixed inset-0 bg-black/40 z-[100] transition-opacity duration-300
                    ${e?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:r}),(0,t.jsxs)("aside",{className:`fixed top-0 right-0 w-[340px] max-w-full h-screen
                    bg-surface shadow-modal z-[101] flex flex-col
                    transition-transform duration-300 ease-out
                    ${e?"translate-x-0":"translate-x-full"}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b border-subtle",children:[(0,t.jsx)("span",{className:"font-display text-lg font-bold text-primary",children:"Your Reports"}),(0,t.jsx)("button",{onClick:r,"aria-label":"Close",className:"text-2xl text-muted hover:text-primary transition-colors p-1",children:"Ã—"})]}),(0,t.jsx)("div",{className:"flex-1 p-5 overflow-y-auto",children:a?.email?c?(0,t.jsx)("div",{className:"text-center py-10 text-muted",children:"Loading..."}):0===i.length?(0,t.jsxs)("div",{className:"text-center py-10 text-muted",children:[(0,t.jsx)("div",{className:"text-5xl mb-4",children:"ðŸ“‹"}),(0,t.jsx)("div",{className:"text-lg font-semibold text-primary mb-2",children:"No reports yet"}),(0,t.jsx)("p",{children:"Run an analysis to see your history here."})]}):(0,t.jsx)("div",{className:"space-y-3",children:i.map(e=>(0,t.jsxs)("div",{onClick:()=>l?.(e.id),className:"p-4 bg-surface border border-subtle rounded-lg cursor-pointer hover:border-brand transition-colors",children:[(0,t.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,t.jsxs)("span",{className:"font-semibold text-brand",children:["Score: ",e.score]}),(0,t.jsx)("span",{className:"text-xs text-muted",children:(e=>{try{return new Date(e).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}catch{return e}})(e.createdAt)})]}),e.resumeSnippet&&(0,t.jsxs)("p",{className:"text-xs text-muted leading-relaxed",children:[e.resumeSnippet.substring(0,100),"..."]})]},e.id))}):(0,t.jsxs)("div",{className:"text-center py-10 text-muted",children:[(0,t.jsx)("div",{className:"text-5xl mb-4",children:"ðŸ“Š"}),(0,t.jsx)("div",{className:"text-lg font-semibold text-primary mb-2",children:"Track your progress"}),(0,t.jsx)("p",{className:"mb-5",children:"Log in to save every analysis, track your score improvements, and compare different versions of your resume."}),(0,t.jsx)("button",{onClick:n,className:"btn-primary w-full",children:"Log In to Save History"})]})})]})]})}var m=e.i(23201),x=e.i(24271);async function p(e){let t=await fetch("/api/resume-feedback",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({text:e.text,jobDescription:e.jobDescription,mode:e.mode||"resume"})});return await t.json()}async function h(e){let t=await fetch("/api/parse-resume",{method:"POST",body:e});return await t.json()}async function f(e,t){let s=await p({text:e,jobDescription:t,mode:"resume"});return(console.log("[createResumeFeedback] API response:",s),s.ok)?{ok:!0,report:s.data}:{ok:!1,message:s.message||"Failed to generate report"}}function g(){let e=(0,r.useSearchParams)(),{user:n,signOut:l,refreshUser:c}=(0,a.useAuth)(),[p,g]=(0,s.useState)(""),[b,j]=(0,s.useState)(""),[y,v]=(0,s.useState)(!1),[N,w]=(0,s.useState)(null),[k,C]=(0,s.useState)(2),[S,_]=(0,s.useState)(!1),[P,R]=(0,s.useState)(!1),[O,T]=(0,s.useState)(!1);(0,s.useEffect)(()=>{"true"!==e.get("sample")||N||fetch("/sample-report.json").then(e=>e.json()).then(e=>w(e)).catch(e=>console.error("Failed to load sample report:",e))},[e,N]);let E=(0,s.useCallback)(async e=>{console.log("[WorkspaceClient] handleFileSelect called with:",e.name,e.type);try{v(!0);let t=new FormData;t.append("file",e);let s=await h(t);console.log("[WorkspaceClient] parseResume result:",s),s.ok&&s.text?g(s.text):(console.error("Failed to parse resume:",s.message),alert("Failed to parse resume: "+(s.message||"Unknown error")))}catch(e){console.error("File parsing error:",e),alert("File parsing error. Check console for details.")}finally{v(!1)}},[]),L=(0,s.useCallback)(async()=>{if(console.log("[WorkspaceClient] handleRun called, resumeText length:",p.length),p.trim()){if(k<=0)return void R(!0);v(!0),w(null);try{console.log("[WorkspaceClient] Calling createResumeFeedback...");let e=await f(p,b||void 0);console.log("[WorkspaceClient] createResumeFeedback result:",e),e.ok&&e.report?(console.log("[WorkspaceClient] Setting report:",e.report),w(e.report),C(e=>Math.max(0,e-1))):(console.error("Failed to generate report:",e.message),alert("Failed to generate report: "+(e.message||"Unknown error")))}catch(e){console.error("Report generation error:",e),alert("Report generation error. Check console for details.")}finally{v(!1)}}},[p,b]),F=(0,s.useCallback)(()=>{g(""),j(""),w(null)},[]),M=(0,s.useCallback)(async()=>{try{let e=await fetch("/sample-report.json"),t=await e.json();w(t)}catch(e){console.error("Failed to load sample report:",e)}},[]),[D,A]=(0,s.useState)(!1),W=(0,s.useCallback)(async()=>{if(N){A(!0);try{let e=await fetch("/api/export-pdf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report:N})});if(!e.ok){let t=await e.json().catch(()=>({}));alert(t.message||"Failed to export PDF");return}let t=await e.blob(),s=URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download="resume-report.pdf",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)}catch(e){console.error("PDF export error:",e),alert("Failed to export PDF")}finally{A(!1)}}},[N]);return(0,s.useEffect)(()=>{fetch("/api/free-status").then(e=>e.json()).then(e=>{void 0!==e.free_uses_left&&C(e.free_uses_left)}).catch(e=>console.error("Failed to fetch free status:",e))},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("main",{className:"min-h-screen flex flex-col bg-gray-50",children:[(0,t.jsx)("h1",{className:"sr-only",children:"Resume Workspace â€” Analyze Your Resume"}),(0,t.jsx)(i,{user:n?{email:n.email||void 0,firstName:n.firstName||void 0}:null,onNewReport:F,onSampleReport:M,onSignIn:()=>T(!0),onSignOut:l,onHistory:()=>_(!0)}),(0,t.jsxs)("div",{className:`flex-1 grid ${N?"grid-cols-1":"grid-cols-1 lg:grid-cols-2"}`,children:[(0,t.jsx)("div",{className:`${N?"hidden":"block"} h-full`,children:(0,t.jsx)(o,{resumeText:p,jobDescription:b,onResumeTextChange:g,onJobDescChange:j,onFileSelect:E,onRun:L,isLoading:y,freeUsesRemaining:k})}),(0,t.jsx)(d,{report:N,isLoading:y,hasJobDescription:!!b.trim(),onExportPdf:W,isExporting:D})]})]}),(0,t.jsx)(u,{isOpen:S,onClose:()=>_(!1),user:n?{email:n.email||void 0}:null,onSignIn:()=>{_(!1),T(!0)},onLoadReport:e=>{console.log("Load report:",e),_(!1)}}),(0,t.jsx)(m.default,{isOpen:P,onClose:()=>R(!1),freeUsesRemaining:k,onSuccess:()=>{R(!1)}}),(0,t.jsx)(x.default,{isOpen:O,onClose:()=>T(!1),onSuccess:async()=>{await c(),T(!1)}})]})}e.s(["default",()=>g],74451)}]);